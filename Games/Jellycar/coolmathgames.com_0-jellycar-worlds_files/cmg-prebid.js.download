!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e){e.exports=JSON.parse('{"JSON_MAPPING":{"PL_CODE":"code","PL_SIZE":"sizes","PL_BIDS":"bids","BD_BIDDER":"bidder","BD_ID":"paramsd","BD_PL_ID":"placementId","ADSERVER_TARGETING":"adserverTargeting","BD_SETTING_STANDARD":"standard"},"DEBUG_MODE":"pbjs_debug","STATUS":{"GOOD":1,"NO_BID":2},"CB":{"TYPE":{"ALL_BIDS_BACK":"allRequestedBidsBack","AD_UNIT_BIDS_BACK":"adUnitBidsBack","BID_WON":"bidWon","REQUEST_BIDS":"requestBids"}},"EVENTS":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent"},"AD_RENDER_FAILED_REASON":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"EVENT_ID_PATHS":{"bidWon":"adUnitCode"},"GRANULARITY_OPTIONS":{"LOW":"low","MEDIUM":"medium","HIGH":"high","AUTO":"auto","DENSE":"dense","CUSTOM":"custom"},"TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat"},"DEFAULT_TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"NATIVE_KEYS":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"S2S":{"SRC":"s2s","DEFAULT_ENDPOINT":"https://prebid.adnxs.com/pbs/v1/openrtb2/auction","SYNCED_BIDDERS_KEY":"pbjsSyncs"},"BID_STATUS":{"BID_TARGETING_SET":"targetingSet","RENDERED":"rendered","BID_REJECTED":"bidRejected"},"REJECTION_REASON":{"INVALID":"Bid has missing or invalid properties","INVALID_REQUEST_ID":"Invalid request ID","BIDDER_DISALLOWED":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","FLOOR_NOT_MET":"Bid does not meet price floor","CANNOT_CONVERT_CURRENCY":"Unable to convert currency"},"PREBID_NATIVE_DATA_KEYS_TO_ORTB":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"NATIVE_ASSET_TYPES":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"NATIVE_IMAGE_TYPES":{"ICON":1,"MAIN":3},"NATIVE_KEYS_THAT_ARE_NOT_ASSETS":["privacyLink","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"]}')},function(e,t,n){var r=n(14);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(20),i=n(21),a=n(12),o=n(22);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(24),i=n(25),a=n(12),o=n(26);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(27),i=n(15);e.exports=function(e,t){var n=i(e,t,"get");return r(e,n)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(28),i=n(15);e.exports=function(e,t,n){var a=i(e,t,"set");return r(e,a,n),n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(14);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){
/*
* @license MIT
* Fun Hooks v0.9.10
* (c) @snapwich
*/
s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var n=Object.freeze({useProxy:!0,ready:0}),r=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,a=0;if(t)n=t;else{for(;a<i&&!(a in r);)a++;n=r[a++]}for(;a<i;)a in r&&(n=e(n,r[a],a,r)),a++;return n};function a(e,t){return Array.prototype.slice.call(e,t)}var o=Object.assign||function(e){return i.call(a(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function s(e){var t,d={},c=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?l.apply(null,arguments):void 0}function l(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},a=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==a.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),a=r[0],o=r[1]||"sync";if(!i[a]){var s=e[a];i[a]=e[a]=g(o,s,n?[n,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function p(e){var n=Array.isArray(e)?e:e.split(".");return i.call(n,(function(r,i,a){var o=r[i],s=!1;return o||(a===n.length-1?(t||c.push((function(){s||console.warn("fun-hooks: referenced '"+e+"' but it was never created")})),r[i]=f((function(e){r[i]=e,s=!0}))):r[i]={})}),d)}function f(e){var t=[],n=[],i=function(){},a={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var r=t.concat(n);"object"==typeof e&&(r=r.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{o(r,{remove:function(){return r.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},s={install:function(r,a,o){this.type=r,i=o,o(t,n),e&&e(a)}};return r.set(a.after,s),a;function d(e,r,a,o){var s={hook:a,type:r,priority:o||10,remove:function(){var r=e.indexOf(s);-1!==r&&(e.splice(r,1),i(t,n))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),i(t,n),this}}function g(n,i,d){var u=i.after&&r.get(i.after);if(u){if(u.type!==n)throw"fun-hooks: recreated hookable with different type";return i}var l,g,m=d?p(d):f(),v={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return t||c.push(b),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(i,v):o(g=function(){return v.apply?v.apply(i,this,a(arguments)):i.apply(this,arguments)},m),r.get(g.after).install(n,g,(function(e,t){var r,i=[];e.length||t.length?(e.forEach(o),r=i.push(void 0)-1,t.forEach(o),l=function(e,t,o){var s,d=0,c="async"===n&&"function"==typeof o[o.length-1]&&o.pop();function u(e){"sync"===n?s=e:c&&c.apply(null,arguments)}function l(e){if(i[d]){var r=a(arguments);return l.bail=u,r.unshift(l),i[d++].apply(t,r)}"sync"===n?s=e:c&&c.apply(null,arguments)}return i[r]=function(){var r=a(arguments,1);"async"===n&&c&&(delete l.bail,r.push(l));var i=e.apply(t,r);"sync"===n&&l(i)},l.apply(null,o),s}):l=void 0;function o(e){i.push(e.hook)}b()})),g;function b(){!t&&("sync"!==n||e.ready&s.SYNC)&&("async"!==n||e.ready&s.ASYNC)?"sync"!==n&&e.ready&s.QUEUE?v.apply=function(){var e=arguments;c.push((function(){g.apply(e[1],e[2])}))}:v.apply=function(){throw"fun-hooks: hooked function not ready"}:v.apply=l}}return(e=o({},n,e)).ready?u.ready=function(){t=!0,function(e){for(var t;t=e.shift();)t()}(c)}:t=!0,u.get=p,u}e.exports=s},function(e,t,n){var r=n(29);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(13);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(2).default,i=n(23);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}},function(e,t,n){var r=n(2).default,i=n(30);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(31);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){e.exports=n(32)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],d=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);d=!0);}catch(e){c=!0,i=e}finally{try{if(!d&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(2).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(13);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n.n(r),a=n(1),o=n.n(a),s=window,d=s.cmgpbjs=s.cmgpbjs||{};function c(){return d}function u(e){d.installedModules.push(e)}d.cmd=d.cmd||[],d.que=d.que||[],s===window&&(s._pbjsGlobals=s._pbjsGlobals||[],s._pbjsGlobals.push("cmgpbjs"));var l=n(4),p=n.n(l),f=n(2),g=n.n(f);function m(e,t,n){return e&&e.includes(t,n)||!1}function v(e,t,n){return e&&e.find(t,n)}var b={buckets:[{max:5,increment:.5}]},h={buckets:[{max:20,increment:.1}]},y={buckets:[{max:20,increment:.01}]},w={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},x={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":T(e,b,n),med:""===r?"":T(e,h,n),high:""===r?"":T(e,y,n),auto:""===r?"":T(e,x,n),dense:""===r?"":T(e,w,n),custom:""===r?"":T(e,t,n)}}function T(e,t,n){var r="";if(!I(t))return r;var i=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),a=0,o=v(t.buckets,(function(t){if(e>i.max*n){var o=t.precision;void 0===o&&(o=2),r=(t.max*n).toFixed(o)}else{if(e<=t.max*n&&e>=a*n)return t.min=a,t;a=t.max}}));return o&&(r=function(e,t,n){var r=void 0!==t.precision?t.precision:2,i=t.increment*n,a=t.min*n,o=Math.floor,s=R.getConfig("cpmRoundingFunction");"function"==typeof s&&(o=s);var d,c,u=Math.pow(10,r+2),l=(e*u-a*u)/(i*u);try{d=o(l)*i+a}catch(e){c=!0}(c||"number"!=typeof d)&&(Ee("Invalid rounding function passed in config"),d=Math.floor(l)*i+a);return(d=Number(d.toFixed(10))).toFixed(r)}(e,o,n)),r}function I(e){if(Me(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}function E(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var S=n(0);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C="TRUE"===Re(S.DEBUG_MODE).toUpperCase(),A={random:!0,fixed:!0},k={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};var R=function(){var e,t,n,r=[],a=null;function s(){function r(e){return o[e].val}function a(e,t){o[e].val=t}e={};var o={publisherDomain:{set:function(e){null!=e&&Ee("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),a("publisherDomain",e)}},priceGranularity:{val:k.MEDIUM,set:function(e){c(e)&&("string"==typeof e?a("priceGranularity",d(e)?e:k.MEDIUM):Ne(e)&&(a("customPriceBucket",e),a("priceGranularity",k.CUSTOM),Te("Using custom price granularity")))}},customPriceBucket:{val:{},set:function(){}},mediaTypePriceGranularity:{val:{},set:function(e){null!=e&&a("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,n){return c(e[n])?"string"==typeof e?t[n]=d(e[n])?e[n]:r("priceGranularity"):Ne(e)&&(t[n]=e[n],Te("Using custom price granularity for ".concat(n))):Ee("Invalid price granularity for media type: ".concat(n)),t}),{}))}},bidderSequence:{val:"random",set:function(e){A[e]?a("bidderSequence",e):Ee("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{val:{},set:function(e){(function(e){if(!Ne(e))return Ee("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("secondaryBidders"!==r&&"suppressStaleRender"!==r)return Ee("Auction Options given an incorrect param: ".concat(r)),!1;if("secondaryBidders"===r){if(!Pe(e[r]))return Ee("Auction Options ".concat(r," must be of type Array")),!1;if(!e[r].every(Ue))return Ee("Auction Options ".concat(r," must be only string")),!1}else if("suppressStaleRender"===r&&!qe(e[r]))return Ee("Auction Options ".concat(r," must be of type boolean")),!1}return!0})(e)&&a("auctionOptions",e)}}},s={debug:C,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};function d(e){return v(Object.keys(k),(function(t){return e===k[t]}))}function c(e){if(!e)return Se("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)d(e)||Ee("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(Ne(e)&&!I(e))return Se("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(s,Object.fromEntries(Object.entries(o).map((function(e){var t=i()(e,2),n=t[0],o=t[1];return[n,Object.assign({get:r.bind(null,n),set:a.bind(null,n),enumerable:!0},o)]})))),t&&_(Object.keys(t).reduce((function(e,n){return t[n]!==s[n]&&(e[n]=s[n]||{}),e}),{})),t=s,n={}}function d(){if(a&&n&&Ne(n[a])){var e=n[a];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(t).concat(Object.keys(e)))).reduce((function(n,r){return void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:Ne(e[r])?n[r]=Nt({},t[r],e[r]):n[r]=e[r],n}),{})}return Object.assign({},t)}var c=[d,function(){var e=d();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?E(e(),t):d()}return x.apply(void 0,arguments)}})),u=i()(c,2),l=u[0],p=u[1],f=[p,l].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===g()(t)&&(t=ut(t)),t}})),b=i()(f,2),h=b[0],y=b[1];function w(n){if(Ne(n)){var r=Object.keys(n),i={};r.forEach((function(r){var a=n[r];Ne(e[r])&&Ne(a)&&(a=Object.assign({},e[r],a));try{i[r]=t[r]=a}catch(e){Ee("Cannot set config for property ".concat(r," : "),e)}})),_(i)}else Se("setConfig options must be an object")}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"==typeof i){var a={topic:e,callback:i};return r.push(a),n.init&&i("*"===e?p():o()({},e,p(e))),function(){r.splice(r.indexOf(a),1)}}Se("listener must be a function")}function _(e){var t=Object.keys(e);r.filter((function(e){return m(t,e.topic)})).forEach((function(t){t.callback(o()({},t.topic,e[t.topic]))})),r.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{r(e),e.bidders.forEach((function(r){n[r]||(n[r]={}),Object.keys(e.config).forEach((function(i){var a=e.config[i];if(Ne(a)){var o=t?Nt:Object.assign;n[r][i]=o({},n[r][i]||{},a)}else n[r][i]=a}))}))}catch(e){Se(e)}function r(e){if(!Ne(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!Ne(e.config))throw"setBidderConfig bidder options must contain a config object"}}function S(e,t){a=e;try{return t()}finally{R()}}function R(){a=null}return s(),{getCurrentBidder:function(){return a},resetBidder:R,getConfig:p,getAnyConfig:l,readConfig:h,readAnyConfig:y,setConfig:w,mergeConfig:function(e){if(Ne(e)){var t=Nt(d(),e);return w(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}Se("mergeConfig input must be an object")},setDefaults:function(n){Ne(e)?(Object.assign(e,n),Object.assign(t,n)):Se("defaults must be an object")},resetConfig:s,runWithBidder:S,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return S(e,ue.call.apply(ue,[t,this].concat(r)))}Ee("config.callbackWithBidder callback is not a function")}}},setBidderConfig:T,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return T(e,!0)}}}(),j=n(16),B=n.n(j),U=n(7),P=n.n(U),D=n(8),N=n.n(D),q=n(5),M=n.n(q),z=n(6),F=n.n(z);function G(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function L(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var V=0,W=1,H=new WeakMap,K=new WeakMap,J=function(){function e(t){if(P()(this,e),G(this,H,{writable:!0,value:void 0}),G(this,K,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var n=[],r=[],a=[V,W].map((function(e){return function(t){if(e===V&&"function"==typeof(null==t?void 0:t.then))t.then(s,d);else if(!n.length)for(n.push(e,t);r.length;)r.shift()()}})),o=i()(a,2),s=o[0],d=o[1];try{t(s,d)}catch(e){d(e)}F()(this,H,n),F()(this,K,r)}return N()(e,[{key:"then",value:function(e,t){var n=this,r=M()(this,H);return new this.constructor((function(a,o){var s=function(){var n=r[1],s=r[0]===V?[e,a]:[t,o],d=i()(s,2),c=d[0],u=d[1];if("function"==typeof c){try{n=c(n)}catch(e){return void o(e)}u=a}u(n)};r.length?s():M()(n,K).push(s)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,n=this;return this.then((function(n){return t=n,e()}),(function(r){return t=n.constructor.reject(r),e()})).then((function(){return t}))}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e((function(e){0===t?e():setTimeout(e,t)}))}},{key:"race",value:function(t){var n=this;return new this((function(r,i){L(n,e,Y).call(n,t,(function(e,t){return e?r(t):i(t)}))}))}},{key:"all",value:function(t){var n=this;return new this((function(r,i){var a=[];L(n,e,Y).call(n,t,(function(e,t,n){return e?a[n]=t:i(t)}),(function(){return r(a)}))}))}},{key:"allSettled",value:function(t){var n=this;return new this((function(r){var i=[];L(n,e,Y).call(n,t,(function(e,t,n){return i[n]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return r(i)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,n){return n(e)}))}}]),e}();function Y(e,t,n){var r=this,i=e.length;function a(){t.apply(this,arguments),--i<=0&&n&&n()}0===e.length&&n?n():e.forEach((function(e,t){return r.resolve(e).then((function(e){return a(!0,e,t)}),(function(e){return a(!1,e,t)}))}))}function X(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.promiseFactory,i=void 0===r?function(e){return new J(e)}:r;function a(e){return function(t){return e(t)}}return{promise:i((function(n,r){e=n,t=r})),resolve:a(e),reject:a(t)}}function Q(e,t,n){t.split&&(t=t.split("."));for(var r,i,a=0,o=t.length,s=e;a<o&&"__proto__"!==(i=t[a++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=a===o?n:typeof(r=s[i])==typeof t?r:0*t[a]!=0||~(""+t[a]).indexOf(".")?{}:[]}var $,Z=Object.prototype.toString,ee=Boolean(window.console),te=Boolean(ee&&window.console.log),ne=Boolean(ee&&window.console.info),re=Boolean(ee&&window.console.warn),ie=Boolean(ee&&window.console.error),ae=c();function oe(){null!=$&&$.apply(void 0,arguments)}var se={checkCookieSupport:vt,createTrackPixelIframeHtml:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return"";t&&(e=encodeURI(e));n&&(n='sandbox="'.concat(n,'"'));return"<iframe ".concat(n,' id="').concat(pe(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')},getWindowSelf:xe,getWindowTop:we,getWindowLocation:_e,insertUserSyncIframe:Xe,insertElement:We,isFn:Be,triggerPixel:Ke,logError:Se,logWarn:Ee,logMessage:Te,logInfo:Ie,parseQS:jt,formatQS:Bt,deepEqual:Dt};var de,ce={},ue=function(e,t){return t}.bind(null,1,ce)()===ce?Function.prototype.bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},le=(de=0,function(){return++de});function pe(){return le()+Math.random().toString(16).substr(2)}function fe(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,fe)}function ge(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function me(e){return e&&Object.getOwnPropertyNames(e).length>0?(t=e,Object.keys(t)).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(nt(e,t)))})).join("&"):"";var t}function ve(e){var t=[];if("string"==typeof e){var n=e.split(","),r=/^(\d)+x(\d)+$/i;if(n)for(var i in n)Ve(n,i)&&n[i].match(r)&&t.push(n[i])}else if("object"===g()(e)){var a=e.length;if(a>0)if(2===a&&"number"==typeof e[0]&&"number"==typeof e[1])t.push(be(e));else for(var o=0;o<a;o++)t.push(be(e[o]))}return t}function be(e){if(ye(e))return e[0]+"x"+e[1]}function he(e){if(ye(e))return{w:e[0],h:e[1]}}function ye(e){return Pe(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function we(){return window.top}function xe(){return window.self}function _e(){return window.location}function Te(){Ae()&&te&&console.log.apply(console,Ce(arguments,"MESSAGE:"))}function Ie(){Ae()&&ne&&console.info.apply(console,Ce(arguments,"INFO:"))}function Ee(){Ae()&&re&&console.warn.apply(console,Ce(arguments,"WARNING:")),oe(S.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function Se(){Ae()&&ie&&console.error.apply(console,Ce(arguments,"ERROR:")),oe(S.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function Oe(e){function t(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}}return{logError:t(Se),logWarn:t(Ee),logMessage:t(Te),logInfo:t(Ie)}}function Ce(e,t){e=[].slice.call(e);var n=R.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Ae(){return!!R.getConfig("debug")}function ke(){var e=document.createElement("iframe");return e.id=pe(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function Re(e){return jt(_e().search)[e]||""}function je(e,t){return Z.call(e)==="[object "+t+"]"}function Be(e){return je(e,"Function")}function Ue(e){return je(e,"String")}function Pe(e){return je(e,"Array")}function De(e){return je(e,"Number")}function Ne(e){return je(e,"Object")}function qe(e){return je(e,"Boolean")}function Me(e){if(!e)return!0;if(Pe(e)||Ue(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function ze(e){return Ue(e)&&(!e||0===e.length)}function Fe(e,t){if(!Me(e)){if(Be(e.forEach))return e.forEach(t,this);var n=0,r=e.length;if(r>0)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}function Ge(e,t){if(Me(e))return!1;if(Be(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function Le(e,t){if(Me(e))return[];if(Be(e.map))return e.map(t);var n=[];return Fe(e,(function(r,i){n.push(t(r,i,e))})),n}function Ve(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):void 0!==e[t]&&e.constructor.prototype[t]!==e[t]}function We(e,t,n,r){var i;t=t||document,i=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var a=r?null:i.firstChild;return i.insertBefore(e,a)}}catch(e){}}function He(e,t){var n=null;return new J((function(r){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(n=window.setTimeout(i,t))}))}function Ke(e,t,n){var r=new Image;t&&se.isFn(t)&&He(r,n).then(t),r.src=e}function Je(e){var t=e.source,n=e.burl;t===S.S2S.SRC&&n&&se.triggerPixel(n)}function Ye(e){if(e){var t=document.createElement("iframe");t.id=pe(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",se.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}function Xe(e,t,n){var r=se.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;var a=i.firstChild;t&&se.isFn(t)&&He(a,n).then(t),se.insertElement(a,document,"html",!0)}function Qe(e){if(!e)return"";var t='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return t+='<img src="'+encodeURI(e)+'"></div>'}function $e(e,t,n){return null==t?n:Ue(t)?t:De(t)?t.toString():void se.logWarn("Unsuported type for param: "+e+" required type: String")}function Ze(e,t,n){return n.indexOf(e)===t}function et(e,t){return e.concat(t)}function tt(e,t){var n;if(e)return t.some((function(t){var r=v(t.bids,(function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}));return r&&(n=r),r})),n}function nt(e,t){return e[t]}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae.adUnits;return e.map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(et,[])})).reduce(et,[]).filter((function(e){return void 0!==e})).filter(Ze)}function it(){if(window.googletag&&Be(window.googletag.pubads)&&Be(window.googletag.pubads().getSlots))return!0}var at=st("timeToRespond",(function(e,t){return e>t})),ot=st("responseTimestamp",(function(e,t){return e>t}));st("responseTimestamp",(function(e,t){return e<t}));function st(e,t){return function(n,r){return n.cpm===r.cpm?t(n[e],r[e])?r:n:n.cpm<r.cpm?r:n}}function dt(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}function ct(e,t){return m(e,t&&t.adUnitCode)}function ut(e){return B()(e)}function lt(){try{return se.getWindowSelf()!==se.getWindowTop()}catch(e){return!0}}function pt(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function ft(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function gt(){return(new Date).getTime()}function mt(){return!1!==R.getConfig("deviceAccess")}function vt(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function bt(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function ht(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,o()({},n,e[n]))}),{})}function yt(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(et,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}var wt=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function xt(e){var t;return it()&&(t=v(window.googletag.pubads().getSlots(),function(e){return function(t){return wt(t,e)}}(e))),t}function _t(e){var t=xt(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function Tt(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}function It(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Et(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function St(e,t){return"object"!==g()(e)?{}:t.reduce((function(n,r,i){if("function"==typeof r)return n;var a=r,o=r.match(/^(.+?)\sas\s(.+?)$/i);o&&(r=o[1],a=o[2]);var s=e[r];return"function"==typeof t[i+1]&&(s=t[i+1](s,n)),void 0!==s&&(n[a]=s),n}),{})}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return Fe(e,(function(e,r){if(Pe(e)){var i=[];Fe(e,(function(e){((e=$e(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!Ue(e=$e(t+"."+r,e)))return;e=[e]}n.push({key:r,value:e})})),n}function Ct(e,t){return Object.keys(e).forEach((function(n){var r,i;t[n]&&(Be(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}function At(e,t){return Pe(e)&&(!t||e.length===t)&&e.every((function(e){return It(e)}))}function kt(e,t){for(var n=[],r=0;r<t;r++){var i=Ne(e)?ut(e):e;n.push(i)}return n}function Rt(e,t){for(var n=[],r=0;r<Math.ceil(e.length/t);r++){var i=r*t,a=i+t;n.push(e.slice(i,a))}return n}function jt(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=t.split("="),r=i()(n,2),a=r[0],o=r[1];return/\[\]$/.test(a)?(e[a=a.replace("[]","")]=e[a]||[],e[a].push(o)):e[a]=o||"",e}),{}):{}}function Bt(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function Ut(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:se.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function Pt(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(se.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function Dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.checkTypes,i=void 0!==r&&r;if(e===t)return!0;if("object"!==g()(e)||null===e||"object"!==g()(t)||null===t||i&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e){if(!t.hasOwnProperty(a))return!1;if(!Dt(e[a],t[a],{checkTypes:i}))return!1}return!0}function Nt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(Ne(e)&&Ne(i)){var a=function(t){Ne(i[t])?(e[t]||Object.assign(e,o()({},t,{})),Nt(e[t],i[t])):Pe(i[t])?e[t]?Pe(e[t])&&i[t].forEach((function(n){for(var r=1,i=0;i<e[t].length;i++)if(Dt(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,o()({},t,p()(i[t]))):Object.assign(e,o()({},t,i[t]))};for(var s in i)a(s)}return Nt.apply(void 0,[e].concat(n))}function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,r=function(){var r=t.apply(this,arguments);return n.has(r)||n.set(r,e.apply(this,arguments)),n.get(r)};return r.clear=n.clear.bind(n),r}Mt={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};var Mt,zt,Ft=Array.prototype.slice,Gt=Array.prototype.push,Lt=Le(S.EVENTS,(function(e){return e})),Vt=S.EVENT_ID_PATHS,Wt=[],Ht=function(){var e={},t={};function n(t,n){Te("Emitting event for: "+t);var r=n[0]||{},i=r[Vt[t]],a=e[t]||{que:[]},o=Le(a,(function(e,t){return t})),s=[];Wt.push({eventType:t,args:r,id:i,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),i&&Ge(o,i)&&Gt.apply(s,a[i].que),Gt.apply(s,a.que),Fe(s,(function(e){if(e)try{e.apply(null,n)}catch(e){Se("Error executing handler:","events.js",e)}}))}return t.on=function(t,n,r){if(function(e){return Ge(Lt,e)}(t)){var i=e[t]||{que:[]};r?(i[r]=i[r]||{que:[]},i[r].que.push(n)):i.que.push(n),e[t]=i}else Se("Wrong event name : "+t+" Valid event names :"+Lt)},t.emit=function(e){var t=Ft.call(arguments,1);n(e,t)},t.off=function(t,n,r){var i=e[t];Me(i)||Me(i.que)&&Me(i[r])||r&&(Me(i[r])||Me(i[r].que))||(r?Fe(i[r].que,(function(e){var t=i[r].que;e===n&&t.splice(t.indexOf(e),1)})):Fe(i.que,(function(e){var t=i.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=i)},t.get=function(){return e},t.addEvents=function(e){Lt=Lt.concat(e)},t.getEvents=function(){var e=[];return Fe(Wt,(function(t){var n=Object.assign({},t);e.push(n)})),e},t}();zt=Ht.emit.bind(Ht),$=zt;var Kt=Ht.on,Jt=Ht.off,Yt=(Ht.get,Ht.getEvents),Xt=Ht.emit;Ht.addEvents;var Qt=$t();function $t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,r=t.done;return function(t,i,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var s,d=o.method||(a?"POST":"GET"),c=document.createElement("a");c.href=t;var u="object"===g()(i)&&null!==i?i:{success:function(){Te("xhr success")},error:function(e){Se("xhr error",null,e)}};if("function"==typeof i&&(u.success=i),(s=new window.XMLHttpRequest).onreadystatechange=function(){if(4===s.readyState){"function"==typeof r&&r(c.origin);var e=s.status;e>=200&&e<300||304===e?u.success(s.responseText,s):u.error(s.statusText,s)}},R.getConfig("disableAjaxTimeout")||(s.ontimeout=function(){Se("  xhr timeout after ",s.timeout,"ms")}),"GET"===d&&a){var l=Ut(t,o);Object.assign(l.search,a),t=Pt(l)}s.open(d,t,!0),R.getConfig("disableAjaxTimeout")||(s.timeout=e),o.withCredentials&&(s.withCredentials=!0),Fe(o.customHeaders,(function(e,t){s.setRequestHeader(t,e)})),o.preflight&&s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type",o.contentType||"text/plain"),"function"==typeof n&&n(c.origin),"POST"===d&&a?s.send(a):s.send()}catch(e){Se("xhr construction",e),"object"===g()(i)&&null!==i&&i.error(e)}}}function Zt(e,t){var n=t?"<![CDATA[".concat(t,"]]>"):"";return'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(e,"]]></VASTAdTagURI>\n        <Impression>").concat(n,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")}function en(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?Vi.index:n,i=e.vastXml?e.vastXml:Zt(e.vastUrl,e.vastImpUrl),a=r.getAuction(e),o=Number(e.ttl)+15,s={type:"xml",value:i,ttlseconds:o};return R.getConfig("cache.vasttrack")&&(s.bidder=e.bidder,s.bidid=e.requestId,s.aid=e.auctionId),null!=a&&(s.timestamp=a.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(s.key=e.customCacheKey),s}function tn(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}var nn=new WeakMap,rn=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan"];function an(e,t,n,r,i){if(t&&e){if(m(rn,t)){r||(r=document);var a=d(r,e);if(a)return n&&"function"==typeof n&&(a.loaded?n():a.callbacks.push(n)),a.tag;var o=nn.get(r)||{},s={loaded:!1,tag:null,callbacks:[]};return o[e]=s,nn.set(r,o),n&&"function"==typeof n&&s.callbacks.push(n),Ee("module ".concat(t," is loading external JavaScript")),function(t,n,r,i){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;var o=d(r,e);o&&(o.tag=a);a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()};a.src=t,i&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}(a,i);return We(a,r),a}(e,(function(){s.loaded=!0;try{for(var e=0;e<s.callbacks.length;e++)s.callbacks[e]()}catch(e){Se("Error executing callback","adloader.js:loadExternalScript",e)}}),r,i)}Se("".concat(t," not whitelisted for loading external JavaScript"))}else Se("cannot load external script without url and moduleCode");function d(e,t){var n=nn.get(e);return n&&n[t]?n[t]:null}}var on=c();function sn(e){var t=this,n=e.url,r=e.config,i=e.id,a=e.callback,o=e.loaded,s=e.adUnitCode,d=e.renderNow;this.url=n,this.config=r,this.handlers={},this.id=i,this.renderNow=d,this.loaded=o,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):Se("Commands given to Renderer.push must be wrapped in a function")},this.callback=a||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,r=function(){e._render?e._render.apply(e,t):Ee("No render function was provided, please use .setRender on the renderer")};un(s)?(Ee("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(s)),r()):d?r():(this.cmd.unshift(r),an(n,"outstream",this.callback,this.documentContext))}.bind(this)}function dn(e){return!(!e||!e.url&&!e.renderNow)}function cn(e,t,n){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}function un(e){var t=v(on.adUnits,(function(t){return t.code===e}));if(!t)return!1;var n=E(t,"renderer"),r=!!(n&&n.url&&n.render),i=E(t,"mediaTypes.video.renderer"),a=!!(i&&i.url&&i.render);return!!(r&&!0!==n.backupOnly||a&&!0!==i.backupOnly)}sn.install=function(e){return new sn({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},sn.prototype.getConfig=function(){return this.config},sn.prototype.setRender=function(e){this._render=e},sn.prototype.setEventHandlers=function(e){this.handlers=e},sn.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),Te("Prebid Renderer event for id ".concat(t," type ").concat(n))},sn.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){Se("Error processing Renderer command: ",e)}};var ln,pn=n(9),fn=n.n(pn),gn=fn()({ready:fn.a.SYNC|fn.a.ASYNC|fn.a.QUEUE}),mn=X();gn.ready=(ln=gn.ready,function(){try{return ln.apply(gn,arguments)}finally{mn.resolve()}});mn.promise;var vn=gn.get;var bn={};function hn(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function yn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var wn=new WeakSet;function xn(e){return null==e?this.defaultScope:e}var _n=new(function(){function e(t,n){P()(this,e),hn(this,wn),this.getSettings=t,this.defaultScope=n}return N()(e,[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=yn(this,wn,xn).call(this,e),E(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return Nt({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=yn(this,wn,xn).call(this,e),this.getSettings()[e]||{}}}]),e}())((function(){return c().bidderSettings||{}}),S.JSON_MAPPING.BD_SETTING_STANDARD),Tn=[];function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,n=e.moduleType,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.bidderSettings,a=void 0===i?_n:i;function o(e){if("bidder"!==n)return!0;var r=a.get(t,"storageAllowed");return r&&!0!==r?Array.isArray(r)?r.some((function(t){return t===e})):r===e:!!r}function s(e,r){if(o(r)){var i;return En(n,t,{hasEnforcementHook:!1},(function(t){if(t&&t.hasEnforcementHook)i=e(t);else{var n={hasEnforcementHook:!1,valid:mt()};i=e(n)}})),i}Ie("bidderSettings denied access to device storage for bidder '".concat(t,"'"));return e({valid:!1})}function d(e,t,n){if(!n||"function"!=typeof n)return s(e,t);Tn.push((function(){var r=s(e,t);n(r)}))}var c=function(e,t,n,r,i,a){return d((function(a){if(a&&a.valid){var o=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=n&&""!==n?" ;expires=".concat(n):"",d=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(o).concat(r?"; SameSite=".concat(r):"").concat(d)}}),"cookie",a)},u=function(e,t){return d((function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null}),"cookie",t)},l=function(e){return d((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),"html5",e)},p=function(e){return d((function(e){return!(!e||!e.valid)&&vt()}),"cookie",e)},f=function(e,t,n){return d((function(n){n&&n.valid&&v()&&window.localStorage.setItem(e,t)}),"html5",n)},g=function(e,t){return d((function(t){return t&&t.valid&&v()?window.localStorage.getItem(e):null}),"html5",t)},m=function(e,t){return d((function(t){t&&t.valid&&v()&&window.localStorage.removeItem(e)}),"html5",t)},v=function(e){return d((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){Se("Local storage api disabled")}return!1}),"html5",e)},b=function(e,t){return d((function(t){if(t&&t.valid){var n=[];if(mt())for(var r=document.cookie.split(";");r.length;){var i=r.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(i.slice(a+1)))}return n}}),"cookie",t)};return{setCookie:c,getCookie:u,localStorageIsEnabled:l,cookiesAreEnabled:p,setDataInLocalStorage:f,getDataFromLocalStorage:g,removeDataFromLocalStorage:m,hasLocalStorage:v,findSimilarCookies:b}}var En=gn("async",(function(e,t,n,r){r(n)}),"validateStorageEnforcement");function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,n=e.moduleName,r=e.bidderCode;function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return r?((t&&"bidder"!==t||n)&&i(),t="bidder",n=r):n&&t||i(),In({moduleType:t,moduleName:n})}function On(e){return In({moduleName:e,moduleType:"core"})}R.setDefaults({userSync:ut({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});var Cn=On("usersync");var An=function(e){var t={},n={image:[],iframe:[]},r=new Set,a={},o={image:!0,iframe:!1},s=e.config;function d(){if(s.syncEnabled&&e.browserSupportsCookies){try{!function(){if(!o.iframe)return;c(n.iframe,(function(e){var t=i()(e,2),r=t[0],a=t[1];Te("Invoking iframe user sync for bidder: ".concat(r)),Xe(a),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,r)}))}(),function(){if(!o.image)return;c(n.image,(function(e){var t=i()(e,2),n=t[0],r=t[1];Te("Invoking image pixel user sync for bidder: ".concat(n)),Ke(r)}))}()}catch(e){return Se("Error firing user syncs",e)}n={image:[],iframe:[]}}}function c(e,t){dt(e).forEach(t)}function u(e,t){var n=s.filterSettings;if(function(e,t){if(e.all&&e[t])return Ee('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var i=n.filter,a=n.bidders;if(i&&"include"!==i&&"exclude"!==i)return Ee('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1;if("*"!==a&&!(Array.isArray(a)&&a.length>0&&a.every((function(e){return Ue(e)&&"*"!==e}))))return Ee('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1;return!0}(n,e)){o[e]=!0;var r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders;return{include:function(e,t){return!m(e,t)},exclude:function(e,t){return m(e,t)}}[r.filter||"include"](i,t)}return!o[e]}return R.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;Ne(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}s=Object.assign(s,e.userSync)})),t.registerSync=function(e,i,o){return r.has(i)?Te('already fired syncs for "'.concat(i,'", ignoring registerSync call')):s.syncEnabled&&Pe(n[e])?i?0!==s.syncsPerBidder&&Number(a[i])>=s.syncsPerBidder?Ee('Number of user syncs exceeded for "'.concat(i,'"')):t.canBidderRegisterSync(e,i)?(n[e].push([i,o]),void(a=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(a,i))):Ee('Bidder "'.concat(i,'" not permitted to register their "').concat(e,'" userSync pixels.')):Ee("Bidder is required for registering sync"):Ee('User sync type "'.concat(e,'" not supported'))},t.bidderDone=r.add.bind(r),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(d,Number(e));d()},t.triggerUserSyncs=function(){s.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!s.filterSettings||!u(e,t)},t}(Object.defineProperties({config:R.getConfig("userSync")},{browserSupportsCookies:{get:function(){return!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&Cn.cookiesAreEnabled()}}})),kn="native",Rn="video",jn="banner",Bn=[];function Un(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,r=e.labelAll,i=void 0!==r&&r,a=e.activeLabels,o=void 0===a?[]:a,s=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Bn,u=Dn(c);Ne(s)||(s=d?{banner:{sizes:d}}:{});var l=E(s,"banner.sizes");u.shouldFilter&&l&&((s=ut(s)).banner.sizes=l.filter((function(e){return u.sizesSupported[e]})));var p={active:!s.hasOwnProperty(jn)||E(s,"banner.sizes.length")>0&&(0===n.length||!i&&(n.some((function(e){return u.labels[e]}))||n.some((function(e){return m(o,e)})))||i&&n.reduce((function(e,t){return e?u.labels[t]||m(o,t):e}),!0)),mediaTypes:s};return l&&l.length!==s.banner.sizes.length&&(p.filterResults={before:l,after:s.banner.sizes}),p}function Dn(e){return e.reduce((function(e,t){if("object"===g()(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var n=!1;try{n=we().matchMedia(t.mediaQuery).matches}catch(e){Ee("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),n=matchMedia(t.mediaQuery).matches}n&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(n){return(t[n]||[]).forEach((function(t){return e[n][t]=!0}))})))}else Ee('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1})}function Nn(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,r=void 0===n?"client":n,i=t.bidder,a=void 0===i?"":i,o=t.bidId,s=t.transactionId,d=t.auctionId,c=r,u=e||0;function l(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}this.bidderCode=a,this.width=0,this.height=0,this.statusMessage=l(),this.adId=pe(),this.requestId=o,this.transactionId=s,this.auctionId=d,this.mediaType="banner",this.source=c,this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function Mn(e,t){return new qn(e,t)}function zn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}R.getConfig("sizeConfig",(function(e){return function(e){Bn=e}(e.sizeConfig)}));var Gn=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},Ln=new WeakMap;function Vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?Gn:t,r=e.mkNode,i=void 0===r?Kn:r,a=e.mkTimer,o=void 0===a?Hn:a,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,c=e.nodes,u=void 0===c?Ln:c;return function(){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};function a(e){return function(n){return t.dfWalk({visit:function(t,r){var i=r[e];if(i.hasOwnProperty(n))return i[n]}})}}r=d(r);var s=a("timestamps");function c(e,n){var i=r(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach((function(r){null==e?t.metrics[r]=n:(t.groups.hasOwnProperty(r)||(t.groups[r]=[]),t.groups[r].push(n))}))}})}function l(e){t.timestamps[e]=n()}function p(e,t){var r=s(e),i=null!=r?n()-r:null;return null!=t&&c(t,i),i}function f(e,t,n){var r=s(e),i=s(t),a=null!=r&&null!=i?i-r:null;return null!=n&&c(n,a),a}function g(e){return o(n,(function(t){return c(e,t)}))}function m(e,t){return g(e).stopAfter(t)()}function v(e,t,n){var r=g(e);return n(function(e){var t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t}(t))}function b(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}function h(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.propagate,o=void 0===a||a,s=n.stopPropagation,d=void 0!==s&&s,c=n.includeGroups,u=void 0!==c&&c;return e(i([[t,{propagate:o,stopPropagation:d,includeGroups:u}]]),r)}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.propagate,i=void 0===r||r,a=n.stopPropagation,o=void 0!==a&&a,s=n.includeGroups,d=void 0!==s&&s,c=u.get(e);null!=c&&c.addParent(t,{propagate:i,stopPropagation:o,includeGroups:d})}function w(n){return e(t,n)}function x(){return e(t.newSibling(),r)}var _={startTiming:g,measureTime:m,measureHookTime:v,checkpoint:l,timeSince:p,timeBetween:f,setMetric:c,getMetrics:b,fork:h,join:y,newMetrics:x,renameWith:w,toJSON:function(){return b()}};return u.set(_,t),_}(i([]))}}function Wn(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function Hn(e,t){var n=e(),r=!1;function i(){r||(t(e()-n),r=!0)}return i.stopBefore=function(e){return Wn(e,i)},i.stopAfter=function(e){return Wn(e,null,i)},i}function Kn(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return Kn(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.visit,a=n.follow,o=void 0===a?function(){return!0}:a,s=n.visited,d=void 0===s?new Set:s,c=n.inEdge;if(!d.has(this)){if(d.add(this),null!=(t=r(c,this)))return t;var u,l=zn(e);try{for(l.s();!(u=l.n()).done;){var p=i()(u.value,2),f=p[0],g=p[1];if(o(c,g)&&null!=(t=f.dfWalk({visit:r,follow:o,visited:d,inEdge:g})))return t}}catch(e){l.e(e)}finally{l.f()}}}}}var Jn=function(){var e=function(){},t=function(){return{}},n={forEach:e},r=function(){return null};r.stopBefore=function(e){return e},r.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return Vn({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return n}},mkTimer:function(){return r},nodes:{get:e,set:e}})()}(),Yn=!0;function Xn(e){return Yn&&e||Jn}R.getConfig("performanceMetrics",(function(e){Yn=!!e.performanceMetrics}));var Qn,$n=(Qn=Vn(),function(){return Yn?Qn():Jn});function Zn(e,t){return function(n,r){return function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var d=this;return Xn(t.apply(d,o)).measureHookTime(e+n,i,(function(e){return r.call.apply(r,[d,e].concat(o))}))}}}var er=Zn("requestBids.",(function(e){return e.metrics})),tr=(Zn("addBidResponse.",(function(e,t){return t.metrics})),On("bidderFactory")),nr=["cpm","ttl","creativeId","netRevenue","currency"];function rr(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=ir(e);pi.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var r,i,a=t;Ne(t)&&(a=t.code,r=t.gvlid,i=t.skipPbsAliasing),pi.aliasRegistry[a]=e.code,n(Object.assign({},e,{code:a,gvlid:r,skipPbsAliasing:i}))}))}function ir(e){return Object.assign(new Nn(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,i,a,o,s,d){if(Array.isArray(r.bids)){var c={},u=[],l=cr(r).measureTime("validate",(function(){return r.bids.filter(n)}));if(0!==l.length){var p={};l.forEach((function(e){p[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),ar(e,l,r,o,d,{onRequest:function(e){return Xt(S.EVENTS.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){s(e.code),u.push(t)},onFledgeAuctionConfigs:function(e){e.forEach((function(e){var t=p[e.bidId];t?sr(t.adUnitCode,e.config):Ee("Received fledge auction configuration for an unknown bidId",e)}))},onError:function(t,n){s(e.code),pi.callBidderError(e.code,n,r),Xt(S.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:r}),Se("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var n=p[t.requestId];if(n){if(t.adapterCode=n.bidder,function(e,t){var n=_n.get(t,"allowAlternateBidderCodes")||!1,r=_n.get(t,"allowedAlternateBidderCodes");if(e&&t&&t!==e&&(r=Pe(r)?r.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Ze):r,!n||Pe(r)&&"*"!==r[0]&&!r.includes(e)))return!0;return!1}(t.bidderCode,n.bidder))return Ee("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(n.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void i.reject(n.adUnitCode,t,S.REJECTION_REASON.BIDDER_DISALLOWED);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[n.bidder]);var r=Object.assign(Mn(S.STATUS.GOOD,n),t);f(n.adUnitCode,r)}else Ee("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),i.reject(null,t,S.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:g})}else g()}function f(e,t){var n=Xn(t.metrics);n.checkpoint("addBidResponse"),c[e]=!0,n.measureTime("addBidResponse.validate",(function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,i=void 0===r?Vi.index:r;function a(){var e=Object.keys(t);return nr.every((function(n){return m(e,n)&&!m([void 0,null],t[n])}))}function o(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}if(!e)return Ee("No adUnitCode was supplied to addBidResponse."),!1;if(!t)return Ee("Some adapter tried to add an undefined bid for ".concat(e,".")),!1;if(!a())return Se(o("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1;if("native"===t.mediaType&&!ua(t,{index:i}))return Se(o("Native bid missing some required properties.")),!1;if("video"===t.mediaType&&!fi(t,{index:i}))return Se(o("Video bid does not have required vastUrl or renderer property")),!1;if("banner"===t.mediaType&&!dr(e,t,{index:i}))return Se(o("Banner bids require a width and height")),!1;return!0}(e,t)}))?i(e,t):i.reject(e,t,S.REJECTION_REASON.INVALID)}function g(){a(),R.runWithBidder(e.code,(function(){Xt(S.EVENTS.BIDDER_DONE,r),t(u,r.gdprConsent,r.uspConsent,r.gppConsent)}))}}});function t(t,n,r,i){or(e,t,n,r,i)}function n(t){return!!e.isBidRequestValid(t)||(Ee("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}}var ar=gn("sync",(function(e,t,n,r,i,a){var o=a.onRequest,s=a.onResponse,d=a.onFledgeAuctionConfigs,c=a.onError,u=a.onBid,l=a.onCompletion,p=cr(n);l=p.startTiming("total").stopBefore(l);var f=p.measureTime("buildRequests",(function(){return e.buildRequests(t,n)}));if(f&&0!==f.length){Array.isArray(f)||(f=[f]);var m=function(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}(l,f.length);f.forEach((function(t){var n=p.fork();function a(e){null!=e&&(e.metrics=n.fork().renameWith()),u(e)}var l=i((function(r,i){v();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},s(r);try{r=n.measureTime("interpretResponse",(function(){return e.interpretResponse(r,t)}))}catch(t){return Se("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void m()}var o;r&&Pe(r.fledgeAuctionConfigs)?(d(r.fledgeAuctionConfigs),o=r.bids):o=r,o&&(Pe(o)?o.forEach(a):a(o)),m()})),f=i((function(e,t){v(),c(e,t),m()}));o(t);var v=n.startTiming("net");switch(t.method){case"GET":r("".concat(t.url).concat(function(e){if(e)return"?".concat("object"===g()(e)?function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t=t.replace(/&$/,"")}(e):e);return""}(t.data)),{success:l,error:f},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":r(t.url,{success:l,error:f},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:Ee("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),m()}}))}else l()}),"processBidderRequests"),or=gn("async",(function(e,t,n,r,i){var a=R.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(a||!pi.aliasRegistry[e.code])){var o=R.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!(!o||!o.iframe&&!o.all),pixelEnabled:!(!o||!o.image&&!o.all)},t,n,r,i);s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){An.registerSync(t.type,e.code,t.url)})),An.bidderDone(e.code))}}),"registerSyncs"),sr=gn("sync",(function(e,t){}),"addComponentAuction");function dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,a=void 0===r?Vi.index:r;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var o=a.getBidRequest(t),s=a.getMediaTypes(t),d=o&&o.sizes||s&&s.banner&&s.banner.sizes,c=ve(d);if(1===c.length){var u=c[0].split("x"),l=i()(u,2),p=l[0],f=l[1];return t.width=parseInt(p,10),t.height=parseInt(f,10),!0}return!1}function cr(e){return Xn(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}vn("checkAdUnitSetup").before((function(e,t){if(!R.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter((function(e){return"adpod"===E(e,"mediaTypes.video.context")})).map((function(e){return e.bids.map((function(e){return e.bidder}))})).reduce(et,[]).filter(Ze).forEach((function(e){var t=pi.getBidAdapter(e);if(t.getSpec().getMappingFileInfo){var n=t.getSpec().getMappingFileInfo(),r=n.refreshInDays?n.refreshInDays:1,i=n.localStorageKey?n.localStorageKey:t.getSpec().code,a=tr.getDataFromLocalStorage(i);try{(!(a=a?JSON.parse(a):void 0)||gt()>a.lastUpdated+24*r*60*60*1e3)&&Qt(n.url,{success:function(t){try{t=JSON.parse(t);var n={lastUpdated:gt(),mapping:t.mapping};tr.setDataInLocalStorage(i,JSON.stringify(n))}catch(t){Se("Failed to parse ".concat(e," bidder translation mapping file"))}},error:function(){Se("Failed to load ".concat(e," bidder translation file"))}})}catch(t){Se("Failed to parse ".concat(e," bidder translation mapping file"))}}})),e.call(this,t)}));var ur={};function lr(e,t,n){var r=function(e,t){var n=ur[e]=ur[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return r[t]=(r[t]||0)+1,r[t]}var pr={incrementRequestsCounter:function(e){return lr(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return lr(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return lr(e,"winsCounter",t)},getRequestsCounter:function(e){return E(ur,"".concat(e,".requestsCounter"))||0},getBidderRequestsCounter:function(e,t){return E(ur,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},getBidderWinsCounter:function(e,t){return E(ur,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}};function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,r=void 0!==n&&n,i=t.noPort,a=void 0!==i&&i;try{e=new URL(fr(e))}catch(e){return}return e=a?e.hostname:e.host,r&&e.startsWith("www.")&&(e=e.substring(4)),e}function mr(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}var vr,br=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var a=mr(i.document),o=i.location.href;return t===a&&o===n||(t=a,n=o,r=e()),r}}((vr=window,function(){var e,t,n,r,i=[],a=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(vr),o=R.getConfig("maxNestedIframes"),s=!1,d=0,c=!1,u=!1,l=!1;do{var p=e,f=u,g=void 0,m=!1,v=null;u=!1,e=e?e.parent:vr;try{g=e.location.href||null}catch(e){m=!0}if(m)if(f){var b=p.context;try{t=v=b.sourceUrl,l=!0,c=!0,e===vr.top&&(s=!0),b.canonicalUrl&&(n=b.canonicalUrl)}catch(e){}}else{Ee("Trying to access cross domain iframe. Continuing without referrer and location");try{var h=p.document.referrer;h&&(v=h,e===vr.top&&(s=!0))}catch(e){}!v&&a&&a[d-1]&&(v=a[d-1],e===vr.top&&(l=!0)),v&&!c&&(t=v)}else{if(g&&(t=v=g,c=!1,e===vr.top)){s=!0;var y=mr(e.document);y&&(n=y)}e.context&&e.context.sourceUrl&&(u=!0)}i.push(v),d++}while(e!==vr.top&&d<o);i.reverse();try{r=vr.top.document.referrer}catch(e){}var w=s||l?t:null,x=R.getConfig("pageUrl")||n||null,_=R.getConfig("pageUrl")||w||fr(x,vr);return w&&w.indexOf("?")>-1&&-1===_.indexOf("?")&&(_="".concat(_).concat(w.substring(w.indexOf("?")))),{reachedTop:s,isAmp:c,numIframes:d-1,stack:i,topmostLocation:t||null,location:w,canonicalUrl:x,page:_,domain:gr(_)||null,ref:r||null,legacy:{reachedTop:s,isAmp:c,numIframes:d-1,stack:i,referer:t||null,canonicalUrl:x}}})),hr=n(10),yr=n.n(hr),wr=n(17),xr=n.n(wr),_r=n(11),Tr=n.n(_r);function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tr()(e);if(t){var i=Tr()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xr()(this,n)}}function Er(e,t,n){Sr(e,t),t.set(e,n)}function Sr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Or(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Cr=Object.freeze({}),Ar=new WeakMap,kr=new WeakMap,Rr=new WeakMap,jr=new WeakMap,Br=new WeakSet,Ur=function(){function e(){var t,n;P()(this,e),Sr(t=this,n=Br),n.add(t),Er(this,Ar,{writable:!0,value:void 0}),Er(this,kr,{writable:!0,value:void 0}),Er(this,Rr,{writable:!0,value:void 0}),Er(this,jr,{writable:!0,value:void 0}),o()(this,"generatedTime",void 0),this.reset()}return N()(e,[{key:"reset",value:function(){F()(this,Rr,X()),F()(this,Ar,!1),F()(this,kr,null),F()(this,jr,!1),this.generatedTime=null}},{key:"enable",value:function(){F()(this,Ar,!0)}},{key:"enabled",get:function(){return M()(this,Ar)}},{key:"ready",get:function(){return M()(this,jr)}},{key:"promise",get:function(){return M()(this,jr)?J.resolve(M()(this,kr)):(M()(this,Ar)||Or(this,Br,Pr).call(this,null),M()(this,Rr).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt();this.generatedTime=t,Or(this,Br,Pr).call(this,e)}},{key:"getConsentData",value:function(){return M()(this,kr)}}]),e}();function Pr(e){F()(this,jr,!0),F()(this,kr,e),M()(this,Rr).resolve(e)}var Dr=function(e){yr()(n,e);var t=Ir(n);function n(){return P()(this,n),t.apply(this,arguments)}return N()(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),n}(Ur),Nr=function(e){yr()(n,e);var t=Ir(n);function n(){return P()(this,n),t.apply(this,arguments)}return N()(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:Ue(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(Ur),qr=function(e){yr()(n,e);var t=Ir(n);function n(){return P()(this,n),t.apply(this,arguments)}return N()(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(Ur);var Mr,zr,Fr,Gr=(Mr={},zr={},Fr={},{register:function(e,t,n){n&&((Mr[t]=Mr[t]||{})[e]=n,zr.hasOwnProperty(t)?zr[t]!==n&&(zr[t]=Fr):zr[t]=n)},get:function(e){var t={modules:Mr[e]||{}};return zr.hasOwnProperty(e)&&zr[e]!==Fr&&(t.gvlid=zr[e]),t}});function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wr="client",Hr="server",Kr={},Jr=Kr.bidderRegistry={},Yr=Kr.aliasRegistry={},Xr=[];R.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(Xr=Pe(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var Qr={};var $r=gn("sync",(function(e){var t=e.bidderCode,n=e.auctionId,r=e.bidderRequestId,i=e.adUnits,a=e.src,o=e.metrics;return i.reduce((function(e,i){var s=i.bids.filter((function(e){return e.bidder===t}));return null==t&&0===s.length&&null!=i.s2sBid&&s.push({bidder:null}),e.push(s.reduce((function(e,t){var s=null==(t=Object.assign({},t,{ortb2Imp:Nt({},i.ortb2Imp,t.ortb2Imp)},ht(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:t.mediaTypes;return!function(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return m(t,e)}))&&(!e.video||!e.video.context||m(["instream","outstream","adpod"],e.video.context))}(s)?Se("mediaTypes is not correctly configured for adunit ".concat(i.code)):t=Object.assign({},t,{mediaTypes:s}),e.push(Object.assign({},t,{adUnitCode:i.code,transactionId:i.transactionId,sizes:E(s,"banner.sizes")||E(s,"video.playerSize")||[],bidId:t.bid_id||pe(),bidderRequestId:r,auctionId:n,src:a,metrics:o,bidRequestsCount:pr.getRequestsCounter(i.code),bidderRequestsCount:pr.getBidderRequestsCounter(i.code,t.bidder),bidderWinsCount:pr.getBidderWinsCounter(i.code,t.bidder)})),e}),[])),e}),[]).reduce(et,[]).filter((function(e){return""!==e}))}),"getBids");var Zr=gn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getS2SBidders,i=void 0===r?oi:r;if(null==t)return e;var a=i(t);return e.filter((function(e){return a.has(e.bidder)}))}),"filterBidsForAdUnit");function ei(e,t){var n=ut(e),r=!1;return n.forEach((function(e){var n=e.bids.filter((function(e){var n;return"pbsBidAdapter"===e.module&&(null===(n=e.params)||void 0===n?void 0:n.configName)===t.configName}));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=Nt({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&Ee('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=Zr(e.bids,t).map((function(e){return e.bid_id=pe(),e}))})),{adUnits:n=n.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:r}}function ti(e){var t=ut(e);return t.forEach((function(e){e.bids=Zr(e.bids,null)})),t=t.filter((function(e){return 0!==e.bids.length}))}var ni=new Nr,ri=new Dr,ii=new qr,ai=gn("sync",(function(e,t){return function(e,t){return e.reduce((function(e,n){var r=Pn(Un(n,t),n.mediaTypes,n.sizes),i=r.active,a=r.mediaTypes,o=r.filterResults;return i?(o&&Ie('Size mapping filtered adUnit "'.concat(n.code,'" banner sizes from '),o.before,"to ",o.after),n.mediaTypes=a,n.bids=n.bids.reduce((function(e,r){var i=Pn(Un(r,t),n.mediaTypes),a=i.active,o=i.mediaTypes,s=i.filterResults;return a?(s&&(Ie('Size mapping filtered adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'" banner sizes from '),s.before,"to ",s.after),r.mediaTypes=o),e.push(r)):Ie('Size mapping deactivated adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'"')),e}),[]),e.push(n)):Ie('Size mapping disabled adUnit "'.concat(n.code,'"')),e}),[])}(e,t)}),"setupAdUnitMediaTypes");function oi(e){Pe(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var si=gn("sync",(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.getS2SBidders,a=void 0===i?oi:i,s=a(t);return rt(e).reduce((function(e,t){return e[s.has(t)?Hr:Wr].push(t),e}),(n={},o()(n,Wr,[]),o()(n,Hr,[]),n))}),"partitionBidders");function di(e,t){var n=Jr[e],r=(null==n?void 0:n.getSpec)&&n.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function ci(e,t,n,r){try{Ie("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];R.runWithBidder(e,r.bind.apply(r,[n].concat(a)))}catch(n){Ee("Error calling ".concat(t," of ").concat(e))}}function ui(e,t,n){var r=di(e,t);null!=r&&ci.apply(void 0,[e,t].concat(p()(r),[n]))}function li(e){for(var t=new Set;Yr.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=Yr[e];return e}Kr.makeBidRequests=gn("sync",(function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6?arguments[6]:void 0;o=Xn(o),Xt(S.EVENTS.BEFORE_REQUEST_BIDS,e),da(e),e=ai(e,i);var s=si(e,Xr),d=s[Wr],c=s[Hr];"random"===R.getConfig("bidderSequence")&&(d=dt(d));var u=br(),l=[],p=a.global||{},f=a.bidder||{};function g(e){var t=Object.freeze(Nt({},p,f[e.bidderCode]));return e.ortb2=t,e.bids.forEach((function(e){return e.ortb2=t})),e}Xr.forEach((function(r){if(r&&r.enabled){var i=ei(e,r),a=i.adUnits,s=i.hasModuleBids,d=fe();(0===c.length&&s?[null]:c).forEach((function(e){var i=pe(),s=o.fork(),c=g({bidderCode:e,auctionId:n,bidderRequestId:i,uniquePbsTid:d,bids:$r({bidderCode:e,auctionId:n,bidderRequestId:i,adUnits:ut(a),src:S.S2S.SRC,metrics:s}),auctionStart:t,timeout:r.timeout,src:S.S2S.SRC,refererInfo:u,metrics:s});0!==c.bids.length&&l.push(c)})),a.forEach((function(e){var t=e.bids.filter((function(e){return v(l,(function(t){return v(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),l.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=a.filter((function(e){return e.bids.length>0||null!=e.s2sBid})))}))}}));var m=ti(e);return d.forEach((function(e){var a=pe(),s=o.fork(),d=g({bidderCode:e,auctionId:n,bidderRequestId:a,bids:$r({bidderCode:e,auctionId:n,bidderRequestId:a,adUnits:ut(m),labels:i,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:u,metrics:s}),c=Jr[e];c||Se("Trying to make a request for bidder that does not exist: ".concat(e)),c&&d.bids&&0!==d.bids.length&&l.push(d)})),l.forEach((function(e){ni.getConsentData()&&(e.gdprConsent=ni.getConsentData()),ri.getConsentData()&&(e.uspConsent=ri.getConsentData()),ii.getConsentData()&&(e.gppConsent=ii.getConsentData())})),l}),"makeBidRequests"),Kr.callBids=function(e,t,n,r,a,o,s){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var c=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===S.S2S.SRC)].push(t),e}),[[],[]]),u=i()(c,2),l=u[0],p=u[1],f=[];p.forEach((function(e){for(var t=-1,n=0;n<f.length;++n)if(e.uniquePbsTid===f[n].uniquePbsTid){t=n;break}t<=-1&&f.push(e)}));var g=0;Xr.forEach((function(e){if(e&&f[g]&&oi(e).has(f[g].bidderCode)){var t=$t(o,a?{request:a.request.bind(null,"s2s"),done:a.done}:void 0),i=e.bidders,s=Jr[e.adapter],c=f[g].uniquePbsTid,u=f[g].adUnitsS2SCopy,l=p.filter((function(e){return e.uniquePbsTid===c}));if(s){var m={ad_units:u,s2sConfig:e,ortb2Fragments:d};if(m.ad_units.length){var v=l.map((function(e){return e.start=gt(),r.bind(e)})),b=rt(m.ad_units).filter((function(e){return i.includes(e)}));Te("CALLING S2S HEADER BIDDERS ==== ".concat(b.length>0?b.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),l.forEach((function(e){Xt(S.EVENTS.BID_REQUESTED,Vr(Vr({},e),{},{tid:e.auctionId}))})),s.callBids(m,p,n,(function(){return v.forEach((function(e){return e()}))}),t)}}else Se("missing "+e.adapter);g++}})),l.forEach((function(e){e.start=gt();var t=Jr[e.bidderCode];R.runWithBidder(e.bidderCode,(function(){Te("CALLING BIDDER"),Xt(S.EVENTS.BID_REQUESTED,e)}));var i=$t(o,a?{request:a.request.bind(null,e.bidderCode),done:a.done}:void 0),d=r.bind(e);try{R.runWithBidder(e.bidderCode,ue.call(t.callBids,t,e,n,d,i,s,R.callbackWithBidder(e.bidderCode)))}catch(t){Se("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}}))}else Ee("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},Kr.videoAdapters=[],Kr.registerBidAdapter=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.supportedMediaTypes,a=void 0===i?[]:i;e&&t?"function"==typeof e.callBids?(Jr[t]=e,Gr.register("bidder",t,null===(n=e.getSpec)||void 0===n?void 0:n.call(e).gvlid),m(a,"video")&&Kr.videoAdapters.push(t),m(a,"native")&&Yi.push(t)):Se("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):Se("bidAdapter or bidderCode not specified")},Kr.aliasBidAdapter=function(e,t,n){if(void 0===Jr[t]){var r=Jr[e];if(void 0===r){var i=[];Xr.forEach((function(n){if(n.bidders&&n.bidders.length){var r=n&&n.bidders;n&&m(r,t)?Yr[t]=e:i.push(e)}})),i.forEach((function(e){Se('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var a,o=function(e){var t=[];return m(Kr.videoAdapters,e)&&t.push("video"),m(Yi,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)(a=new r.constructor).setBidderCode(t);else{var s=r.getSpec(),d=n&&n.gvlid,c=n&&n.skipPbsAliasing;a=ir(Object.assign({},s,{code:t,gvlid:d,skipPbsAliasing:c})),Yr[t]=e}Kr.registerBidAdapter(a,t,{supportedMediaTypes:o})}catch(t){Se(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else Te('alias name "'+t+'" has been already specified.')},Kr.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,r=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,Qr[n]={adapter:t,gvlid:r},Gr.register("analytics",n,r)):Se('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):Se("Prebid Error: analyticsAdapter or analyticsCode not specified")},Kr.enableAnalytics=function(e){Pe(e)||(e=[e]),Fe(e,(function(e){var t=Qr[e.provider];t&&t.adapter?t.adapter.enableAnalytics(e):Se("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},Kr.getBidAdapter=function(e){return Jr[e]},Kr.getAnalyticsAdapter=function(e){return Qr[e]},Kr.callTimedOutBidders=function(e,t,n){t=bt(t=t.map((function(t){return t.params=yt(e,t.adUnitCode,t.bidder),t.timeout=n,t})),"bidder"),Object.keys(t).forEach((function(e){ui(e,"onTimeout",t[e])}))},Kr.callBidWonBidder=function(e,t,n){t.params=yt(n,t.adUnitCode,t.bidder),pr.incrementBidderWinsCounter(t.adUnitCode,t.bidder),ui(e,"onBidWon",t)},Kr.callSetTargetingBidder=function(e,t){ui(e,"onSetTargeting",t)},Kr.callBidViewableBidder=function(e,t){ui(e,"onBidViewable",t)},Kr.callBidderError=function(e,t,n){ui(e,"onBidderError",{error:t,bidderRequest:n})},Kr.callDataDeletionRequest=gn("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="onDataDeletionRequest";Object.keys(Jr).filter((function(e){return!Yr.hasOwnProperty(e)})).forEach((function(e){var n=di(e,r);if(null!=n){var i=Vi.getBidsRequested().filter((function(t){return li(t.bidderCode)===e}));ci.apply(void 0,[e,r].concat(p()(n),[i],t))}})),Object.entries(Qr).forEach((function(e){var n,a=i()(e,2),o=a[0],s=a[1],d=null==s||null===(n=s.adapter)||void 0===n?void 0:n[r];if("function"==typeof d)try{d.apply(s.adapter,t)}catch(e){Se("error calling ".concat(r," of ").concat(o),e)}}))}));var pi=Kr;function fi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?Vi.index:n,i=E(r.getMediaTypes(e),"video"),a=i&&E(i,"context"),o=i&&E(i,"useCacheKey"),s=r.getAdUnit(e);return gi(e,s,i,a,o)}var gi=gn("sync",(function(e,t,n,r,i){return n&&(i||"outstream"!==r)?R.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(Se('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with cmgpbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!("outstream"===r&&!i)||!!(e.renderer||t&&t.renderer||n.renderer)}),"checkVideoBidSetup");var mi=An.syncUsers;Kt(S.EVENTS.BID_ADJUSTMENT,(function(e){!function(e){var t=function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.index,o=void 0===a?Vi.index:a,s=i.bs,d=void 0===s?_n:s;n=n||o.getBidRequest(t);var c=d.get((null==t?void 0:t.bidderCode)||(null===(r=n)||void 0===r?void 0:r.bidder),"bidCpmAdjustment");if(c&&"function"==typeof c)try{return c(e,Object.assign({},t),n)}catch(e){Se("Error during bid adjustment",e)}return e}(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));var vi={},bi={},hi=[],yi=c();function wi(e){var t=e.adUnits,n=e.adUnitCodes,r=e.callback,a=e.cbTimeout,o=e.labels,s=e.auctionId,d=e.ortb2Fragments,c=e.metrics;c=Xn(c);var u,l,p,f,v=t,b=o,h=n,y=s||fe(),w=a,x=new Set,_=[],T=r,I=[],E=[],O=[],C=[],A=[];function k(){return{auctionId:y,timestamp:u,auctionEnd:l,auctionStatus:f,adUnits:v,adUnitCodes:h,labels:b,bidderRequests:I,noBids:O,bidsReceived:E,bidsRejected:_,winningBids:C,timeout:w,metrics:c,seatNonBids:A}}function j(e,n){if(n&&clearTimeout(p),void 0===l){var r=[];e&&(Te("Auction ".concat(y," timedOut")),i=x,(r=I.map((function(e){return(e.bids||[]).filter((function(e){return!i.has(e.bidder)}))})).reduce(et,[])).length&&Xt(S.EVENTS.BID_TIMEOUT,r)),f="completed",l=Date.now(),c.checkpoint("auctionEnd"),c.timeBetween("requestBids","auctionEnd","requestBids.total"),c.timeBetween("callBids","auctionEnd","requestBids.callBids"),Xt(S.EVENTS.AUCTION_END,k()),Ti(v,(function(){try{if(null!=T){var n=h,i=E.filter(ue.call(ct,this,n)).reduce(zi,{});T.apply(yi,[i,e,y]),T=null}}catch(e){Se("Error executing bidsBackHandler",null,e)}finally{r.length&&pi.callTimedOutBidders(t,r,w);var a=R.getConfig("userSync")||{};a.enableOverride||mi(a.syncDelay)}}))}var i}function B(){R.resetBidder(),Ie("Bids Received for Auction with id: ".concat(y),E),f="completed",j(!1,!0)}function U(e){x.add(e)}function P(e){var t=this;e.forEach((function(e){var t;t=e,I=I.concat(t)}));var n={},r={bidRequests:e,run:function(){var r,s;r=j.bind(null,!0),s=setTimeout(r,w),p=s,f="inProgress",Xt(S.EVENTS.AUCTION_INIT,k());var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,a=void 0===r?Vi.index:r,o=0,s=!1,d=new Set,c={},u={};function l(e,t){null==u[e]&&(u[e]=J.resolve()),u[e]=u[e].then((function(){return J.resolve(t).catch((function(){}))}))}function p(e,n){var r=e.timeout;(null==r||r>t.getTimeout())&&(r=t.getTimeout());var i=t.getAuctionStart()+r-Date.now(),a=u[e.bidderRequestId],o=u[""];(null!=a||null!=o)&&i>0?J.race([J.timeout(i),J.resolve(o).then((function(){return a}))]).then(n):n()}function f(){o--,s&&0===o&&e()}function v(e,t,n){return c[t.requestId]=!0,Bi(t,e),o++,n(f)}function b(e,n){v(e,n,(function(e){var r=Ui(n);r.mediaType===Rn?Si(t,r,e):(null!=r.native&&"object"===g()(r.native)&&Ai(r),Ei(t,r),e())}))}function h(e,n,r){return v(e,n,(function(e){var a,o=Mn(S.STATUS.NO_BID,null===(a=n.getIdentifiers)||void 0===a?void 0:a.call(n));return Object.assign(o,Object.fromEntries(Object.entries(n).filter((function(e){var t=i()(e,1)[0];return!o.hasOwnProperty(t)&&!["ad","adUrl","vastXml","vastUrl","native"].includes(t)})))),o.status=S.BID_STATUS.BID_REJECTED,o.cpm=0,n.rejectionReason=r,Ee("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(r),n),Xt(S.EVENTS.BID_REJECTED,n),t.addBidRejected(n),e(),o}))}function y(){var n=t.getBidRequests(),r=R.getConfig("auctionOptions");if(d.add(this),r&&!Me(r)){var i=r.secondaryBidders;i&&!n.every((function(e){return m(i,e.bidderCode)}))&&(n=n.filter((function(e){return!m(i,e.bidderCode)})))}s=n.every((function(e){return d.has(e)})),this.bids.forEach((function(e){c[e.bidId]||(t.addNoBid(e),Xt(S.EVENTS.NO_BID,e))})),s&&0===o&&e()}return{addBidResponse:function(){function e(e,t){var n,r=a.getBidderRequest(t);l(r&&r.bidderRequestId||"",xi.call({dispatch:b},e,t,(function(r){return null==n&&(n=h(e,t,r)),n})))}return e.reject=h,e}(),adapterDone:function(){p(this,y.bind(this))}}}(B,t);pi.callBids(v,e,c.addBidResponse,c.adapterDone,{request:function(e,t){o(vi,t),o(n,e),bi[e]||(bi[e]={SRA:!0,origin:t}),n[e]>1&&(bi[e].SRA=!1)},done:function(e){vi[e]--,hi[0]&&a(hi[0])&&hi.shift()}},w,U,d)}};function a(e){var t=!0,n=R.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((function(e){var r=1,i=void 0!==e.src&&e.src===S.S2S.SRC?"s2s":e.bidderCode;return bi[i]&&(!1===bi[i].SRA&&(r=Math.min(e.bids.length,n)),vi[bi[i].origin]+r>n&&(t=!1)),!t})),t&&e.run(),t}function o(e,t){void 0===e[t]?e[t]=1:e[t]++}a(r)||(Ee("queueing auction due to limited endpoint capacity"),hi.push(r))}return Kt(S.EVENTS.SEAT_NON_BID,(function(e){var t;e.auctionId===y&&(t=e.seatnonbid,A=A.concat(t))})),{addBidReceived:function(e){E=E.concat(e)},addBidRejected:function(e){_=_.concat(e)},addNoBid:function(e){O=O.concat(e)},executeCallback:j,callBids:function(){f="started",u=Date.now();var e=c.measureTime("requestBids.makeRequests",(function(){return pi.makeBidRequests(v,u,y,w,b,d,c)}));Ie("Bids Requested for Auction with id: ".concat(y),e),c.checkpoint("callBids"),e.length<1?(Ee("No valid bid requests returned for auction"),B()):_i.call({dispatch:P,context:this},e)},addWinningBid:function(e){C=C.concat(e),pi.callBidWonBidder(e.adapterCode||e.bidder,e,t)},setBidTargeting:function(e){pi.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return C},getAuctionStart:function(){return u},getTimeout:function(){return w},getAuctionId:function(){return y},getAuctionStatus:function(){return f},getAdUnits:function(){return v},getAdUnitCodes:function(){return h},getBidRequests:function(){return I},getBidsReceived:function(){return E},getNoBids:function(){return O},getNonBids:function(){return A},getFPD:function(){return d},getMetrics:function(){return c}}}var xi=gn("sync",(function(e,t,n){this.dispatch.call(null,e,t)}),"addBidResponse"),_i=gn("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),Ti=gn("async",(function(e,t){t&&t()}),"bidsBackCallback");function Ii(e,t){t.timeToRespond>e.getTimeout()+R.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function Ei(e,t){!function(e){var t,n=!0===_n.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(n||e.dealId)&&(t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,i=void 0===r?Vi.index:r;if(!t)return{};var a=i.getBidRequest(t),o={},s=qi(t.mediaType,e);Mi(o,s,t,a),e&&_n.getOwn(e,S.JSON_MAPPING.ADSERVER_TARGETING)&&(Mi(o,_n.ownSettingsFor(e),t,a),t.sendStandardTargeting=_n.get(e,"sendStandardTargeting"));t.native&&(o=Object.assign({},o,fa(t)));return o}(e.bidderCode,e));e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}(t),Xn(t.metrics).timeSince("addBidResponse","addBidResponse.total"),Xt(S.EVENTS.BID_RESPONSE,t),e.addBidReceived(t),Ii(e,t)}function Si(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.index,a=void 0===i?Vi.index:i,o=!0,s=E(a.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),d=s&&E(s,"context"),c=s&&E(s,"useCacheKey");R.getConfig("cache.url")&&(c||"outstream"!==d)&&(!t.videoCacheKey||R.getConfig("cache.ignoreBidderCacheKey")?(o=!1,ji(e,t,n,s)):t.vastUrl||(Se("videoCacheKey specified but not required vastUrl for video bid"),o=!1)),o&&(Ei(e,t),n())}var Oi,Ci,Ai=function(e){var t,n,r=null===(t=Vi.index.getAdUnit(e))||void 0===t?void 0:t.nativeOrtbRequest,i=null===(n=e.native)||void 0===n?void 0:n.ortb;if(r&&i){var a=function(e,t){var n={},r=(null==t?void 0:t.assets)||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;var i,a=Wi((null==e?void 0:e.assets)||[]);try{var o=function(){var e=i.value,t=r.find((function(t){return e.id===t.id}));e.title?n.title=e.title.text:e.img?n[t.img.type===Zi.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}:e.data&&(n[ra[ia[t.data.type]]]=e.data.value)};for(a.s();!(i=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}n.impressionTrackers=[];var s,d=[];null!=t&&t.imptrackers&&(s=n.impressionTrackers).push.apply(s,p()(t.imptrackers));var c,u=Wi((null==e?void 0:e.eventtrackers)||[]);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.event===oa&&l.method===aa.img&&n.impressionTrackers.push(l.url),l.event===oa&&l.method===aa.js&&d.push(l.url)}}catch(e){u.e(e)}finally{u.f()}d=d.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&d.push(e.jstracker);d.length&&(n.javascriptTrackers=d.join("\n"));return n}(i,r);Object.assign(e.native,a)}},ki=function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t,r={puts:e.map(en)},i=n(R.getConfig("cache.timeout"));i(R.getConfig("cache.url"),tn(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}(e.map((function(e){return e.bidResponse})),(function(t,n){n.forEach((function(n,r){var i,a=e[r],o=a.auctionInstance,s=a.bidResponse,d=a.afterBidAdded;t?(Ee("Failed to save to the video cache: ".concat(t,". Video bid must be discarded.")),Ii(o,s)):""===n.uuid?(Ee("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),Ii(o,s)):(s.videoCacheKey=n.uuid,s.vastUrl||(s.vastUrl=(i=s.videoCacheKey,"".concat(R.getConfig("cache.url"),"?uuid=").concat(i))),Ei(o,s),d())}))}))};R.getConfig("cache",(function(e){Oi="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,Ci="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var Ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ki,n=[[]],r=!1,i=function(e){return e()};return function(a,o,s){var d=Ci>0?e:i;n[n.length-1].length>=Oi&&n.push([]),n[n.length-1].push({auctionInstance:a,bidResponse:o,afterBidAdded:s}),r||(r=!0,d((function(){n.forEach(t),n=[[]],r=!1}),Ci))}}(),ji=gn("async",(function(e,t,n,r){Ri(e,t,n)}),"callPrebidCache");function Bi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,i=void 0===r?Vi.index:r,a=i.getBidderRequest(e),o=i.getAdUnit(e),s=a&&a.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||gt(),requestTimestamp:e.requestTimestamp||s,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==o?void 0:o.ttlBuffer)&&(e.ttlBuffer=o.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}function Ui(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.index,i=void 0===r?Vi.index:r;Xt(S.EVENTS.BID_ADJUSTMENT,e);var a=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||i.getAdUnit(e).renderer,o=e.mediaType,s=i.getMediaTypes(e),d=s&&s[o],c=d&&d.renderer,u=null;c&&c.url&&c.render&&(!0!==c.backupOnly||!e.renderer)?u=c:a&&a.url&&a.render&&(!0!==a.backupOnly||!e.renderer)&&(u=a),u&&(e.renderer=sn.install({url:u.url,config:u.options}),e.renderer.setRender(u.render));var l=Pi(e.mediaType,s,R.getConfig("mediaTypePriceGranularity")),p=_(e.cpm,"object"===g()(l)?l:R.getConfig("customPriceBucket"),R.getConfig("currency.granularityMultiplier"));return e.pbLg=p.low,e.pbMg=p.med,e.pbHg=p.high,e.pbAg=p.auto,e.pbDg=p.dense,e.pbCg=p.custom,e}function Pi(e,t,n){if(e&&n){if(e===Rn){var r=E(t,"".concat(Rn,".context"),"instream");if(n["".concat(Rn,"-").concat(r)])return n["".concat(Rn,"-").concat(r)]}return n[e]}}var Di=function(e){return function(t){var n=e||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?Vi.index:n,i=Pi(e.mediaType,r.getMediaTypes(e),R.getConfig("mediaTypePriceGranularity")),a="string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":R.getConfig("priceGranularity");return a}(t);return n===S.GRANULARITY_OPTIONS.AUTO?t.pbAg:n===S.GRANULARITY_OPTIONS.DENSE?t.pbDg:n===S.GRANULARITY_OPTIONS.LOW?t.pbLg:n===S.GRANULARITY_OPTIONS.MEDIUM?t.pbMg:n===S.GRANULARITY_OPTIONS.HIGH?t.pbHg:n===S.GRANULARITY_OPTIONS.CUSTOM?t.pbCg:void 0}};function Ni(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return nt(e,t)}}}function qi(e,t){var n=S.TARGETING_KEYS,r=Object.assign({},_n.settingsFor(null));if(r[S.JSON_MAPPING.ADSERVER_TARGETING]||(r[S.JSON_MAPPING.ADSERVER_TARGETING]=function(){var e=S.TARGETING_KEYS;return[Ni(e.BIDDER,"bidderCode"),Ni(e.AD_ID,"adId"),Ni(e.PRICE_BUCKET,Di()),Ni(e.SIZE,"size"),Ni(e.DEAL,"dealId"),Ni(e.SOURCE,"source"),Ni(e.FORMAT,"mediaType"),Ni(e.ADOMAIN,(function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""})),Ni(e.ACAT,(function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}))]}()),"video"===e){var i=r[S.JSON_MAPPING.ADSERVER_TARGETING].slice();if(r[S.JSON_MAPPING.ADSERVER_TARGETING]=i,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===v(i,(function(t){return t.key===e}))&&i.push(Ni(e,"videoCacheKey"))})),R.getConfig("cache.url")&&(!t||!1!==_n.get(t,"sendStandardTargeting"))){var a=Ut(R.getConfig("cache.url"));void 0===v(i,(function(e){return e.key===n.CACHE_HOST}))&&i.push(Ni(n.CACHE_HOST,(function(e){return E(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:a.hostname})))}}return r}function Mi(e,t,n,r){var i=t[S.JSON_MAPPING.ADSERVER_TARGETING];return n.size=n.getSize(),Fe(i,(function(i){var a=i.key,o=i.val;if(e[a]&&Ee("The key: "+a+" is being overwritten"),Be(o))try{o=o(n,r)}catch(e){Se("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&a!==S.TARGETING_KEYS.DEAL&&a!==S.TARGETING_KEYS.ACAT||!ze(o)&&null!=o?e[a]=o:Ie("suppressing empty key '"+a+"' from adserver targeting")})),e}function zi(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function Fi(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var r=this.getBidRequest({requestId:n});if(null!=r&&(null==t||r.transactionId===t))return r.mediaTypes}else if(null!=t){var i=this.getAdUnit({transactionId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,r=t.bidderRequestId;if(null!=n||null!=r){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=r&&(i=i.filter((function(e){return e.bidderRequestId===r}))),null==n?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var Gi,Li,Vi=(Gi=[],(Li={}).addWinningBid=function(e){var t=Xn(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");var n=v(Gi,(function(t){return t.getAuctionId()===e.auctionId}));n?(e.status=S.BID_STATUS.RENDERED,n.addWinningBid(e)):Ee("Auction not found when adding winning bid")},Li.getAllWinningBids=function(){return Gi.map((function(e){return e.getWinningBids()})).reduce(et,[])},Li.getBidsRequested=function(){return Gi.map((function(e){return e.getBidRequests()})).reduce(et,[])},Li.getNoBids=function(){return Gi.map((function(e){return e.getNoBids()})).reduce(et,[])},Li.getBidsReceived=function(){return Gi.map((function(e){if("completed"===e.getAuctionStatus())return e.getBidsReceived()})).reduce(et,[]).filter((function(e){return e}))},Li.getAllBidsForAdUnitCode=function(e){return Gi.map((function(e){return e.getBidsReceived()})).reduce(et,[]).filter((function(t){return t&&t.adUnitCode===e}))},Li.getAdUnits=function(){return Gi.map((function(e){return e.getAdUnits()})).reduce(et,[])},Li.getAdUnitCodes=function(){return Gi.map((function(e){return e.getAdUnitCodes()})).reduce(et,[]).filter(Ze)},Li.createAuction=function(e){var t=wi(e);return function(e){Gi.push(e)}(t),t},Li.findBidByAdId=function(e){return v(Gi.map((function(e){return e.getBidsReceived()})).reduce(et,[]),(function(t){return t.adId===e}))},Li.getStandardBidderAdServerTargeting=function(){return qi()[S.JSON_MAPPING.ADSERVER_TARGETING]},Li.setStatusForBids=function(e,t){var n=Li.findBidByAdId(e);if(n&&(n.status=t),n&&t===S.BID_STATUS.BID_TARGETING_SET){var r=v(Gi,(function(e){return e.getAuctionId()===n.auctionId}));r&&r.setBidTargeting(n)}},Li.getLastAuctionId=function(){return Gi.length&&Gi[Gi.length-1].getAuctionId()},Li.clearAllAuctions=function(){Gi.length=0},Li.index=new Fi((function(){return Gi})),Li);function Wi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yi=[],Xi=Object.keys(S.NATIVE_KEYS).map((function(e){return S.NATIVE_KEYS[e]})),Qi={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},$i=S.NATIVE_ASSET_TYPES,Zi=S.NATIVE_IMAGE_TYPES,ea=S.PREBID_NATIVE_DATA_KEYS_TO_ORTB,ta=S.NATIVE_KEYS_THAT_ARE_NOT_ASSETS,na=S.NATIVE_KEYS,ra=wa(ea),ia=wa($i),aa={img:1,js:2,1:"img",2:"js"},oa=1;function sa(e){if(e&&e.type&&function(e){if(!e||!m(Object.keys(Qi),e))return Se("".concat(e," nativeParam is not supported")),!1;return!0}(e.type)&&(e=Qi[e.type]),!e||!e.ortb||ca(e.ortb))return e}function da(e){e.forEach((function(e){var t=e.nativeParams||E(e,"mediaTypes.native");t&&(e.nativeParams=sa(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(!e&&!Ne(e))return void Se("Native assets object is empty or not an object: ",e);var t={ver:"1.2",assets:[]};for(var n in e)if(!ta.includes(n))if(na.hasOwnProperty(n)){var r=e[n],i=0;r.required&&qe(r.required)&&(i=Number(r.required));var a={id:t.assets.length,required:i};if(n in ea)a.data={type:$i[ea[n]]},r.len&&(a.data.len=r.len);else if("icon"===n||"image"===n){if(a.img={type:"icon"===n?Zi.ICON:Zi.MAIN},r.aspect_ratios)if(Pe(r.aspect_ratios))if(r.aspect_ratios.length){var o=r.aspect_ratios[0],s=o.min_width,d=o.min_height;It(s)&&It(d)?(a.img.wmin=s,a.img.hmin=d):Se("image.aspect_ratios min_width or min_height are invalid: ",s,d);var c=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(a.img.ext={aspectratios:c})}else Se("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else Se("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&It(r.sizes[0])&&It(r.sizes[1])?(a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):Se("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===n?a.title={len:r.len||140}:"ext"===n&&(a.ext=r,delete a.required);t.assets.push(a)}else Se("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}(e.nativeParams))}))}function ca(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return Se("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?(Se("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(Se("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!Ne(e))return Se("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!De(e.img.w)&&!De(e.img.wmin))return Se("for img asset there must be 'w' or 'wmin' property"),!1;if(!De(e.img.h)&&!De(e.img.hmin))return Se("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!De(e.title.len))return Se("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!De(e.data.type))return Se("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&De(e.video.minduration)&&De(e.video.maxduration)))return Se("video asset is not properly configured"),!1;return!0}(e)}))}function ua(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.index,i=void 0===r?Vi.index:r,a=i.getAdUnit(e);if(!a)return!1;var o=a.nativeOrtbRequest,s=(null===(t=e.native)||void 0===t?void 0:t.ortb)||ya(e.native,o);return la(s,o)}function la(e,t){if(!E(e,"link.url"))return Se("native response doesn't have 'link' property. Ortb response: ",e),!1;var n=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),r=e.assets.map((function(e){return e.id})),i=n.every((function(e){return m(r,e)}));return i||Se("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(r)),i}function pa(e,t){var n=t.native.ortb||ha(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fetchURL,i=void 0===r?Ke:r;if(t){var a,o=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),s=(null===(a=e.link)||void 0===a?void 0:a.clicktrackers)||[],d=o[t],c=s;d&&(c=d.clicktrackers||[]),c.forEach((function(e){return i(e)}))}else{var u;((null===(u=e.link)||void 0===u?void 0:u.clicktrackers)||[]).forEach((function(e){return i(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,r=void 0===n?function(e){return Ye(e)}:n,i=t.fetchURL,a=void 0===i?Ke:i,o=(e.eventtrackers||[]).filter((function(e){return e.event===oa})),s=o.reduce((function(e,t){return aa.hasOwnProperty(t.method)&&e[aa[t.method]].push(t.url),e}),{img:[],js:[]}),d=s.img,c=s.js;e.imptrackers&&(d=d.concat(e.imptrackers));d.forEach((function(e){return a(e)})),c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(c=c.concat([e.jstracker]));c.length&&r(c.join("\n"))}(n),e.action}function fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?Vi.index:n,i={},a=r.getAdUnit(e);E(a,"nativeParams.rendererUrl")?e.native.rendererUrl=ma(a.nativeParams.rendererUrl):E(a,"nativeParams.adTemplate")&&(e.native.adTemplate=ma(a.nativeParams.adTemplate));var o=!1!==E(a,"nativeParams.sendTargetingKeys"),s=va(a),d=Ji(Ji({},e.native),e.native.ext);return delete d.ext,Object.keys(d).forEach((function(t){var n=s[t],r=ma(e.native[t])||ma(E(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&r){var d=E(a,"nativeParams.".concat(t,".sendId"));if("boolean"!=typeof d&&(d=E(a,"nativeParams.ext.".concat(t,".sendId"))),d)r="".concat(n,":").concat(e.adId);var c=E(a,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof c&&(c=E(a,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof c?c:o)&&(i[n]=r)}})),i}function ga(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.index,o=void 0===a?Vi.index:a,s={message:"assetResponse",adId:e.adId},d=o.getAdUnit(t),c=t.native;return t.native.ortb?s.ortb=t.native.ortb:null!==(r=d.mediaTypes)&&void 0!==r&&null!==(r=r.native)&&void 0!==r&&r.ortb&&(s.ortb=ya(t.native,d.nativeOrtbRequest)),s.assets=[],(null==n?Object.keys(c):n).forEach((function(e){if("adTemplate"===e&&c[e])s.adTemplate=ma(c[e]);else if("rendererUrl"===e&&c[e])s.rendererUrl=ma(c[e]);else if("ext"===e)Object.keys(c[e]).forEach((function(t){if(c[e][t]){var n=ma(c[e][t]);s.assets.push({key:t,value:n})}}));else if(c[e]&&S.NATIVE_KEYS.hasOwnProperty(e)){var t=ma(c[e]);s.assets.push({key:e,value:t})}})),s}function ma(e){return(null==e?void 0:e.url)||e}function va(e){var t={};return E(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),Ji(Ji({},S.NATIVE_KEYS),t)}function ba(e){if(ca(e)){var t,n={},r=Wi(e.assets);try{var i=function(){var e=t.value;if(e.title){var r={required:!!e.required&&Boolean(e.required),len:e.title.len};n.title=r}else if(e.img){var i={required:!!e.required&&Boolean(e.required)};e.img.w&&e.img.h?i.sizes=[e.img.w,e.img.h]:e.img.wmin&&e.img.hmin&&(i.aspect_ratios={min_width:e.img.wmin,min_height:e.img.hmin,ratio_width:e.img.wmin,ratio_height:e.img.hmin}),e.img.type===Zi.MAIN?n.image=i:n.icon=i}else if(e.data){var a=Object.keys($i).find((function(t){return $i[t]===e.data.type})),o=Object.keys(ea).find((function(e){return ea[e]===a}));n[o]={required:!!e.required&&Boolean(e.required)},e.data.len&&(n[o].len=e.data.len)}};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n}}function ha(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=i()(e,2),r=n[0],a=n[1];switch(r){case"clickUrl":t.link.url=a;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(a)?a:[a];break;case"impressionTrackers":(Array.isArray(a)?a:[a]).forEach((function(e){t.eventtrackers.push({event:oa,method:aa.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(a)?a.join(""):a}})),t}function ya(e,t){var n=Ji(Ji({},ha(e)),{},{assets:[]});function r(e,r){var i=t.assets.find(e);null!=i&&(r(i=ut(i)),n.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=ma(e[t]);switch(t){case"title":r((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var i="image"===t?Zi.MAIN:Zi.ICON;r((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:n}}));break;default:t in ea&&r((function(e){return null!=e.data&&e.data.type===$i[ea[t]]}),(function(e){e.data={value:n}}))}})),n}function wa(e){var t={};for(var n in e)t[e[n]]=n;return t}var xa=S.EVENTS,_a=xa.AD_RENDER_FAILED,Ta=xa.AD_RENDER_SUCCEEDED;function Ia(e){var t=e.reason,n=e.message,r=e.bid,i=e.id,a={reason:t,message:n};r&&(a.bid=r),i&&(a.adId=i),Se(n),Xt(_a,a)}function Ea(e){var t=e.doc,n=e.bid,r=e.id,i={doc:t};n&&(i.bid=n),r&&(i.adId=r),Xt(Ta,i)}var Sa=S.EVENTS.BID_WON,Oa=S.EVENTS.STALE_RENDER,Ca=new WeakSet,Aa={"Prebid Request":function(e,t,n){if(null==n)return void Ia({reason:S.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:"Cannot find ad for cross-origin render request: '".concat(t.adId,"'"),id:t.adId});if(n.status===S.BID_STATUS.RENDERED&&(Ee("Ad id ".concat(n.adId," has been rendered before")),Xt(Oa,n),E(R.getConfig("auctionOptions"),"suppressStaleRender")))return;try{!function(e,t){var n=e.adId,r=e.ad,i=e.adUrl,a=e.width,o=e.height,s=e.renderer,d=e.cpm,c=e.originalCpm;dn(s)?cn(s,e):n&&(Ra(e),t({message:"Prebid Response",ad:pt(r,c||d),adUrl:pt(i,c||d),adId:n,width:a,height:o}))}(n,e)}catch(e){return void Ia({reason:S.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:t.adId,bid:n})}Vi.addWinningBid(n),Xt(Sa,n)},"Prebid Event":function(e,t,n){if(null==n)return void Se("Cannot find ad '".concat(t.adId,"' for x-origin event request"));if(n.status!==S.BID_STATUS.RENDERED)return void Ee("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));switch(t.event){case S.EVENTS.AD_RENDER_FAILED:Ia({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case S.EVENTS.AD_RENDER_SUCCEEDED:Ea({doc:null,bid:n,id:t.adId});break;default:Se("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}}};function ka(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var r=v(Vi.getBidsReceived(),(function(e){return e.adId===n.adId}));Aa.hasOwnProperty(n.message)&&Aa[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw Se(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,r)}}function Ra(e){var t=e.adId,n=e.adUnitCode,r=e.width,i=e.height;["div","iframe"].forEach((function(e){var a=function(e){var r=function(e,t){return it()?function(e){var t=v(window.googletag.pubads().getSlots(),(function(t){return v(t.getTargetingKeys(),(function(n){return m(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):function(){if(window.apntag&&Be(window.apntag.getTag))return!0}()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(a){var o=a.style;o.width=r?r+"px":"100%",o.height=i+"px"}else Ee("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}Object.assign(Aa,{"Prebid Native":function(e,t,n){if(null==n)return void Se("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));Ca.has(n)||(Ca.add(n),Vi.addWinningBid(n),Xt(Sa,n));switch(t.action){case"assetRequest":e(function(e,t){var n=e.assets.map((function(e){return function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}(S.NATIVE_KEYS,e)}));return ga(e,t,n)}(t,n));break;case"allAssetRequest":e(function(e,t){return ga(e,t,null)}(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,Ra(n);break;default:pa(t,n)}}});var ja=[],Ba=1;R.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?Ba=e.ttlBuffer:Se("Invalid value for ttlBuffer",e.ttlBuffer)}));var Ua='Only one of "'.concat("targetingControls.allowTargetingKeys",'" or "').concat("targetingControls.addTargetingKeys",'" can be set'),Pa=Object.keys(S.TARGETING_KEYS).map((function(e){return S.TARGETING_KEYS[e]})),Da={isActualBid:function(e){return e.getStatusCode()===S.STATUS.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:Ba))>gt()},isUnusedBid:function(e){return e&&(e.status&&!m([S.BID_STATUS.RENDERED],e.status)||!e.status)}};function Na(e){return!Object.values(Da).some((function(t){return!t(e)}))}var qa=gn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!r){var i=[],a=R.getConfig("sendBidsControl.dealPrioritization"),o=bt(e,"adUnitCode");return Object.keys(o).forEach((function(e){var r=[],s=bt(o[e],"bidderCode");Object.keys(s).forEach((function(e){return r.push(s[e].reduce(t))})),n>0?(r=a?r.sort(Ma(!0)):r.sort((function(e,t){return t.cpm-e.cpm})),i.push.apply(i,p()(r.slice(0,n)))):i.push.apply(i,p()(r))})),i}return e}));function Ma(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var za=function(e){var t={},n={};function r(e,t){return e.adserverTargeting&&t&&(Pe(t)&&m(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function i(e,t){if(!0===R.getConfig("targetingControls.alwaysIncludeDeals")){var n=Pa.concat(Xi);return qa(t,at).map((function(t){if(t.dealId&&r(t,e))return o()({},t.adUnitCode,x(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}function a(e,t){var n=Object.assign({},S.TARGETING_KEYS,S.NATIVE_KEYS),r=Object.keys(n),i={};Ie("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var a=Object.keys(e)[0],o=e[a].filter((function(e){var a=Object.keys(e)[0],o=0===r.filter((function(e){return 0===a.indexOf(n[e])})).length||v(t,(function(e){var t=n[e];return 0===a.indexOf(t)}));return i[a]=!o,o}));e[a]=o}));var a=Object.keys(i).filter((function(e){return i[e]}));return Ie("allowTargetingKeys - removed keys [ ".concat(a.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}function s(e,t){var n=ut(e);return Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(Ma()).reduce((function(e,r,i,a){var o,s=(o=r.adserverTargeting,Object.keys(o).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(o[t]),"%26")}),""));i+1===a.length&&(s=s.slice(0,-3));var d=r.adUnitCode,c=s.length;return c<=t?(t-=c,Ie("AdUnit '".concat(d,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):Ee("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[d]),i+1===a.length&&0===Object.keys(e).length&&Se("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}function d(e){return e.map((function(e){return o()({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return o()({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{})}function c(t){return"string"==typeof t?[t]:Pe(t)?t:e.getAdUnitCodes()||[]}function u(){var t=e.getBidsReceived();if(R.getConfig("useBidCache")){var r=R.getConfig("bidCacheFilterFunction");"function"==typeof r&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!r(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return t=t.filter((function(e){return"adpod"!==E(e,"video.context")})).filter(Na),qa(t,ot)}function l(e,n){var r=t.getWinningBids(e,n),i=f();return r=r.map((function(e){return o()({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===i.indexOf(t)})).reduce((function(t,n){var r=[e.adserverTargeting[n]],i=o()({},n.substring(0,20),r);if(n===S.TARGETING_KEYS.DEAL){var a="".concat(n,"_").concat(e.bidderCode).substring(0,20),s=o()({},a,r);return[].concat(p()(t),[i,s])}return[].concat(p()(t),[i])}),[]))}))}function f(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(Pa).filter(Ze)}function g(e,t,n,r){return Object.keys(t.adserverTargeting).filter(b()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){Pe(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(Ze),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function b(){var e=f();return e=e.concat(Xi),function(t){return-1===e.indexOf(t)}}function h(e){return o()({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(b()).map((function(t){return o()({},t.substring(0,20),[e.adserverTargeting[t]])})))}function y(e,t){return t.filter((function(t){return m(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(g,[]).map(h).filter((function(e){return e}))}function w(e,t){var n=Pa.concat(Xi),i=R.getConfig("sendBidsControl.bidLimit"),a=qa(t,at,i),s=R.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),d=s?s.map((function(e){return S.TARGETING_KEYS[e]})):n;return a.map((function(t){if(r(t,e))return o()({},t.adUnitCode,x(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==d.indexOf(e)}))))})).filter((function(e){return e}))}function x(e,t){return t.map((function(t){return o()({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}function _(t){function n(e){return E(e,S.JSON_MAPPING.ADSERVER_TARGETING)}return e.getAdUnits().filter((function(e){return m(t,e.code)&&n(e)})).map((function(e){return o()({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return Ue(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),Pe(t[e])||(t[e]=[t[e]]),o()({},e,t[e])}))}(e))}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if(it()){var r=c(t),i=e.getAdUnits().filter((function(e){return m(r,e.code)})),a=ja.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=Be(n)&&n(e);i.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||Be(t)&&t(n.code))&&e.updateTargetingFromMap(a)}))}))}},t.resetPresetTargetingAST=function(e){c(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),r={};n.forEach((function(e){m(ja,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u(),n=c(e),r=l(n,t).concat(y(n,t)).concat(R.getConfig("enableSendAllBids")?w(n,t):i(n,t)).concat(_(n));r.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===ja.indexOf(Object.keys(e)[0])&&(ja=Object.keys(e).concat(ja))}))}))}));var o=Object.keys(Object.assign({},S.DEFAULT_TARGETING_KEYS,S.NATIVE_KEYS)),p=R.getConfig("targetingControls.allowTargetingKeys"),f=R.getConfig("targetingControls.addTargetingKeys");if(null!=f&&null!=p)throw new Error(Ua);p=null!=f?o.concat(f):p||o,Array.isArray(p)&&p.length>0&&(r=a(r,p)),r=d(r);var g=R.getConfig("targetingControls.auctionKeyMaxChars");return g&&(Ie("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(g," characters.  Running checks on auction keys...")),r=s(r,g)),n.forEach((function(e){r[e]||(r[e]={})})),r},R.getConfig("targetingControls",(function(e){null!=E(e,"targetingControls.allowTargetingKeys")&&null!=E(e,"targetingControls.addTargetingKeys")&&Se(Ua)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):function(e){return function(t){return wt(e,t)}}(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][n]=r})),Te("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u(),n=c(e);return t.filter((function(e){return m(n,e.adUnitCode)})).filter((function(e){return!0===_n.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(Ze).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(at)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){Se("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if(Te("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),Ue(n[e][t])||Pe(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&Be(window.apntag.setKeywords))return!0},t}(Vi),Fa="__cmgpbjs_debugging__";function Ga(){return c().installedModules.includes("debugging")}function La(e){return new J((function(t){an(e,"debugging",t)}))}function Va(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?Ga:t,r=e.script,i=void 0===r?La:r,a=null;return function(){return null==a&&(a=new J((function(e,t){setTimeout((function(){if(n())e();else{var r="https://cdn.jsdelivr.net/npm/prebid.js@7.48.0/dist/debugging-standalone.js";Te('Debugging module not installed, loading it from "'.concat(r,'"...')),c()._installDebugging=!0,i(r).then((function(){c()._installDebugging({DEBUG_KEY:Fa,hook:gn,config:R,createBid:Mn,logger:Oe("DEBUG:")})})).then(e,t)}}))}))),a}}var Wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?Va():t,r=e.hook,i=void 0===r?vn("requestBids"):r,a=null,o=!1;function s(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(a||J.resolve()).then((function(){return e.apply(t,r)}))}function d(){o||(a=n(),i.before(s,99),o=!0)}function c(){i.getHooks({hook:s}).remove(),o=!1}function u(){a=null,c()}return{enable:d,disable:c,reset:u}}();Wa.reset;R.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?Wa.enable():Wa.disable()}));var Ha=On(),Ka=qt((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!Ha.cookiesAreEnabled())return e;var t,n,r=e.split(".");if(2===r.length)return e;var i=-2,a="_rdc".concat(Date.now()),o="writeable";do{t=r.slice(i).join(".");var s=new Date(gt()+1e4).toUTCString();Ha.setCookie(a,o,s,"Lax",t,void 0);var d=Ha.getCookie(a,void 0);d===o?(n=!1,Ha.setCookie(a,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(i+=-1,n=Math.abs(i)<=r.length)}while(n);return t})),Ja=["architecture","bitness","model","platformVersion","fullVersionList"],Ya=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=Me(t)?null:Object.freeze(Qa(1,t));return function(){return n}}(),Xa=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var a=r.get(e);if(!n.hasOwnProperty(a))try{n[a]=t.getHighEntropyValues(e).then((function(e){return Me(e)?null:Object.freeze(Qa(2,e))})).catch((function(){return null}))}catch(e){n[a]=J.resolve(null)}return n[a]}}();function Qa(e,t){function n(e,t){var n={brand:e};return Ue(t)&&!ze(t)&&(n.version=t.split(".")),n}var r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),t.hasOwnProperty("mobile")&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];Ue(n)&&(r[e]=n)})),r}var $a=["dooh","app","site"];function Za(e){return function(t){return $a.reduce((function(n,r){return eo(t,r)&&(null!=n?(Ee("".concat(e," specifies both '").concat(n,"' and '").concat(r,"'; dropping the latter.")),delete t[r]):n=r),n}),null),t}}function eo(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}function to(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ro={getRefererInfo:br,findRootDomain:Ka,getWindowTop:we,getWindowSelf:xe,getHighEntropySUA:Xa,getLowEntropySUA:Ya},io=Za("FPD"),ao=gn("sync",(function(e){return J.all([e,(t=R.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?ro.getHighEntropySUA(t):J.resolve(ro.getLowEntropySUA())).catch((function(){return null}))]).then((function(e){var t=i()(e,2),n=t[0],r=t[1],a=ro.getRefererInfo();!function(e){["app","site","device"].forEach((function(t){var n=R.getConfig(t);null!=n&&(e[t]=Nt({},n,e[t]))}))}(n),Object.entries(co).forEach((function(e){var t=i()(e,2),r=t[0],o=(0,t[1])(n,a);o&&Object.keys(o).length>0&&(n[r]=Nt({},o,n[r]))})),r&&Q(n,"device.sua",Object.assign({},r,n.device.sua)),n=io(n);var o,s=to($a);try{for(s.s();!(o=s.n()).done;){var d=o.value;if(eo(n,d)){n[d]=Nt({},uo(n,a),n[d]);break}}}catch(e){s.e(e)}finally{s.f()}return n}));var t}));function oo(e){try{return e(ro.getWindowTop())}catch(t){return e(ro.getWindowSelf())}}function so(e){return ht(e,Object.keys(e))}var co={site:function(e,t){if(!$a.filter((function(e){return"site"!==e})).some(eo.bind(null,e)))return so({page:t.page,ref:t.ref})},device:function(){return oo((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};oo((function(e){return e.navigator.globalPrivacyControl}))&&Q(e,"ext.gpc",1);var t=R.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function uo(e,t){var n,r,i=gr(t.page,{noLeadingWww:!0});return so({domain:i,keywords:null===(n=oo((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(n=n.content)||void 0===n||null===(r=n.replace)||void 0===r?void 0:r.call(n,/\s/g,""),publisher:so({domain:ro.findRootDomain(i)})})}var lo=c(),po=An.triggerUserSyncs,fo=S.EVENTS,go=fo.ADD_AD_UNITS,mo=fo.BID_WON,vo=fo.REQUEST_BIDS,bo=fo.SET_TARGETING,ho=fo.STALE_RENDER,yo=S.AD_RENDER_FAILED_REASON,wo=yo.PREVENT_WRITING_ON_MAIN_DOCUMENT,xo=yo.NO_AD,_o=yo.EXCEPTION,To=yo.CANNOT_FIND_AD,Io=yo.MISSING_DOC_OR_ADID,Eo={bidWon:function(e){if(!Ge(Vi.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(et).filter(Ze),e))return void Se('The "'+e+'" placement is not defined.');return!0}};function So(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function Oo(e,t){var n=[];return Pe(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return At(e,2)}))?n=e:At(e,2)&&n.push(e)),n}function Co(e){var t=ut(e),n=t.mediaTypes.banner,r=Oo(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):(Se("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function Ao(e){var t=ut(e),n=t.mediaTypes.video;if(n.playerSize){var r="number"==typeof n.playerSize[0]?2:1,i=Oo(n.playerSize,r);i.length>0?(2===r&&Ie("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):(Se("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function ko(e){var t=ut(e),n=t.mediaTypes.native;if(n.ortb){var r=Object.keys(S.NATIVE_KEYS).filter((function(e){return S.NATIVE_KEYS[e].includes("hb_native_")})),i=Object.keys(n).filter((function(e){return r.includes(e)}));i.length>0&&(Se("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(i," keys from request.")),i.forEach((function(e){return delete t.mediaTypes.native[e]})))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&(Se("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&(Se("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&(Se("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function Ro(e,t){var n=E(e,"mediaTypes.".concat(t,".pos"));if(!De(n)||isNaN(n)||!isFinite(n)){var r="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");Ee(r),Xt(S.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos}return e}function jo(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,r=e.bids;return null==r||Pe(r)?null==r&&null==e.ortb2Imp?(Se(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],Te(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(Se(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(Se(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=Wa,n=null;try{n=e.getItem(Fa)}catch(e){}null!==n&&t.enable()}}(),lo.bidderSettings=lo.bidderSettings||{},lo.libLoaded=!0,lo.version="v7.48.0",Ie("Prebid.js v7.48.0 loaded"),lo.installedModules=lo.installedModules||[],lo.adUnits=lo.adUnits||[],lo.triggerUserSyncs=po;var Bo={validateAdUnit:jo,validateBannerMediaType:Co,validateSizes:Oo};Object.assign(Bo,{validateNativeMediaType:ko}),Object.assign(Bo,{validateVideoMediaType:Ao});var Uo,Po,Do,No=gn("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=jo(e))){var n,r,i,a=e.mediaTypes;a.banner&&(n=Co(e),a.banner.hasOwnProperty("pos")&&(n=Ro(n,"banner"))),a.video&&(r=Ao(n||e),a.video.hasOwnProperty("pos")&&(r=Ro(r,"video"))),a.native&&(i=ko(r||(n||e)));var o=Object.assign({},n,r,i);t.push(o)}})),t}),"checkAdUnitSetup");function qo(e){var t=Vi[e]().filter(ue.call(ct,this,Vi.getAdUnitCodes())),n=Vi.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(Ze).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return o()({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}function Mo(e,t,n){var r=t.querySelector(n);e.parentNode&&e.parentNode===r||We(e,t,n)}lo.getAdserverTargetingForAdUnitCodeStr=function(e){if(Ie("Invoking cmgpbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=lo.getAdserverTargetingForAdUnitCode(e);return me(t)}Te("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},lo.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=Vi.getAllBidsForAdUnitCode(e).filter(Na);return t.length?t.reduce(at):{}}Te("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},lo.getAdserverTargetingForAdUnitCode=function(e){return lo.getAdserverTargeting(e)[e]},lo.getAdserverTargeting=function(e){return Ie("Invoking cmgpbjs.getAdserverTargeting",arguments),za.getAllTargeting(e)},lo.getConsentMetadata=function(){return Ie("Invoking cmgpbjs.getConsentMetadata"),{gdpr:ni.getConsentMeta(),usp:ri.getConsentMeta(),gpp:ii.getConsentMeta(),coppa:!!R.getConfig("coppa")}},lo.getNoBids=function(){return Ie("Invoking cmgpbjs.getNoBids",arguments),qo("getNoBids")},lo.getNoBidsForAdUnitCode=function(e){return{bids:Vi.getNoBids().filter((function(t){return t.adUnitCode===e}))}},lo.getBidResponses=function(){return Ie("Invoking cmgpbjs.getBidResponses",arguments),qo("getBidsReceived")},lo.getBidResponsesForAdUnitCode=function(e){return{bids:Vi.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},lo.setTargetingForGPTAsync=function(e,t){if(Ie("Invoking cmgpbjs.setTargetingForGPTAsync",arguments),it()){var n=za.getAllTargeting(e);za.resetPresetTargeting(e,t),za.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&Vi.setStatusForBids(n[e][t],S.BID_STATUS.BID_TARGETING_SET)}))})),Xt(bo,n)}else Se("window.googletag is not defined on the page")},lo.setTargetingForAst=function(e){Ie("Invoking cmgpbjs.setTargetingForAn",arguments),za.isApntagDefined()?(za.setTargetingForAst(e),Xt(bo,za.getAllTargeting())):Se("window.apntag is not defined on the page")},lo.renderAd=gn("async",(function(e,t,n){if(Ie("Invoking cmgpbjs.renderAd",arguments),Te("Calling renderAd with adId :"+t),t)try{var r=Vi.findBidByAdId(t);if(!r){var i="Error trying to write ad. Cannot find ad by given id : ".concat(t);return void Ia({reason:To,message:i,id:t})}if(r.status===S.BID_STATUS.RENDERED&&(Ee("Ad id ".concat(r.adId," has been rendered before")),Xt(ho,r),E(R.getConfig("auctionOptions"),"suppressStaleRender")))return;if(r.ad=pt(r.ad,r.originalCpm||r.cpm),r.adUrl=pt(r.adUrl,r.originalCpm||r.cpm),n&&n.clickThrough){var a=n.clickThrough;r.ad=ft(r.ad,a),r.adUrl=ft(r.adUrl,a)}Vi.addWinningBid(r),Xt(mo,r);var o=r.height,s=r.width,d=r.ad,c=r.mediaType,u=r.adUrl,l=r.renderer,p=r.adUnitCode,f=lo.adUnits.filter((function(e){return e.code===p})),g=lo.videoModule;if(f.video&&g)return void g.renderBid(f.video.divId,r);if(!e){var m="Error trying to write ad Id :".concat(t," to the page. Missing document");return void Ia({reason:Io,message:m,id:t})}var v=document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding"));if(We(v,e,"html"),dn(l))cn(l,r,e),Mo(v,e,"html"),Ea({doc:e,bid:r,id:t});else if(e===document&&!lt()||"video"===c){var b="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");Ia({reason:wo,message:b,bid:r,id:t})}else if(d)e.write(d),e.close(),So(e,s,o),Mo(v,e,"html"),Je(r),Ea({doc:e,bid:r,id:t});else if(u){var h=ke();h.height=o,h.width=s,h.style.display="inline",h.style.overflow="hidden",h.src=u,We(h,e,"body"),So(e,s,o),Mo(v,e,"html"),Je(r),Ea({doc:e,bid:r,id:t})}else{var y="Error trying to write ad. No ad for bid response id: ".concat(t);Ia({reason:xo,message:y,bid:r,id:t})}}catch(e){var w="Error trying to write ad Id :".concat(t," to the page:").concat(e.message);Ia({reason:_o,message:w,id:t})}else{var x="Error trying to write ad Id :".concat(t," to the page. Missing adId");Ia({reason:Io,message:x,id:t})}})),lo.removeAdUnit=function(e){(Ie("Invoking cmgpbjs.removeAdUnit",arguments),e)?(Pe(e)?e:[e]).forEach((function(e){for(var t=lo.adUnits.length-1;t>=0;t--)lo.adUnits[t].code===e&&lo.adUnits.splice(t,1)})):lo.adUnits=[]},lo.requestBids=(Do=gn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,a=e.adUnitCodes,o=e.labels,s=e.auctionId,d=e.ttlBuffer,c=e.ortb2,u=e.metrics,l=e.defer;Xt(vo);var p=n||R.getConfig("bidderTimeout");Ie("Invoking cmgpbjs.requestBids",arguments),a&&a.length?r=r.filter((function(e){return m(a,e.code)})):a=r&&r.map((function(e){return e.code}));var f={global:Nt({},R.getAnyConfig("ortb2")||{},c||{}),bidder:Object.fromEntries(Object.entries(R.getBidderConfig()).map((function(e){var t=i()(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=i()(e,2);return t[0],null!=t[1]})))};return ao(J.resolve(f.global)).then((function(e){return f.global=e,zo({bidsBackHandler:t,timeout:p,adUnits:r,adUnitCodes:a,labels:o,auctionId:s,ttlBuffer:d,ortb2Fragments:f,metrics:u,defer:l})}))}),"requestBids"),Uo=Do,Po=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||lo.adUnits;return e.adUnits=Pe(t)?t.slice():[t],e.metrics=$n(),e.metrics.checkpoint("requestBids"),e.defer=X({promiseFactory:function(e){return new Promise(e)}}),Do.call(this,e),e.defer.promise},Object.defineProperties(Po,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(e){return[e,{get:function(){return Uo[e]}}]})))),Po);var zo=gn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.ttlBuffer,a=e.adUnitCodes,o=e.labels,s=e.auctionId,d=e.ortb2Fragments,c=e.metrics,u=e.defer,l=oi(R.getConfig("s2sConfig")||[]);function p(e,n,r){if("function"==typeof t)try{t(e,n,r)}catch(e){Se("Error executing bidsBackHandler",null,e)}u.resolve({bids:e,timedOut:n,auctionId:r})}if((r=Xn(c).measureTime("requestBids.validate",(function(){return No(r)}))).forEach((function(e){var t,n=Object.keys(e.mediaTypes||{banner:"banner"}),r=e.bids.map((function(e){return e.bidder})),a=pi.bidderRegistry,o=r.filter((function(e){return!l.has(e)})),s=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid)||fe();e.transactionId=s,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),Q(e,"ortb2Imp.ext.tid",s),o.forEach((function(t){var r=a[t],i=r&&r.getSpec&&r.getSpec(),o=i&&i.supportedMediaTypes||["banner"];n.some((function(e){return m(o,e)}))?pr.incrementBidderRequestsCounter(e.code,t):(Ee(Tt(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),pr.incrementRequestsCounter(e.code)})),r&&0!==r.length){var f=Vi.createAuction({adUnits:r,adUnitCodes:a,callback:p,cbTimeout:n,labels:o,auctionId:s,ortb2Fragments:d,metrics:c}),g=r.length;g>15&&Ie("Current auction ".concat(f.getAuctionId()," contains ").concat(g," adUnits."),r),a.forEach((function(e){return za.setLatestAuctionForAdUnit(e,f.getAuctionId())})),f.callBids()}else Te("No adUnits configured. No bids requested."),p()}),"startAuction");lo.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(Tn),n(Fo),e.call(this,t)}),49),lo.addAdUnits=function(e){Ie("Invoking cmgpbjs.addAdUnits",arguments),lo.adUnits.push.apply(lo.adUnits,Pe(e)?e:[e]),Xt(go)},lo.onEvent=function(e,t,n){Ie("Invoking cmgpbjs.onEvent",arguments),Be(t)?!n||Eo[e].call(null,n)?Kt(e,t,n):Se('The id provided is not valid for event "'+e+'" and no handler was set.'):Se('The event handler provided is not a function and was not set on event "'+e+'".')},lo.offEvent=function(e,t,n){Ie("Invoking cmgpbjs.offEvent",arguments),n&&!Eo[e].call(null,n)||Jt(e,t,n)},lo.getEvents=function(){return Ie("Invoking cmgpbjs.getEvents"),Yt()},lo.registerBidAdapter=function(e,t){Ie("Invoking cmgpbjs.registerBidAdapter",arguments);try{pi.registerBidAdapter(e(),t)}catch(e){Se("Error registering bidder adapter : "+e.message)}},lo.registerAnalyticsAdapter=function(e){Ie("Invoking cmgpbjs.registerAnalyticsAdapter",arguments);try{pi.registerAnalyticsAdapter(e)}catch(e){Se("Error registering analytics adapter : "+e.message)}},lo.createBid=function(e){return Ie("Invoking cmgpbjs.createBid",arguments),Mn(e)};var Fo=[],Go=gn("async",(function(e){e&&!Me(e)?(Ie("Invoking cmgpbjs.enableAnalytics for: ",e),pi.enableAnalytics(e)):Se("cmgpbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function Lo(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){Se("Error processing command :","prebid.js",e)}}))}lo.enableAnalytics=function(e){Fo.push(Go.bind(this,e))},lo.aliasBidder=function(e,t,n){Ie("Invoking cmgpbjs.aliasBidder",arguments),e&&t?pi.aliasBidAdapter(e,t,n):Se("bidderCode and alias must be passed as arguments","cmgpbjs.aliasBidder")},lo.aliasRegistry=pi.aliasRegistry,R.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete lo.aliasRegistry})),lo.getAllWinningBids=function(){return Vi.getAllWinningBids()},lo.getAllPrebidWinningBids=function(){return Vi.getBidsReceived().filter((function(e){return e.status===S.BID_STATUS.BID_TARGETING_SET}))},lo.getHighestCpmBids=function(e){return za.getWinningBids(e)},lo.markWinningBidAsUsed=function(e){var t=[];e.adUnitCode&&e.adId?t=Vi.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?t=za.getWinningBids(e.adUnitCode):e.adId?t=Vi.getBidsReceived().filter((function(t){return t.adId===e.adId})):Ee("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(t[0].status=S.BID_STATUS.RENDERED)},lo.getConfig=R.getAnyConfig,lo.readConfig=R.readAnyConfig,lo.mergeConfig=R.mergeConfig,lo.mergeBidderConfig=R.mergeBidderConfig,lo.setConfig=R.setConfig,lo.setBidderConfig=R.setBidderConfig,lo.que.push((function(){window.addEventListener("message",ka,!1)})),lo.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Se("Error processing command :",e.message,e.stack)}else Se("Commands written into cmgpbjs.cmd.push must be wrapped in a function")},lo.que.push=lo.cmd.push,lo.processQueue=function(){gn.ready(),Lo(lo.que),Lo(lo.cmd)};var Vo=lo,Wo=c();var Ho=gn("sync",(function(){})),Ko={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},Jo={},Yo={ri:br};function Xo(e,t,n){return E(t,"".concat(n,".description_url"))||Yo.ri().page}function Qo(e,t,n){var r=e&&e.adserverTargeting||{},i={},a=t&&t.adUnit;if(a){var s=za.getAllTargeting(a.code);i=s?s[a.code]:{}}var d=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},i,r);Xt(S.EVENTS.SET_TARGETING,o()({},a.code,d));var c=E(t,"params.cust_params"),u=Object.assign({},d,c),l=encodeURIComponent(Bt(u));return n&&(l=n+"%26"+l),l}R.getConfig("brandCategoryTranslation.translationFile")&&vn("registerAdserver").before((function(e){e.call(this,"dfp")})),function(e,t){Wo.adServers=Wo.adServers||{},Wo.adServers[e]=Wo.adServers[e]||{},Object.keys(t).forEach((function(n){Wo.adServers[e][n]?Ee("Attempting to add an already registered function property ".concat(n," for AdServer ").concat(e,".")):Wo.adServers[e][n]=t[n]}))}("dfp",{buildVideoUrl:function(e){if(e.params||e.url){var t=e.adUnit,n=e.bid||za.getWinningBids(t.code)[0],r={};if(e.url&&(r=Ut(e.url,{noDecodeWholeURL:!0}),Me(e.params)))return function(e,t,n){var r=Xo(t,e,"search");r&&(e.search.description_url=r);return e.search.cust_params=Qo(t,n,e.search.cust_params),Pt(e)}(r,n,e);var i={correlator:Date.now(),sz:ve(E(t,"mediaTypes.video.playerSize")).join("|"),url:encodeURIComponent(location.href)},a=r.search,o=a&&a.sz;o&&(i.sz=o+"|"+i.sz);var s=Qo(n,e,a&&a.cust_params),d=Object.assign({},Ko,r.search,i,e.params,{cust_params:s}),c=Xo(n,e,"params");c&&(d.description_url=c);var u=ni.getConsentData();u&&("boolean"==typeof u.gdprApplies&&(d.gdpr=Number(u.gdprApplies)),u.consentString&&(d.gdpr_consent=u.consentString),u.addtlConsent&&(d.addtl_consent=u.addtlConsent));var l=ri.getConsentData();l&&(d.us_privacy=l);ii.getConsentData();if(!d.ppid){var p=Ho();null!=p&&(d.ppid=p)}return Pt(Object.assign({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"},r,{search:d}))}Se("A params object or a url is required to use cmgpbjs.adServers.dfp.buildVideoUrl")},buildAdpodVideoUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=e.params,r=e.callback;if(n&&r){var i={correlator:Date.now(),sz:a(t),url:encodeURIComponent(location.href)};Jo.getTargeting({codes:[t],callback:s})}else Se("A params object and a callback is required to use pbjs.adServers.dfp.buildAdpodVideoUrl");function a(e){return ve(E(Vi.getAdUnits().filter((function(t){return t.code===e}))[0],"mediaTypes.video.playerSize")).join("|")}function s(e,a){var s;if(e)r(e,null);else{var d=(s={},o()(s,Jo.TARGETING_KEY_PB_CAT_DUR,void 0),o()(s,Jo.TARGETING_KEY_CACHE_ID,void 0),s),c={};a[t]&&(c=a[t].reduce((function(e,t){return Object.keys(t)[0]===Jo.TARGETING_KEY_PB_CAT_DUR?e[Jo.TARGETING_KEY_PB_CAT_DUR]=void 0!==e[Jo.TARGETING_KEY_PB_CAT_DUR]?e[Jo.TARGETING_KEY_PB_CAT_DUR]+","+t[Jo.TARGETING_KEY_PB_CAT_DUR]:t[Jo.TARGETING_KEY_PB_CAT_DUR]:Object.keys(t)[0]===Jo.TARGETING_KEY_CACHE_ID&&(e[Jo.TARGETING_KEY_CACHE_ID]=t[Jo.TARGETING_KEY_CACHE_ID]),e}),d));var u=encodeURIComponent(Bt(c)),l=Object.assign({},Ko,i,n,{cust_params:u}),p=ni.getConsentData();p&&("boolean"==typeof p.gdprApplies&&(l.gdpr=Number(p.gdprApplies)),p.consentString&&(l.gdpr_consent=p.consentString),p.addtlConsent&&(l.addtl_consent=p.addtlConsent));var f=ri.getConsentData();f&&(l.us_privacy=f);var g=Pt({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads",search:l});r(null,g)}}},getAdpodTargeting:function(e){return Jo.getTargeting(e)}}),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=bn[e];if(i)return i.apply(void 0,n);vn(e).before((function(e,t){t.push(n),e(t)}))}("adpod",Jo),u("dfpAdServerVideo");var $o=["request","imp","bidResponse","response"],Zo=["default","pbs"],es=$o[0],ts=$o[1],ns=$o[2],rs=$o[3],is=Zo[0],as=Zo[1],os=new Set($o);var ss,ds,cs,us,ls,ps,fs,gs=(ss={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,r=e.fn,i=e.priority,a=void 0===i?0:i,o=e.dialects,s=void 0===o?[is]:o;if(!os.has(t))throw new Error("ORTB processor type must be one of: ".concat($o.join(", ")));s.forEach((function(e){ss.hasOwnProperty(e)||(ss[e]={}),ss[e].hasOwnProperty(t)||(ss[e][t]={}),ss[e][t][n]={priority:a,fn:r}}))},getProcessors:function(e){return ss[e]||{}}}),ms=gs.registerOrtbProcessor,vs=gs.getProcessors,bs=!1,hs={iab:function(e){var t=e.onSuccess,n=e.onError,r=e.onEvent;function i(e,i){Ie("Received a response from CMP",e),i?(r(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||xs(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}var a={},s=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__tcfapi){t=n.__tcfapi,e=n;break}}catch(e){}try{if(n.frames.__tcfapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{cmpFrame:e,cmpFunction:t}}(),d=s.cmpFrame,c=s.cmpFunction;if(!d)return n("TCF2 CMP not found.");"function"==typeof c?(Ie("Detected CMP API is directly accessible, calling it now..."),c("addEventListener",2,i)):(Ie("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),function(e,t,n){var r="".concat("__tcfapi","Call");window.__tcfapi=function(e,n,i,s){var d=Math.random()+"",c=o()({},r,{command:e,version:n,parameter:s,callId:d});a[d]=i,t.postMessage(c,"*")},window.addEventListener("message",(function(e){var t="".concat("__tcfapi","Return"),n="string"==typeof e.data&&m(e.data,t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){var r=n[t];a.hasOwnProperty(r.callId)&&a[r.callId](r.returnValue,r.success)}}),!1),window.__tcfapi(e,2,n)}("addEventListener",d,i))},static:function(e){var t=e.onSuccess,n=e.onError;xs(ls,{onSuccess:t,onError:n})}};function ys(e){var t,n,r=!1,i=null,a=!1;function o(e){null!=i&&clearTimeout(i),r||null==e||(0===e?t():i=setTimeout(t,e))}function s(t,n,i){if(o(null),r=!0,ni.setConsentData(t),"function"==typeof e){for(var a=arguments.length,s=new Array(a>3?a-3:0),d=3;d<a;d++)s[d-3]=arguments[d];e.apply(void 0,[n,i].concat(s))}}if(m(Object.keys(hs),ds)){var d={onSuccess:function(e){return s(e,!1)},onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s.apply(void 0,[null,!0,e].concat(n))},onEvent:function(e){n=e,a||(a=!0,null!=ps&&o(ps))}};t=function(){var e=function(e){s(e,!1,"".concat(a?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};xs(n,{onSuccess:e,onError:function(){return e(_s(void 0))}})},hs[ds](d),null!=ps&&a||o(cs)}else s(null,!1,"CMP framework (".concat(ds,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var ws=er("gdpr",(function(e,t){var n;n=function(n,r){if(r){var i=Ee;n&&(i=Se,r="".concat(r," Canceling auction as per consentManagement config."));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];i.apply(void 0,[r].concat(o))}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():Se("Error executing bidsBackHandler")):e.call(this,t)},fs?(Ie("User consent information already known.  Pulling internally stored information..."),n(!1)):ys(n)}));function xs(e,t){var n,r,i=t.onSuccess,a=t.onError;n=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:us,r=e&&e.tcString,"boolean"==typeof n&&(!0!==n||r&&Ue(r))?i(_s(e)):a("CMP returned unexpected value during lookup process.",e)}function _s(e){return fs={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:us},e&&e.addtlConsent&&Ue(e.addtlConsent)&&(fs.addtlConsent=e.addtlConsent),fs.apiVersion=2,fs}R.getConfig("consentManagement",(function(e){return function(e){if((e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===g()(e)){var t;if(Ue(e.cmpApi)?ds=e.cmpApi:(ds="iab",Ie("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),De(e.timeout)?cs=e.timeout:(cs=1e4,Ie("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),ps=De(e.actionTimeout)?e.actionTimeout:null,us=!0===e.defaultGdprScope,Ie("consentManagement module has been activated..."),"static"===ds)if(Ne(e.consentData))null!=(null===(t=ls=e.consentData)||void 0===t?void 0:t.getTCData)&&(ls=ls.getTCData),cs=0;else Se("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.");bs||c().requestBids.before(ws,50),bs=!0,ni.enable(),ys()}else Ee("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement)})),ao.before((function(e,t){return e(t.then((function(e){var t=ni.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&Q(e,"regs.ext.gdpr",t.gdprApplies?1:0),Q(e,"user.ext.consent",t.consentString)),e})))})),ms({type:es,name:"gdprAddtlConsent",fn:function(e,t){var n,r=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;r&&"string"==typeof r&&Q(e,"user.ext.ConsentedProvidersSettings.consented_providers",r)}}),u("consentManagement");var Ts=Sn({moduleType:"userId",moduleName:"pubCommonId"});Gr.register("userId","pubCommonId",Cr);var Is={enabled:!0,interval:525600,typeEnabled:"html5",create:!0,extend:!0,pixelUrl:""};function Es(e){var t=null;try{var n=Ts.getDataFromLocalStorage(e+"_exp");if(n)new Date(n).getTime()-Date.now()>0?t=Ts.getDataFromLocalStorage(e):function(e){try{Ts.removeDataFromLocalStorage(e+"_exp"),Ts.removeDataFromLocalStorage(e)}catch(e){Te(e)}}(e);else t=Ts.getDataFromLocalStorage(e)}catch(e){Te(e)}return t}function Ss(e,t){var n;return t||(t=Is.typeEnabled),"cookie"===t?n=Ts.getCookie(e):"html5"===t&&(n=Es(e)),"undefined"===n||"null"===n?null:n}function Os(e,t,n){e&&t&&("cookie"===Is.typeEnabled?function(e,t,n,r){var i=new Date;i.setTime(i.getTime()+1e3*n*60),Ts.setCookie(e,t,i.toGMTString(),r)}(e,t,n,"Lax"):"html5"===Is.typeEnabled&&function(e,t,n){try{if(void 0!==n&&null!=n){var r=new Date(Date.now()+60*n*1e3).toUTCString();Ts.setDataInLocalStorage(e+"_exp",r)}Ts.setDataInLocalStorage(e,t)}catch(e){Te(e)}}(e,t,n))}function Cs(e,t){if(!e)return!1;t=t||"";var n=Ut(e);n.search.id=encodeURIComponent("pubcid:"+t);var r=Pt(n);return Kt(S.EVENTS.AUCTION_END,(function e(){Jt(S.EVENTS.AUCTION_END,e),Ke(r)})),!0}var As=er("pubCommonId",(function(e,t){var n=t.adUnits||c().adUnits,r=null;return Is.enabled&&Is.typeEnabled?("object"===g()(window.PublisherCommonId)?Te("PublisherCommonId: pubcid = "+(r=window.PublisherCommonId.getId())):((r=Ss("_pubcid"))?Is.extend&&(Cs(Is.pixelUrl,r)||Os("_pubcid",r,Is.interval)):(Is.create&&("html5"===Is.typeEnabled&&(r=Ss("_pubcid","cookie")),r||(r=fe()),Os("_pubcid",r,Is.interval),r=Ss("_pubcid")),Cs(Is.pixelUrl,r)),Te("pbjs: pubcid = "+r)),n&&r&&n.forEach((function(e){e.bids&&Pe(e.bids)&&e.bids.forEach((function(e){Object.assign(e,{crumbs:{pubcid:r}})}))})),e.call(this,t)):e.call(this,t)}));R.getConfig("pubcid",(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable,n=e.expInterval,r=e.type,i=void 0===r?"html5,cookie":r,a=e.create,o=e.extend,s=e.pixelUrl;void 0!==t&&(Is.enabled=t),void 0!==n&&(Is.interval=parseInt(n,10)),isNaN(Is.interval)&&(Is.interval=525600),void 0!==a&&(Is.create=a),void 0!==o&&(Is.extend=o),void 0!==s&&(Is.pixelUrl=s),Is.typeEnabled=null;for(var d=i.split(","),c=0;c<d.length;++c){var u=d[c].trim();if("cookie"===u){if(Ts.cookiesAreEnabled()){Is.typeEnabled="cookie";break}}else if("html5"===u&&Ts.hasLocalStorage()){Is.typeEnabled="html5";break}}}(e.pubcid)})),Ts.cookiesAreEnabled()&&Ss("_pubcid_optout","cookie")||Ts.hasLocalStorage()&&Ss("_pubcid_optout","html5")||c().requestBids.before(As),u("pubCommonId");var ks={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},Rs=[];function js(e,t){var n=ks.STRICT;if(function(e){return void 0!==e&&(!!Ne(e)||(Se("Invalid schain object found: the following schain config will not be used as schain is not an object.",e),!1))}(e)){if(Ue(e.validation)&&-1!=Rs.indexOf(e.validation)&&(n=e.validation),n===ks.OFF)return e.config;if(function(e,t){var n="Detected something wrong within an schain config:",r="";function i(e){r+="\n"+e}function a(){!0===t?Se(n,e,r):Ee(n,e,r)}if(!Ne(e)&&(i("schain.config should be an object"),a(),t))return!1;if(De(e.complete)&&It(e.complete)||i("schain.config.complete should be an Integer"),Ue(e.ver)||i("schain.config.ver should be a string"),Ve(e,"ext")&&(Ne(e.ext)||i("schain.config.ext should be an object")),Pe(e.nodes))e.nodes.forEach((function(e,t){Ue(e.asi)||i("schain.config.nodes[".concat(t,"].asi")+" should be a string"),Ue(e.sid)||i("schain.config.nodes[".concat(t,"].sid")+" should be a string"),De(e.hp)&&It(e.hp)||i("schain.config.nodes[".concat(t,"].hp")+" should be an Integer"),Ve(e,"rid")&&(Ue(e.rid)||i("schain.config.nodes[".concat(t,"].rid")+" should be a string")),Ve(e,"name")&&(Ue(e.name)||i("schain.config.nodes[".concat(t,"].name")+" should be a string")),Ve(e,"domain")&&(Ue(e.domain)||i("schain.config.nodes[".concat(t,"].domain")+" should be a string")),Ve(e,"ext")&&(Ne(e.ext)||i("schain.config.nodes[".concat(t,"].ext")+" should be an object"))}));else if(i("schain.config.nodes should be an Array"),a(),t)return!1;return!(r.length>0&&(a(),t))}(e.config,!(n!==ks.STRICT)))return e.config;Se("Invalid schain object found: "+"due to the 'strict' validation setting, this schain config will not be passed to bidder '".concat(t,"'.  See above error for details."))}return null}function Bs(e,t){var n=R.getConfig("schain"),r=R.getBidderConfig();t.forEach((function(e){var t=e.bidderCode,i=function(e){return r[e]&&r[e].schain||n}(t);e.bids.forEach((function(e){var n=js(i,t);n&&(e.schain=n)}))})),e(t)}function Us(e){return null==e||!e.gdprApplies||!0===E(e,"vendorData.purpose.consents.1")}Fe(ks,(function(e){return Rs.push(e)})),pi.makeBidRequests.after(Bs),ms({type:es,name:"sourceExtSchain",fn:function(e,t,n){if(!E(e,"source.ext.schain")){var r=E(n,"bidRequests.0.schain");r&&Q(e,"source.ext.schain",r)}}}),u("schain");var Ps=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],Ds=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],Ns=["age","externalUid","external_uid","segments","gender","dnt","language"],qs=["geo","device_id"],Ms=["enabled","dongle","member_id","debug_timeout"],zs={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},Fs={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},Gs={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},Ls=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,Vs=Sn({bidderCode:"appnexus"});function Ws(e){return!!(Pe(e)&&e.length>0)}function Hs(e){Ws(e.value)&&""===e.value[0]&&delete e.value}function Ks(e){var t={};Object.keys(e.params).forEach((function(t){var n=Et(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),t.sizes=Js(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placement_id?t.id=parseInt(e.params.placement_id,10):t.code=e.params.inv_code,t.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,t.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,t.prebid=!0,t.disable_psa=!0;var n=function(e){if(!Be(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if(Ne(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor;return null}(e);if(n&&(t.reserve=n),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{var r=E(e,"mediaTypes.banner.pos")||E(e,"mediaTypes.video.pos");0!==r&&1!==r&&3!==r||(t.position=3===r?2:r)}e.params.traffic_source_code&&(t.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(t.private_sizes=Js(e.params.private_sizes)),e.params.supply_type&&(t.supply_type=e.params.supply_type),e.params.pub_click&&(t.pubclick=e.params.pub_click),e.params.ext_inv_code&&(t.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(t.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(t.external_imp_id=e.params.external_imp_id);var i=E(e,"ortb2Imp.ext.data.keywords");if(Ue(i)&&""!==i||!Me(e.params.keywords)){var a=od(i),o=Ne(e.params.keywords)?ut(e.params.keywords):{};Object.keys(o).forEach((function(e){(Ue(o[e])||De(o[e]))&&(o[e]=[o[e]])}));var s=Ot(Nt({},o,a));s.length>0&&(s.forEach(Hs),t.keywords=s)}var d,c,u=E(e,"ortb2Imp.ext.data.pbadslot");if(u&&(t.gpid=u),(e.mediaType===kn||E(e,"mediaTypes.".concat(kn)))&&(t.ad_types.push(kn),0===t.sizes.length&&(t.sizes=Js([1,1])),e.nativeParams)){var l=(d=e.nativeParams,c={},Object.keys(d).forEach((function(e){var t=Gs[e]&&Gs[e].serverName||Gs[e]||e,n=Gs[e]&&Gs[e].requiredParams;if(c[t]=Object.assign({},n,d[e]),(t===Gs.image.serverName||t===Gs.icon.serverName)&&c[t].sizes){var r=c[t].sizes;(At(r)||Pe(r)&&r.length>0&&r.every((function(e){return At(e)})))&&(c[t].sizes=Js(c[t].sizes))}t===Gs.privacyLink&&(c.privacy_supported=!0)})),c);t[kn]={layouts:[l]}}var p=E(e,"mediaTypes.".concat(Rn)),f=E(e,"mediaTypes.video.context");t.hb_source=p&&"adpod"===f?7:1,(e.mediaType===Rn||p)&&t.ad_types.push(Rn),(e.mediaType===Rn||p&&"outstream"!==f)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((function(e){return m(Ps,e)})).forEach((function(n){switch(n){case"context":case"playback_method":var r=e.params.video[n];r=Pe(r)?r[0]:r,t.video[n]=Fs[n][r];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&Pe(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),p&&(t.video=t.video||{},Object.keys(p).filter((function(e){return m(Ds,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=p[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===p[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=p[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){var n=p[e];(n=Pe(n)?n[0]:n)>=1&&n<=4&&(t.video.playback_method=n)}break;case"api":if(!t.video_frameworks&&Pe(p[e])){var r=p[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));t.video_frameworks=r}break;case"startdelay":case"placement":if("number"!=typeof t.video.context){var i=p.placement,a=p.startdelay,o=function(e){if(!e)return;if(2===e)return"in-banner";if(e>2)return"outstream"}(i)||function(e){if(!e)return;if(0===e)return"pre_roll";if(-1===e)return"mid_roll";if(-2===e)return"post_roll"}(a);t.video.context=Fs.context[o]}}}))),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0})),e.params.frameworks&&Pe(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks);var g=v(Vi.getAdUnits(),(function(t){return e.transactionId===t.transactionId}));return g&&g.mediaTypes&&g.mediaTypes.banner&&t.ad_types.push(jn),0===t.ad_types.length&&delete t.ad_types,t}function Js(e){var t=[],n={};if(Pe(e)&&2===e.length&&!Pe(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===g()(e))for(var r=0;r<e.length;r++){var i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function Ys(e){return!!e.params.user}function Xs(e){return!!parseInt(e.params.member,10)}function Qs(e){if(e.params)return!!e.params.app}function $s(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function Zs(e){return!!e.debug}function ed(e){return e.mediaTypes&&e.mediaTypes.video&&"adpod"===e.mediaTypes.video.context}function td(e){var t=!1,n=e.params,r=e.params.video;return n.frameworks&&Pe(n.frameworks)&&(t=m(e.params.frameworks,6)),!t&&r&&r.frameworks&&Pe(r.frameworks)&&(t=m(e.params.video.frameworks,6)),t}function nd(e,t,n){Me(e.video)&&(e.video={}),e.video[t]=n}function rd(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){(function(e){return e?e.defaultView:null}(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},id.bind(null,e))}))}function id(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function ad(e){var t="";return Object.keys(e).forEach((function(n){Ue(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):Pe(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function od(e){var t={};Ue(e)&&""!==e&&e.split(/\s*(?:,)\s*/).forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[""])}));return t}rr({code:"appnexus",gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"defymedia",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618}],supportedMediaTypes:[jn,Rn,kn],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,r=(e=function(e){if(!e||!Pe(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[kn])||void 0===t?void 0:t.ortb})))return e;var t,n=ut(e),r=Wi(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[kn]&&i.mediaTypes[kn].ortb&&(i.mediaTypes[kn]=Object.assign(St(i.mediaTypes[kn],ta),ba(i.mediaTypes[kn].ortb)),i.nativeParams=sa(i.mediaTypes[kn]))}}catch(e){r.e(e)}finally{r.f()}return n}(e)).map(Ks),i=v(e,Ys),a={};!0===R.getConfig("coppa")&&(a={coppa:!0}),i&&Object.keys(i.params.user).filter((function(e){return m(Ns,e)})).forEach((function(e){var t=Et(e);if("segments"===e&&Pe(i.params.user[e])){var n=[];i.params.user[e].forEach((function(e){De(e)?n.push({id:e}):Ne(e)&&n.push(e)})),a[t]=n}else"segments"!==e&&(a[t]=i.params.user[e])}));var o,s=v(e,Qs);s&&s.params&&s.params.app&&(o={},Object.keys(s.params.app).filter((function(e){return m(qs,e)})).forEach((function(e){return o[e]=s.params.app[e]})));var d,c=v(e,$s);c&&c.params&&s.params.app&&s.params.app.id&&(d={appid:c.params.app.id});var u={},l={},f=Vs.getCookie("apn_prebid_debug")||null;if(f)try{u=JSON.parse(f)}catch(e){Se("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(zs).forEach((function(e){var t=Re(e);Ue(t)&&""!==t&&(u[zs[e]]=t,u.enabled=!0)})),u=Ct({member_id:"number",debug_timeout:"number"},u);var g=v(e,Zs);g&&g.debug&&(u=g.debug)}u&&u.enabled&&Object.keys(u).filter((function(e){return m(Ms,e)})).forEach((function(e){l[e]=u[e]}));var b=v(e,Xs),h=b?parseInt(b.params.member,10):0,y=e[0].schain,w=v(e,td),x={tags:p()(r),user:a,sdk:{source:"pbjs",version:"7.48.0"},schain:y};w&&(x.iab_support={omidpn:"Appnexus",omidpv:"7.48.0"}),h>0&&(x.member_id=h),s&&(x.device=o),c&&(x.app=d);var _,T,I=ut(t&&t.ortb2),S=(_=I,T=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach((function(e){var t=E(_,e);Ue(t)&&T.push(t)})),T).map((function(e){return od(e)})),O=ut(R.getConfig("appnexusAuctionKeywords"))||{};Object.keys(O).forEach((function(e){(Ue(O[e])||De(O[e]))&&(O[e]=[O[e]])}));var C=Ot(Nt.apply(void 0,[{},O].concat(p()(S))));if(C.length>0&&(C.forEach(Hs),x.keywords=C),R.getConfig("adpod.brandCategoryExclusion")&&(x.brand_category_uniqueness=!0),l.enabled&&(x.debug=l,Ie("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(l,null,4))),t&&t.gdprConsent&&(x.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var A=t.gdprConsent.addtlConsent,k=A.substring(A.indexOf("~")+1);x.gdpr_consent.addtl_consent=k.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(x.us_privacy=t.uspConsent),null!=t&&t.gppConsent?x.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&(x.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var j={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},B=t.refererInfo.canonicalUrl;Ue(B)&&""!==B&&(j.rd_can=B),x.referrer_detection=j}if(v(e,ed)&&e.filter(ed).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,r=n.durationRangeSec,i=n.requireExactDuration,a=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,r=e.requireExactDuration,i=(o=n,Math.min.apply(Math,p()(o))),a=Math.floor(t/i);var o;return r?Math.max(a,n.length):a}(t.mediaTypes.video),o=(c=r,Math.max.apply(Math,p()(c))),s=e.filter((function(e){return e.uuid===t.bidId})),d=kt.apply(void 0,p()(s).concat([a]));var c;if(i){var u=Math.ceil(a/r.length),l=Rt(d,u);r.forEach((function(e,t){l[t].map((function(t){nd(t,"minduration",e),nd(t,"maxduration",e)}))}))}else d.map((function(e){return nd(e,"maxduration",o)}));return d}(r,e),n=x.tags.filter((function(t){return t.uuid!==e.bidId}));x.tags=[].concat(p()(n),p()(t))})),e[0].userId){var U=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),U.push(n)}))})),U.length&&(x.eids=U)}return r[0].publisher_id&&(x.publisher_id=r[0].publisher_id),function(e,t){var n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";Us(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid");"TRUE"!==Re("apn_test").toUpperCase()&&!0!==R.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1});if(e.tags.length>15){var a=ut(e);Rt(e.tags,15).forEach((function(e){a.tags=e;var o=JSON.stringify(a);n.push({method:"POST",url:i,data:o,bidderRequest:t,options:r})}))}else{var o=JSON.stringify(e);n={method:"POST",url:i,data:o,bidderRequest:t,options:r}}return n}(x,t)},interpretResponse:function(e,t){var n=this,r=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var a="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(a+=": ".concat(e.error)),Se(a),i}if(e.tags&&e.tags.forEach((function(e){var t,a=(t=e)&&t.ads&&t.ads.length&&v(t.ads,(function(e){return e.rtb}));if(a&&((!0===_n.get(r.bidderCode,"allowZeroCpmBids")?a.cpm>=0:a.cpm>0)&&m(n.supportedMediaTypes,a.ad_type))){var o=function(e,t,n){var r=tt(e.uuid,[n]),i=pe(),a={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.adomain&&(a.meta=Object.assign({},a.meta,{advertiserDomains:[t.adomain]}));t.advertiser_id&&(a.meta=Object.assign({},a.meta,{advertiserId:t.advertiser_id}));t.buyer_member_id&&(a.meta=Object.assign({},a.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)}));t.brand_id&&(a.meta=Object.assign({},a.meta,{brandId:t.brand_id}));if(t.rtb.video){switch(Object.assign(a,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),E(r,"mediaTypes.video.context")){case"adpod":var o=function(e,t){var n=pi.getBidAdapter(e);if(n.getSpec().getMappingFileInfo){var r=n.getSpec().getMappingFileInfo(),i=r.localStorageKey?r.localStorageKey:n.getBidderCode(),a=tr.getDataFromLocalStorage(i);if(a){try{a=JSON.parse(a)}catch(t){Se("Failed to parse ".concat(e," mapping data stored in local storage"))}return a.mapping[t]?a.mapping[t]:null}}}(r.bidder,t.brand_category_id);a.meta=Object.assign({},a.meta,{primaryCatId:o});var s=t.deal_priority;a.video={context:"adpod",durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:s},a.vastUrl=t.rtb.video.asset_url;break;case"outstream":if(a.adResponse=e,a.adResponse.ad=a.adResponse.ads[0],a.adResponse.ad.video=a.adResponse.ad.rtb.video,a.vastXml=t.rtb.video.content,t.renderer_url){var d=v(n.bids,(function(t){return t.bidId===e.uuid})),c=E(d,"mediaTypes.video.renderer.options");c||(c=E(d,"renderer.options")),a.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=sn.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(rd)}catch(e){Ee("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return Te("AppNexus outstream video impression event")},loaded:function(){return Te("AppNexus outstream video loaded event")},ended:function(){Te("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),r}(a.adUnitCode,t,c)}break;case"instream":a.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}}else if(t.rtb[kn]){var u,l=t.rtb[kn];if(function(e){if(!e||""===e)return!1;var t=e.match(Ls),n=null!=t&&t.length>=1,r=e.match("trk.js"),i=null!=r&&r.length>=1;return e.startsWith("<script")&&i&&n}(t.viewability.config)){var p="pbjs_adid="+i+";pbjs_auc="+r.adUnitCode;u=t.viewability.config.replace("dom_id=%native_dom_id%",p)}var f=l.javascript_trackers;null==f?f=u:Ue(f)?f=[f,u]:f.push(u),a[kn]={title:l.title,body:l.desc,body2:l.desc2,cta:l.ctatext,rating:l.rating,sponsoredBy:l.sponsored,privacyLink:l.privacy_link,address:l.address,downloads:l.downloads,likes:l.likes,phone:l.phone,price:l.price,salePrice:l.saleprice,clickUrl:l.link.url,displayUrl:l.displayurl,clickTrackers:l.link.click_trackers,impressionTrackers:l.impression_trackers,video:l.video,javascriptTrackers:f},l.main_img&&(a.native.image={url:l.main_img.url,height:l.main_img.height,width:l.main_img.width}),l.icon&&(a.native.icon={url:l.icon.url,height:l.icon.height,width:l.icon.width})}else{Object.assign(a,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var g=0;g<t.rtb.trackers[0].impression_urls.length;g++){var m=Qe(t.rtb.trackers[0].impression_urls[g]);a.ad+=m}}catch(e){Se("Error appending tracking pixel",e)}}return a}(e,a,r);o.mediaType=function(e){var t=e.ad_type;return t===Rn?Rn:t===kn?kn:jn}(a),i.push(o)}})),e.debug&&e.debug.debug_info){var o="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;o=o.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),Te("https://console.appnexus.com/docs/understanding-the-debug-auction"),Te(o)}return i},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&Us(n)&&function(e){return!e||!Array.isArray(e.applicableSections)||e.applicableSections.every((function(e){return"number"==typeof e&&e<=5}))}(i))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,n,r){var i=Ot;if(!0===t){var a=null,o=R.getConfig("s2sConfig");Ne(o)?a=E(o,"endpoint.p1Consent"):Pe(o)&&o.forEach((function(e){m(e.bidders,n.bids[0].bidder)&&(a=E(e,"endpoint.p1Consent"))})),a&&a.match("/openrtb2/prebid")&&(i=ad)}return e=Ct({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(Ws(e.keywords)&&e.keywords.forEach(Hs),Object.keys(e).forEach((function(t){var n=Et(t);n!==t&&(e[n]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}}),u("appnexusBidAdapter");var sd=n(18),dd=n.n(sd),cd=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pd="https://x.bidswitch.net/sync?ssp=themediagrid",fd=Sn({bidderCode:"grid"}),gd="Bid from response has no auid parameter - ",md="Bid from response has no adm parameter - ",vd="Array of bid objects is empty",bd="Seatbid array from response has empty item",hd="Response is empty",yd="Response has empty seatbid array",wd="Seatbid from response has no array of bid objects - ",xd={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},_d=!1,Td={code:"grid",gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[jn,Rn],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;var n=null,r=null,a=null,o=null,s=null,d=null,c=null,u=!1,l=t||{},f=l.bidderRequestId,m=l.auctionId,v=l.gdprConsent,b=l.uspConsent,h=l.timeout,y=l.refererInfo,w=l.gppConsent,x=y?encodeURIComponent(y.page):"",_=h,T=[],I={},S=[],O={},C=[],A=[],k=[];e.forEach((function(e){var t={bid:e,savedPrebidBid:null};if(e.params.withCriteo&&Cd.isBidRequestValid(e)&&(O[e.bidId]=t,C.push(e)),e.params.uid||e.params.secid){f||(f=e.bidderRequestId),m||(m=e.auctionId),a||(a=e.schain),o||(o=e.userIdAsEids),c||(c=xd[e.bidder]&&xd[e.bidder].endpoint);var s=e.params,d=e.mediaTypes,l=e.bidId,p=e.adUnitCode,v=e.rtd,b=e.ortb2Imp,h=ld(ld({},(xd[e.bidder]||{}).defaultParams),s),y=h.secid,w=h.pubid,E=h.source,R=h.uid,j=h.keywords,B=h.forceBidder,U=h.multiRequest,P=h.content,D=h.video,N=function(e,t){var n=e.video?"video":"banner",r=t.params.bidFloor||t.params.floorcpm||0;if("function"==typeof t.getFloor){var a=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((function(e){var t=i()(e,2);return{w:t[0],h:t[1]}}))});"object"!==g()(a)||"USD"!==a.currency||isNaN(parseFloat(a.floor))||(r=Math.max(r,parseFloat(a.floor)))}return r}(d||{},e),q=v&&v.jwplayer&&v.jwplayer.targeting;q&&!r&&q.content&&(r=q.content);var M={id:l.toString(),tagid:(y||R).toString(),ext:{divid:p.toString()}};if(b&&(b.instl&&(M.instl=b.instl),b.ext&&(b.ext.data&&(M.ext.data=b.ext.data,M.ext.data.adserver&&M.ext.data.adserver.adslot?M.ext.gpid=M.ext.data.adserver.adslot.toString():b.ext.data.pbadslot&&(M.ext.gpid=b.ext.data.pbadslot.toString())),b.ext.gpid&&(M.ext.gpid=b.ext.gpid.toString()))),Me(j)||(n||(n=j),M.ext.bidder={keywords:j}),N&&(M.bidfloor=N),!d||d[jn]){var z=function(e,t){var n=t.sizes||e.sizes;if(!n||!n.length)return;var r=n.map((function(e){return he(e)})),i=he(n[0]);r.length&&(i.format=r);return i}(e,d?d[jn]:{});z&&(M.banner=z)}if(d&&d[Rn]){var F=function(e,t,n){var r=ld(ld({},t),e),i=r.mind,a=r.maxd,o=r.size,s=r.playerSize,d=r.protocols,c=r.durationRangeSec,u=void 0===c?[]:c,l=dd()(r,cd);if(o&&Ue(o)){var p=o.split("x");2===p.length&&parseInt(p[0])&&parseInt(p[1])&&(l.w=parseInt(p[0]),l.h=parseInt(p[1]))}if(!l.w||!l.h){var f=((s||n||[]).toString().match(/^\d+,\d+/)||[])[0],g=f&&f.split(",").map((function(e){return parseInt(e)}));g&&2===g.length&&Object.assign(l,he(g))}if(!l.w||!l.h)return;var m=i||u[0]||l.minduration,v=a||u[1]||l.maxduration;m&&(l.minduration=m);v&&(l.maxduration=v);d&&d.length&&(l.protocols=d);return l}(D,d[Rn],e.sizes);F&&(M.video=F)}if(M.banner||M.video)if(U){var G={tid:e.auctionId&&e.auctionId.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.48.0"}};e.schain&&(G.ext.schain=e.schain);var L={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:x},tmax:_,source:G,imp:[M]};w&&(L.site.publisher={id:w});var V=P||q&&q.content;V&&(L.site.content=V),S.push(L),A.push(E),k.push(t)}else I[l]=t,T.push(M);!u&&B&&xd[B]&&(u=B)}})),(u=R.getConfig("forceBidderName")||u)&&xd[u]&&(c=xd[u].endpoint,this.forceBidderName=u);var j={tid:m&&m.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.48.0"}};a&&(j.ext.schain=a);var B=T.length||!S.length?{id:f&&f.toString(),site:{page:x},tmax:_,source:j,imp:T}:null;r&&(B.site.content=r),[].concat(S,[B]).forEach((function(e){if(e){s=null;var r=E(t,"ortb2.user.data");r&&r.length&&(s={data:p()(r)}),v&&v.consentString&&(d={consent:v.consentString});var i=E(t,"ortb2.user.ext.device");i&&((d=d||{}).device=ld({},i)),o&&o.length&&((d=d||{}).eids=p()(o)),d&&Object.keys(d).length&&((s=s||{}).ext=d);var a=fd.getDataFromLocalStorage("tmguid")||function(){if(R.getConfig("localStorageWriteAllowed")){var e=fe().replace(/-/g,"");return fd.setDataInLocalStorage("tmguid",e),e}return null}();a&&((s=s||{}).id=a.toString()),s&&(e.user=s);var c=E(t,"ortb2.user.keywords")||null,u=E(t,"ortb2.site.keywords")||null;c&&((n=n||{}).user=n.user||{},n.user.ortb2=[{name:"keywords",keywords:c.split(",")}]),u&&((n=n||{}).site=n.site||{},n.site.ortb2=[{name:"keywords",keywords:u.split(",")}]),n&&(n=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(r)if("site"===n||"user"===n){var i={};Object.keys(r).forEach((function(e){if(Array.isArray(r[e])){var t=[];r[e].forEach((function(e){if("object"===g()(e)&&e.name){var n={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?n.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&n.segments.push(e))}))})),n.segments.length&&t.push(n)}})),t.length&&(i[e]=t)}})),t[n]=i}else t[n]=r})),Object.keys(t).length&&t}(n))&&(e.ext={keywords:n}),v&&v.gdprApplies&&(e.regs={ext:{gdpr:v.gdprApplies?1:0}});var l=E(t,"ortb2.regs")||{};if(w||null!=l&&l.gpp){var f,m,h,y={gpp:null!==(f=null==w?void 0:w.gppString)&&void 0!==f?f:null==l?void 0:l.gpp,gpp_sid:null!==(m=null==w?void 0:w.applicableSections)&&void 0!==m?m:null==l?void 0:l.gpp_sid};e.regs=Nt(null!==(h=null==e?void 0:e.regs)&&void 0!==h?h:{},y)}b&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=b),!0===R.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1);var x=E(t,"ortb2.site");if(x){var _=[].concat(p()(x.cat||[]),p()(x.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));_.length&&(e.site.cat=_);var T=E(x,"content.genre");T&&"string"==typeof T&&(e.site.content=ld(ld({},e.site.content),{},{genre:T}));var I=E(x,"content.data");if(I&&I.length){var S=e.site.content||{};e.site.content=Nt(S,{data:I})}var O=E(x,"content.id");O&&(e.site.content=ld(ld({},e.site.content),{},{id:O}))}}}));var U=C.length&&Cd.buildRequests(C,t);return U&&(U.criteoBidsMap=O),[].concat(p()(S.map((function(e,t){var n,r=(c||"https://grid.bidswitch.net/hbjson").replace(/[?&]sp=([^?&=]+)/,(function(e,t){return t&&(n=t),""})),i=A[t]||n;return{method:"POST",url:r+(r.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:k[t]}}))),p()(B?[{method:"POST",url:c||"https://grid.bidswitch.net/hbjson",data:JSON.stringify(B),bidsMap:I}]:[]),p()(U?[U]:[]))},interpretResponse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn;if(t.criteoBidsMap&&t.bidRequests){var r=Cd.interpretResponse(e,t);return r.filter((function(e){var n=(t.criteoBidsMap[e.requestId]||{}).savedPrebidBid;return Sd(e.cpm,n&&n.cpm)}))}e=e&&e.body;var i,a=[];e?e.seatbid&&!e.seatbid.length&&(i=yd):i=hd;var o=this.forceBidderName||this.code;return!i&&e.seatbid&&e.seatbid.forEach((function(e){Ed(Id(e),t,a,n,o)})),i&&Se(i),a},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[2],a=t[3];if(!_d&&r.pixelEnabled){var o="";i&&("boolean"==typeof i.gdprApplies&&(o+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(o+="&gdpr_consent=".concat(i.consentString))),a&&(o+="&us_privacy=".concat(a));var s=this.forceBidderName||this.code,d=xd[s]&&xd[s].syncurl||pd;return _d=!0,{type:"image",url:d+o}}}};function Id(e){return e?e.bid?e.bid[0]||Se(vd):Se(wd+JSON.stringify(e)):Se(bd),e&&e.bid&&e.bid[0]}function Ed(e,t,n,r,i){if(e){var a;if(e.auid||(a=gd+JSON.stringify(e)),a||e.adm||e.nurl){var o=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,s=o||{},d=s.bid,c=s.savedPrebidBid;if(d&&Sd(e.price,c&&c.cpm)){var u={requestId:d.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.auid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};o.savedPrebidBid=u,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(u.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},u.meta.demandSource=e.ext.bidder.grid.demandSource),"video"===e.content_type?(e.adm?(u.vastXml=e.adm,u.adResponse={content:u.vastXml}):e.nurl&&(u.vastUrl=e.nurl),u.mediaType=Rn,d.renderer||d.mediaTypes&&d.mediaTypes.video&&"outstream"!==d.mediaTypes.video.context||(u.renderer=function(e,t,n){var r=n.install({id:t.id,url:t.url,loaded:!1});try{r.setRender(Od)}catch(e){Ee("Prebid Error calling setRender on renderer",e)}return r}(0,{id:d.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},r))):(u.ad=e.adm,u.mediaType=jn);var l=xd[i]&&xd[i].bidResponseExternal||{};n.push(Nt(u,l))}}else a=md+JSON.stringify(e);a&&Se(a)}}function Sd(e,t){return!De(t)||(e>t||e===t&&Math.random()>.5)}function Od(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}var Cd={isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId)&&!(jd(e)&&!function(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===E(e,"mediaTypes.video."+n)&&void 0===E(e,"params.video."+n)&&(t=!1,Se("TheMediaGrid Bid Adapter (withCriteo mode): mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"===e.mediaTypes.video.context&&1===n)return!0;if("outstream"===e.mediaTypes.video.context&&1!==n)return!0}return!1}(e))},buildRequests:function(e,t){var n,r,i,a,o=t.ortb2||{};Object.assign(t,{publisherExt:null===(n=o.site)||void 0===n?void 0:n.ext,userExt:null===(r=o.user)||void 0===r?void 0:r.ext,ceh:R.getConfig("criteo.ceh"),coppa:R.getConfig("coppa")});var s=function(e,t){var n,r="";t&&t.refererInfo&&(r=t.refererInfo.page);var i=Ut(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search,a={url:r,debug:"1"===i.pbt_debug,noLog:"1"===i.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(a.amp=!0)})),a}(e,t);if(i=function(e){var t="https://bidder.criteo.com/cdb";t+="?profileId=207",t+="&av="+String(34),t+="&wv="+encodeURIComponent("7.48.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),fd.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0";e.amp&&(t+="&im=1");e.debug&&(t+="&debug=1");e.noLog&&(t+="&nolog=1");var n=Ad("cto_bundle");n&&(t+="&bundle=".concat(n));Ad("cto_optout")&&(t+="&optout=1");var r=Ad("cto_sid");r&&(t+="&sid=".concat(r));var i=Ad("cto_idcpy");i&&(t+="&idcpy=".concat(i));return t}(s),a=function(e,t,n){var r,i,a={publisher:{url:e.url,ext:n.publisherExt},regs:{coppa:!0===n.coppa?1:!1===n.coppa?0:void 0},slots:t.map((function(e){r=e.params.networkId||r,i=e.schain||i;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),E(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),!function(e){return void 0!==E(e,"mediaTypes.banner")}(e)?t.sizes=[]:t.sizes=kd(E(e,"mediaTypes.banner.sizes"),Rd),jd(e)){var n={playersizes:kd(E(e,"mediaTypes.video.playerSize"),Rd),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},a=e.params.video;void 0!==a&&(n.skip=n.skip||a.skip||0,n.placement=n.placement||a.placement,n.minduration=n.minduration||a.minduration,n.playbackmethod=n.playbackmethod||a.playbackmethod,n.startdelay=n.startdelay||a.startdelay||0),t.video=n}return function(e,t){try{var n={};if(t.getFloor){var r,i;if(null!==(r=t.mediaTypes)&&void 0!==r&&r.banner)n.banner={},kd(E(t,"mediaTypes.banner.sizes")).forEach((function(e){return n.banner[Rd(e).toString()]=t.getFloor({size:e,mediaType:jn})}));if(null!==(i=t.mediaTypes)&&void 0!==i&&i.video)n.video={},kd(E(t,"mediaTypes.video.playerSize")).forEach((function(e){return n.video[Rd(e).toString()]=t.getFloor({size:e,mediaType:Rn})}));Object.keys(n).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:n}))}}catch(e){Se("Could not parse floors from Prebid: "+e)}}(t,e),t}))};r&&(a.publisher.networkid=r);i&&(a.source={ext:{schain:i}});a.user={ext:n.userExt},n&&n.ceh&&(a.user.ceh=n.ceh);n&&n.gdprConsent&&(a.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(a.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),a.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(a.gdprConsent.consentData=n.gdprConsent.consentString));n&&n.uspConsent&&(a.user.uspIab=n.uspConsent);return a}(s,e,t))return{method:"POST",url:i,data:a,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e,r=[];return n&&n.slots&&Pe(n.slots)&&n.slots.forEach((function(i){var a,o,s={requestId:v(t.bidRequests,(function(e){return e.adUnitCode===i.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===i.zoneid)})).bidId,cpm:i.cpm,currency:i.currency,netRevenue:!0,ttl:i.ttl||60,creativeId:i.creativecode,width:i.width,height:i.height,dealId:i.dealCode};if(null!==(a=n.ext)&&void 0!==a&&null!==(a=a.paf)&&void 0!==a&&a.transmission&&null!==(o=i.ext)&&void 0!==o&&null!==(o=o.paf)&&void 0!==o&&o.content_id){var d={content_id:i.ext.paf.content_id,transmission:e.ext.paf.transmission};s.meta=Object.assign({},s.meta,{paf:d})}i.adomain&&(s.meta=Object.assign({},s.meta,{advertiserDomains:i.adomain})),i.video?(s.vastUrl=i.displayurl,s.mediaType=Rn):s.ad=i.creative,r.push(s)})),r}};function Ad(e){var t=fd.getCookie(e),n=fd.getDataFromLocalStorage(e);return t||n||void 0}function kd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0===e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function Rd(e){return e[0]+"x"+e[1]}function jd(e){return void 0!==E(e,"mediaTypes.video")}function Bd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ud(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pd(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}rr(Td),u("gridBidAdapter");var Nd=[jn,Rn,kn],qd=[144,144],Md={JPY:1},zd="p",Fd="x",Gd=1,Ld=2,Vd=3,Wd=4,Hd=5,Kd=9,Jd={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},Yd={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":"","intimatemerger.com":""},Xd=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],Qd=["mimes","minduration","maxduration"],$d=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],Zd="".concat("ix","_features"),ec=!1,tc=Sn({bidderCode:"ix"}),nc={REQUESTED_FEATURE_TOGGLES:[],featureToggles:{},isFeatureEnabled:function(e){return E(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(tc.localStorageIsEnabled()){var e=function(e){try{return JSON.parse(e)}catch(e){}}(tc.getDataFromLocalStorage(Zd));E(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,r=E(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},tc.localStorageIsEnabled()&&tc.setDataInLocalStorage(Zd,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},tc.localStorageIsEnabled()&&tc.removeDataFromLocalStorage(Zd)}},rc=0,ic="",ac="",oc=2;function sc(e){var t=dc(e,Rn),n=E(e,"mediaTypes.video"),r=E(e,"params.video");if(fc(n,r).length)return{};for(var i in t.video=r?ut(e.params.video):{},t.ext.tid=E(e,"ortb2Imp.ext.tid"),yc(t,e),n)-1===$d.indexOf(i)||t.video.hasOwnProperty(i)||(t.video[i]=n[i]);if(t.video.minduration>t.video.maxduration)return Se("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:"ix",code:Kd}),{};var a=r&&r.context||n&&n.context;if(a&&!t.video.hasOwnProperty("placement")&&("instream"===a?t.video.placement=1:"outstream"===a?E(r,"playerConfig.floatOnScroll")?t.video.placement=5:t.video.placement=4:Ee("IX Bid Adapter: Video context '".concat(a,"' is not supported"))),!t.video.w||!t.video.h){var o=gc(E(t,"video.playerSize"))||gc(E(e,"params.size"));if(!o)return Ee("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=o[0],t.video.h=o[1]}return cc(e,t,Rn),t}function dc(e,t){var n={};if(n.id=e.bidId,n.ext={},E(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case jn:n.ext.siteID=e.params.banner.siteId.toString();break;case Rn:n.ext.siteID=e.params.video.siteId.toString();break;case kn:n.ext.siteID=e.params.native.siteId.toString()}else n.ext.siteID=e.params.siteId.toString();return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(n.ext.sid=String(e.params.id)),n}function cc(e,t,n){var r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),Be(e.getFloor)){var a="*",o="*";if(n&&Ge(Nd,n)){var s=t[n];a=n,o=[s.w,s.h]}try{i=e.getFloor({mediaType:a,size:o})}catch(e){Ee("priceFloors module call getFloor failed, error : ",e)}}i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=zd):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl=Fd)}function uc(e,t,n){var r={},i=!(!E(e,"exp")||!It(e.exp)),a=E(e,"dealid")||E(e,"ext.dealid");Md.hasOwnProperty(t)?r.cpm=e.price/Md[t]:r.cpm=e.price/100,r.requestId=e.impid,a&&(r.dealId=a),r.netRevenue=!0,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=oc||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl):r.vastXml=e.adm;var o=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{o=JSON.parse(e.adm)}catch(e){Ee("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==oc?(r.width=n.video.w,r.height=n.video.h,r.mediaType=Rn,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):o&&o.native?(r.native={ortb:o.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=kn,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=jn,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=E(e,"ext.dspid"),r.meta.brandId=E(e,"ext.advbrandid"),r.meta.brandName=E(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),r}function lc(e){return Array.isArray(e)&&2===e.length&&It(e[0])&&It(e[1])}function pc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(lc(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function fc(e,t){var n=[];e||Ee("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(var r=0,i=Qd;r<i.length;r++){var a=i[r],o=e&&e.hasOwnProperty(a),s=t&&t.hasOwnProperty(a);o||s||n.push("IX Bid Adapter: ".concat(a," is not included in either the adunit or params level"))}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),l=t&&t.hasOwnProperty("protocols");return d||c||u||l||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return lc(e)?e:!!lc(e[0])&&e[0]}function mc(e,t,n){if(e)return Dd(Dd({},v(n,(function(t){return t.bidId===e}))),v(t,(function(t){return t.id===e})))}function vc(e,t,n,r){var i="https://htlb.casalemedia.com/openrtb/pbjs",a=function(e){var t=[],n={};if(Pe(e)){var r,i=Bd(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;Yd.hasOwnProperty(a.source)&&E(a,"uids.0")&&(n[a.source]=!0,""!=Yd[a.source]&&(a.uids[0].ext={rtiPartner:Yd[a.source]}),delete a.uids[0].atype,t.push(a))}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:n}}(E(e,"0.userIdAsEids")),o=a.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===g()(n))for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];!i.responsePending&&i.data&&"object"===g()(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}(o,a),t&&"roundel"===t.bidderCode&&!a.seenSources["liveramp.com"])return[];var s=[],d=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=tc.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);d=function(e,t){t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:nc.isFeatureEnabled(t)}})));return e}(d,nc.REQUESTED_FEATURE_TOGGLES);var c=function(e){for(var t,n=e.map((function(e){return e.transactionId})).filter((function(e,t,n){return n.indexOf(e)===t})),r={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.48.0",userIds:xc(e[0]),url:window.location.href.split("?")[0]},i=function(i){E(t=e.filter((function(e){return e.transactionId===n[i]}))[0],"mediaTypes")&&(Object.keys(t.mediaTypes).length>1&&r.mfu++,E(t,"mediaTypes.native")&&r.nu++,E(t,"mediaTypes.banner")&&r.bu++,"outstream"===E(t,"mediaTypes.video.context")&&(r.ou++,kc(t)&&(r.ren=!0)),"instream"===E(t,"mediaTypes.video.context")&&r.iu++,r.allu++)},a=0;a<n.length;a++)i(a);return r}(e);for(var u in c)d.ext.ixdiag[u]=c[u];var l={};!function(e,t,n,r,i,a){rc=e[0].params.siteId,a.s=rc;var o=t&&t.bidderCode||"ix",s=R.getConfig(o);if(s&&"object"===g()(s.firstPartyData)){var d=s.firstPartyData,c="?";for(var u in d)d.hasOwnProperty(u)&&(c+="".concat(encodeURIComponent(u),"=").concat(encodeURIComponent(d[u]),"&"));c=c.slice(0,-1),"page"in n.site?n.site.page+=c:n.site.page=c}}(e,t,d=function(e,t){if(t){t.gdprConsent&&((ic=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:ic.gdprApplies?1:0}}),ic.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:ic.consentString||""},ic.hasOwnProperty("addtlConsent")&&ic.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:ic.addtlConsent}))),t.uspConsent&&(Q(e,"regs.ext.us_privacy",t.uspConsent),ac=t.uspConsent);var n=E(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(Q(e,"regs.gpp",t.gppConsent.gppString),Q(e,"regs.gpp_sid",t.gppConsent.applicableSections))}R.getConfig("coppa")&&Q(e,"regs.coppa",1);return e}(d=function(e,t,n,r,i){var a=E(t,"timeout");a&&(e.ext.ixdiag.tmax=a);R.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=R.getConfig("userSync").syncsPerBidder);var o=function(){if(!tc.localStorageIsEnabled())return;var e,t={};try{e=JSON.parse(tc.getDataFromLocalStorage("ixdiag")||"{}")}catch(e){return Se("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){"number"==typeof e[n][r]&&(t[r]=t[r]?t[r]+e[n][r]:e[n][r])}))})),t}();Me(o)||(e.ext.ixdiag.err=o);e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:r[0].auctionId},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain);i.length>0&&(e.user={},e.user.eids=i);document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer);return e}(d,t,n,e,o),t),0,0,l);for(var p=Object.keys(n),f=!1,m=0;m<p.length&&!(s.length>=4);m++){d=bc(n,p,d,m);var v=E(t,"ortb2")||{},b=Dd({},v.site||v.context),h=Dd({},v.user);if(!Me(v)&&!f){var y=ut(d=hc(t,d,v,b,h));y.site=Nt({},y.site,b),y.user=Nt({},y.user,h),d.site=Nt({},d.site,b),d.user=Nt({},d.user,h),f=!0}d=wc(n,d,p,m,l,i),m===p.length-1&&(s.push({method:"POST",url:i+"?s="+rc,data:ut(d),option:{contentType:"text/plain"},validBidRequests:e}),d.imp=[],f=!1)}return s}function bc(e,t,n,r){var i=e[t[r]],a=i.missingImps,o=void 0===a?[]:a,s=i.ixImps,d={ixImps:void 0===s?[]:s,missingBannerImpressions:o},c=Object.keys(d).map((function(e){return d[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,p()(t))}),[]),u=e[t[r]].gpid,l=e[t[r]].dfp_ad_unit_code,f=e[t[r]].tid,g=e[t[r]].sid;if(c.length&&jn in c[0]){for(var m=c[0],v={id:m.id,banner:{topframe:m.banner.topframe,format:c.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},b=0;b<v.banner.format.length;b++)null!=v.banner.format[b].ext&&null!=v.banner.format[b].ext.sid&&delete v.banner.format[b].ext.sid,"bidfloor"in c[b]&&(v.banner.format[b].ext.bidfloor=c[b].bidfloor);var h=e[t[r]].pos;It(h)&&(v.banner.pos=h),(l||u||f||g)&&(v.ext={},v.ext.dfp_ad_unit_code=l,v.ext.gpid=u,v.ext.tid=f,v.ext.sid=g),"bidfloor"in c[0]&&(v.bidfloor=c[0].bidfloor),"bidfloorcur"in c[0]&&(v.bidfloorcur=c[0].bidfloorcur);var y=e[t[r]].adUnitFPD;y&&(v.ext.data=y),n.imp.push(v)}else{var w;c.forEach((function(e){return Q(e,"ext.gpid",u)})),(w=n.imp).push.apply(w,p()(c))}return n}function hc(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((function(e){-1===Jd.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((function(e){-1===Jd.USER.indexOf(e)&&delete i[e]})),n.device){var a=Dd({},n.device.sua);Me(a)||Q(t,"device.sua",a)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&Q(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&Q(t,"regs.gpp_sid",n.regs.gpp_sid)),t}function yc(e,t){var n=E(t,"ortb2Imp.ext.data");n&&Q(e,"ext.data",n)}function wc(e,t,n,r,i,a){var o=e[n[r]].pbadslot,s=e[n[r]].tagId,d=e[n[r]].adUnitCode,c=e[n[r]].divId;return(o||s||d||c)&&(t.ext.ixdiag.pbadslot=o,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}function xc(e){var t=e.userId||{};return Xd.filter((function(e){return t[e]}))}function _c(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function Tc(e,t){var n=function(e){var t=dc(e,kn),n=e.nativeOrtbRequest;return n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"},t.ext.tid=E(e,"ortb2Imp.ext.tid"),yc(t,e),cc(e,t,kn),t}(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=E(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=E(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=E(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=E(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:_t(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function Ic(e,t){var n=sc(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=E(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=E(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=E(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=E(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:_t(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function Ec(e,t,n){var r=function(e){var t=dc(e,jn);t.banner={};var n=E(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=lt()?0:1,cc(e,t,jn),t}(e),i=pc(E(e,"mediaTypes.banner.sizes"),E(e,"params.size"));n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=E(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=E(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.transactionId].tid=E(e,"ortb2Imp.ext.tid"),n[e.transactionId].pbadslot=E(e,"ortb2Imp.ext.data.pbadslot"),n[e.transactionId].tagId=E(e,"params.tagId"),n[e.transactionId].pos=E(e,"mediaTypes.banner.pos");var a=E(e,"ortb2Imp.ext.data");a&&(n[e.transactionId].adUnitFPD=a);var o=E(e,"params.id");!o||"string"!=typeof o&&"number"!=typeof o||(n[e.transactionId].sid=String(o));var s=e.adUnitCode,d=document.getElementById(s)?s:_t(s).divId;n[e.transactionId].adUnitCode=s,n[e.transactionId].divId=d,i&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(r)),function(e,t,n){var r=e.transactionId;if(t.hasOwnProperty(r)){var i=[];t[r].hasOwnProperty("missingSizes")&&(i=t[r].missingSizes),_c(i,e.params.size),t[r].missingSizes=i}else if(E(e,"mediaTypes.banner.sizes")){var a=ut(e.mediaTypes.banner.sizes);_c(a,e.params.size);var o={missingSizes:a,impression:n};t[r]=o}}(e,t,r)}function Sc(e,t,n){var r=ut(t);return r.banner.w=n[0],r.banner.h=n[1],cc(e,r,jn),r}function Oc(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&"ix"===e.arguments[1].bidder&&function(e){if(tc.localStorageIsEnabled()){var t;try{t=JSON.parse(tc.getDataFromLocalStorage("ixdiag")||"{}")}catch(e){Ee("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var r=new Date(e);r.setDate(r.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&"ix"===e.arguments[1].bidder){var r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}tc.setDataInLocalStorage("ixdiag",JSON.stringify(t))}}(e)}function Cc(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:_t(t).divId;n?window.createIXPlayer(n,e):Ee("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function Ac(e,t){var n=sn.install({id:e,url:t,loaded:!1});try{n.setRender(Cc)}catch(e){return Ee("Prebid Error calling setRender on renderer",e),null}return t?n:(Ee("Outstream renderer URL not found"),null)}function kc(e){if("outstream"!==E(e,"mediaTypes.video.context"))return!1;var t=E(e,"mediaTypes.video.renderer");return t||(t=E(e,"renderer")),!!("object"!==g()(t)||!t.url||!t.render)||t.backupOnly}function Rc(e,t){var n="",r="0";return ic&&ic.hasOwnProperty("gdprApplies")&&(r=ic.gdprApplies?"1":"0"),ic&&ic.hasOwnProperty("consentString")&&(n=ic.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+rc.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(ac||"")}function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}rr({code:"ix",gvlid:10,aliases:[{code:"roundel",gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:Nd,isBidRequestValid:function(e){ec||(Kt(S.EVENTS.AUCTION_DEBUG,Oc),Kt(S.EVENTS.AD_RENDER_FAILED,Oc),ec=!0);var t,n,r=E(e,"params.video"),i=E(e,"params.size"),a=E(e,"mediaTypes.banner.sizes"),o=E(e,"mediaTypes.video"),s=E(e,"mediaTypes.video.playerSize"),d=e.params.hasOwnProperty("bidFloor"),c=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Ge(Nd,e.mediaType))return Ee("IX Bid Adapter: media type is not supported."),!1;if(E(e,"mediaTypes.banner")&&!a)return!1;if(i){var u=gc(i);if(!u)return Se("IX Bid Adapter: size has invalid format.",{bidder:"ix",code:Gd}),!1;if(!pc(e.sizes,u)&&!pc(s,u)&&!pc(a,u))return Se("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:"ix",code:Ld}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return Se("IX Bid Adapter: siteId must be string or number type.",{bidder:"ix",code:Wd}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return Se("IX Bid Adapter: siteId must valid value",{bidder:"ix",code:Wd}),!1;if((d||c)&&!(d&&c&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return Se("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:"ix",code:Hd}),!1;if(o&&r){var l=sc(e).video,p=fc(o,r);if("outstream"===E(e,"mediaTypes.video.context")&&kc(e)&&l){var f=[E(l,"w"),E(l,"h")];if(!(f[0]>=qd[0]&&f[1]>=qd[1]))return Se("IX Bid Adapter: ".concat(f," is an invalid size for IX outstream renderer")),!1}if(p.length)return p.forEach((function(e){Se(e,{bidder:"ix",code:Vd})})),!1}return function(e){return void 0===E(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},buildRequests:function(e,t){var n=[],r={},i={},a={},o={};for(var s in nc.getFeatureToggles(),e.forEach((function(e){var t=Object.keys(E(e,"mediaTypes",{}));for(var n in t)switch(t[n]){case jn:Ec(e,o,r);break;case Rn:Ic(e,i);break;case kn:Tc(e,a);break;default:Ee("IX Bid Adapter: ad unit mediaTypes ".concat(n," is not supported"))}})),o)if(o.hasOwnProperty(s)){var d=o[s].missingSizes;r.hasOwnProperty(s)||(r[s]={}),r[s].hasOwnProperty("missingImps")||(r[s].missingImps=[],r[s].missingCount=0);for(var c=o[s].impression,u=0;u<d.length;u++){var l=Sc(e[0],c,d[u]);r[s].missingImps.push(l),r[s].missingCount++}}return Object.keys(r).length>0&&n.push.apply(n,p()(vc(e,t,r))),Object.keys(i).length>0&&n.push.apply(n,p()(vc(e,t,i))),Object.keys(a).length>0&&n.push.apply(n,p()(vc(e,t,a))),n},interpretResponse:function(e,t){var n=[],r=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return nc.setFeatureToggles(e),n;for(var i=e.body,a=i.seatbid,o=0;o<a.length;o++)if(a[o].hasOwnProperty("bid")){for(var s=a[o].bid,d=t.data,c=0;c<s.length;c++){var u=mc(s[c].impid,d.imp,t.validBidRequests);if((r=uc(s[c],i.cur,u)).mediaType===Rn&&kc(u)){var l=E(i,"ext.videoplayerurl");if(r.renderer=Ac(s[c].bidId,l),!r.renderer)continue}n.push(r)}if(E(d,"ext.ixdiag.err")&&tc.localStorageIsEnabled())try{tc.removeDataFromLocalStorage("ixdiag")}catch(e){Se("ix can not clear ixdiag from localStorage.")}}return nc.setFeatureToggles(e),n},transformBidParams:function(e,t){return Ct({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],r=null;if(t.length>0&&(r=E(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;R.getConfig("userSync")&&(i=R.getConfig("userSync").syncsPerBidder),0===i&&(i=r),i=r&&(0===i||i)?r>i?i:r:1;for(var a=0;a<i;a++)n.push({type:"image",url:Rc(i,a)})}return n}}),u("ixBidAdapter");var Uc="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Pc={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},Dc="number",Nc="string",qc="boolean",Mc="array",zc={mimes:Mc,minduration:Dc,maxduration:Dc,startdelay:Dc,playbackmethod:Mc,api:Mc,protocols:Mc,w:Dc,h:Dc,battr:Mc,linearity:Dc,placement:Dc,minbitrate:Dc,maxbitrate:Dc,skip:Dc},Fc=1,Gc=3,Lc={1:"PMP",5:"PREF",6:"PMPG"},Vc={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,r=Vc.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),a=0;a<window.bluebillywig.renderers.length;a++)if(window.bluebillywig.renderers[a]._id===r){n=window.bluebillywig.renderers[a];break}n?n.bootstrap(t,i):Ee("".concat("PubMatic: ",": Couldn't find a renderer with ").concat(r))}else Ee("".concat("PubMatic: ",": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=Uc.replace("$RENDERER",e),r=sn.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(Vc.outstreamRender)}catch(e){Ee("".concat("PubMatic: ",": Error tying to setRender on renderer"),e)}return r},outstreamRender:function(e){e.renderer.push((function(){Vc.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},Wc=[jn,Rn,kn],Hc=0,Kc=!1,Jc=["pubmatic"],Yc=["all"];function Xc(e,t){if(Ue(t))switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||void 0;case"yob":return parseInt(t)||void 0;default:return t}else t&&Ee("PubMatic: Ignoring param key: "+e+", expects string-value, found "+g()(t))}function Qc(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=Ue(t=e.params.adSlot)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&Ee("pubmatic: adSlot must be a string. Ignoring adSlot"),"");var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void Ee("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(jn)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,a=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&a.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=a,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function $c(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+g()(t);switch(n){case qc:r=qe;break;case Dc:r=De;break;case Nc:r=Ue;break;case Mc:r=Pe}if(r(t))return t;Ee("PubMatic: "+i)}var Zc={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},eu=S.NATIVE_IMAGE_TYPES,tu=S.NATIVE_KEYS_THAT_ARE_NOT_ASSETS,nu=S.NATIVE_KEYS,ru=S.NATIVE_ASSET_TYPES,iu=Object.values(Zc);function au(e){var t;if(e.ortb){e=e.ortb,t=Bc(Bc({ver:"1.2"},e),{},{assets:[]});var n=e.assets,r=function(e){return e.title||e.img||e.data||e.video};if(n.length<1||!n.some((function(e){return r(e)})))return Ee("".concat("PubMatic: ",": Native assets object is empty or contains some invalid object")),Kc=!0,t;n.forEach((function(e){var n=e;n.img&&(n.img.type==Gc?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:void 0),n.h=n.h||n.height||(n.sizes?n.sizes[1]:void 0),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:void 0),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:void 0)):n.img.type==Fc&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:void 0),n.h=n.h||n.height||(n.sizes?n.sizes[1]:void 0))),n&&void 0!==n.id&&r(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!Ne(e))return Ee("".concat("PubMatic: ",": Native assets object is empty or not an object: ").concat(e)),void(Kc=!0);var t={ver:"1.2",assets:[]};for(var n in e)if(!tu.includes(n))if(nu.hasOwnProperty(n)||iu.includes(n)){var r=e[n],i=0;r.required&&qe(r.required)&&(i=Number(r.required));var a={id:t.assets.length,required:i};if(n in Zc)a.data={type:ru[Zc[n]]},(r.len||r.length)&&(a.data.len=r.len||r.length),r.ext&&(a.data.ext=r.ext);else if("icon"===n||"image"===n){if(a.img={type:"icon"===n?eu.ICON:eu.MAIN},r.aspect_ratios)if(Pe(r.aspect_ratios))if(r.aspect_ratios.length){var o=r.aspect_ratios[0],s=o.min_width,d=o.min_height;It(s)&&It(d)?(a.img.wmin=s,a.img.hmin=d):Ee("".concat("PubMatic: ",": image.aspect_ratios min_width or min_height are invalid: ").concat(s,", ").concat(d));var c=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(a.img.ext={aspectratios:c})}else Ee("".concat("PubMatic: ",": image.aspect_ratios was passed, but it's empty: ").concat(r.aspect_ratios));else Ee("".concat("PubMatic: ",": image.aspect_ratios was passed, but it's not a an array: ").concat(r.aspect_ratios));a.img.w=r.w||r.width,a.img.h=r.h||r.height,a.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:void 0),a.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:void 0),r.sizes&&(2===r.sizes.length&&It(r.sizes[0])&&It(r.sizes[1])?(Ie("".concat("PubMatic: ",": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):Ee("".concat("PubMatic: ",": image.sizes was passed, but its value is not an array of integers: ").concat(r.sizes))),r.ext&&(a.img.ext=r.ext),r.mimes&&(a.img.mimes=r.mimes)}else"title"===n?(a.title={len:r.len||r.length||140},r.ext&&(a.title.ext=r.ext)):"ext"===n&&(a.ext=r,delete a.required);t.assets.push(a)}else Ee("".concat("PubMatic: ",": Unrecognized native asset code: ").concat(n,". Asset will be ignored."));return t.assets.length<1?(Ee("".concat("PubMatic: ",": Could not find any valid asset")),void(Kc=!0)):t}(e);return t}function ou(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(void 0!==n&&Pe(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=void 0,Ee("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=lt()?0:1}else Ee("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=void 0;return t}function su(e){var t,n=Nt(E(e.mediaTypes,"video"),e.params.video);if(void 0!==n){for(var r in t={},function(e,t){E(e,"placement")||Ee("Video.Placement param missing for "+t)}(n,e.adUnitCode),zc)n.hasOwnProperty(r)&&(t[r]=$c(r,n[r],zc[r]));Pe(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):De(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=void 0,Ee("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function du(e){var t,n,r={},i={},a=e.hasOwnProperty("sizes")?e.sizes:[],o="",s=[];if(function(e,t){t.params.deals&&(Pe(t.params.deals)?t.params.deals.forEach((function(t){Ue(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):Ee("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):Ee("PubMatic: Error: bid.params.deals should be an array of strings."))}(r={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Xc("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Xc("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Xc("currency",e.params.currency):"USD"},e),function(e,t){var n,r="";if(t.params.dctr)if(Ue(r=t.params.dctr)&&r.length>0){var i=r.split("|");r="",i.forEach((function(e){r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else Ee("PubMatic: Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}(r,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var i,a=n.segments.length;r+="jw-id="+n.content.id;for(var o=0;o<a;o++)r+="|jw-"+n.segments[o]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=r:i.key_val+="|"+r}}(r,e),e.hasOwnProperty("mediaTypes"))for(o in e.mediaTypes)switch(o){case jn:void 0!==(t=ou(e))&&(r.banner=t);break;case kn:i.request=JSON.stringify(au(e.nativeParams)),Kc?(Ee("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),Kc=!1):r.native=i;break;case Rn:void 0!==(n=su(e))&&(r.video=n)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:lt()?0:1},Pe(a)&&a.length>1&&((a=a.splice(1,a.length-1)).forEach((function(e){s.push({w:e[0],h:e[1]})})),t.format=s),r.banner=t;return function(e,t){var n=Bc({},E(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&Q(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var r=E(n,"adserver.".concat(t));"string"==typeof r&&r&&(Q(e,"ext.data.adserver.".concat(t.toLowerCase()),r),"adslot"===t&&Q(e,"ext.dfp_ad_unit_code",r))})):Q(e,"ext.data.".concat(t),n[t])}))}(r,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||R.getConfig("pubmatic.disableFloors")||[jn,Rn,kn].forEach((function(r){if(e.hasOwnProperty(r)){var i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),Pe(e[r].format)&&e[r].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var a=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if(Ie("PubMatic: ","floor from floor module returned for mediatype:",r," and size:",i," is: currency",a.currency,"floor",a.floor),"object"===g()(a)&&a.currency===e.bidfloorcur&&!isNaN(parseInt(a.floor))){var o=parseFloat(a.floor);Ie("PubMatic: ","floor from floor module:",o,"previous floor value",n,"Min:",Math.min(o,n)),Ie("PubMatic: ","new floor value:",n=-1===n?o:Math.min(o,n))}}))}}));e.bidfloor&&(Ie("PubMatic: ","floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor));e.bidfloor=!isNaN(n)&&n>0?n:void 0,Ie("PubMatic: ","new impObj.bidfloor value:",e.bidfloor)}(r,e),r.hasOwnProperty(jn)||r.hasOwnProperty(kn)||r.hasOwnProperty(Rn)?r:void 0}function cu(e,t){(t=t.filter((function(e){return"string"==typeof e||(Ee("PubMatic: acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&(Ee("PubMatic: acat: Selected: ",t),e.ext.acat=t)}function uu(e){return!0===Pe(e)&&e.length>0}rr({code:"pubmatic",gvlid:76,supportedMediaTypes:[jn,Rn,kn],isBidRequestValid:function(e){if(e&&e.params){if(!Ue(e.params.publisherId))return Ee("PubMatic: Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Rn)){var t=E(e.mediaTypes,"video.mimes"),n=E(e,"params.video.mimes");if(!1===uu(t)&&!1===uu(n))return Ee("PubMatic: Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[Rn].hasOwnProperty("context"))return Se("".concat("PubMatic: ",": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[Rn].context&&!Ue(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[Rn].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(jn)||e.mediaTypes.hasOwnProperty(kn)?(delete e.mediaTypes[Rn],Ee("".concat("PubMatic: ",': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(Se("".concat("PubMatic: ",': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,r,i;t&&t.refererInfo&&(i=t.refererInfo);var a,o=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(i),s=function(e){return{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(o),d="",c=[],u=[],l=[];if(e.forEach((function(e){if((a=ut(e)).params.adSlot=a.params.adSlot||"",Qc(a),a.mediaTypes&&a.mediaTypes.hasOwnProperty("video")||a.params.hasOwnProperty("video"));else if(!(a.hasOwnProperty("mediaTypes")&&a.mediaTypes.hasOwnProperty(kn)||0!==a.params.width||0!==a.params.height))return void Ee("PubMatic: Skipping the non-standard adslot: ",a.params.adSlot,JSON.stringify(a));o.pubId=o.pubId||a.params.publisherId,(o=function(e,t){var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),Pc)Pc.hasOwnProperty(n)&&(r=e[n])&&(i=Pc[n],"object"===g()(i)&&(r=i.f(r,t)),Ue(r)?t[n]=r:Ee("PubMatic: Ignoring param : "+n+" with value : "+Pc[n]+", expects string-value, found "+g()(r)));return t}(a.params,o)).transactionId=a.transactionId,""===d?d=a.params.currency||void 0:a.params.hasOwnProperty("currency")&&d!==a.params.currency&&Ee("PubMatic: Currency specifier ignored. Only one currency permitted."),a.params.currency=d,a.params.hasOwnProperty("dctr")&&Ue(a.params.dctr)&&c.push(a.params.dctr),a.params.hasOwnProperty("bcat")&&Pe(a.params.bcat)&&(u=u.concat(a.params.bcat)),a.params.hasOwnProperty("acat")&&Pe(a.params.acat)&&(l=l.concat(a.params.acat));var t=du(a);t&&s.imp.push(t)})),0!=s.imp.length){s.site.publisher.id=o.pubId.trim(),Hc=o.pubId.trim(),s.ext.wrapper={},s.ext.wrapper.profile=parseInt(o.profId)||void 0,s.ext.wrapper.version=parseInt(o.verId)||void 0,s.ext.wrapper.wiid=o.wiid||t.auctionId,s.ext.wrapper.wv="prebid_prebid_7.48.0",s.ext.wrapper.transactionId=o.transactionId,s.ext.wrapper.wp="pbjs";var f,m,v=t?_n.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==v){if(s.ext.marketplace={},t&&1==v){var b=_n.get(t.bidderCode,"allowedAlternateBidderCodes");Pe(b)?(b=b.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Ze),Jc=b.includes("*")?Yc:[].concat(p()(Jc),p()(b))):Jc=Yc}s.ext.marketplace.allowedbidders=Jc.filter(Ze)}s.user.gender=o.gender?o.gender.trim():void 0,s.user.geo={},s.user.geo.lat=Xc("lat",o.lat),s.user.geo.lon=Xc("lon",o.lon),s.user.yob=Xc("yob",o.yob),s.device.geo=s.user.geo,s.site.page=o.kadpageurl.trim()||s.site.page.trim(),s.site.domain=(f=s.site.page,(m=document.createElement("a")).href=f,m.hostname),"object"===g()(R.getConfig("content"))&&(s.site.content=R.getConfig("content")),"object"===g()(R.getConfig("device"))&&(s.device=Object.assign(s.device,R.getConfig("device"))),s.device.language=s.device.language&&s.device.language.split("-")[0],Q(s,"source.tid",o.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(s.test=1),e[0].schain&&Q(s,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(Q(s,"user.ext.consent",t.gdprConsent.consentString),Q(s,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&Q(s,"regs.ext.us_privacy",t.uspConsent),!0===R.getConfig("coppa")&&Q(s,"regs.coppa",1),function(e,t){var n=E(t,"0.userIdAsEids");Pe(n)&&n.length>0&&Q(e,"user.eids",n)}(s,e);var h,y,w=t&&t.ortb2||{};if(w.site){var x=s.site,_=x.page,T=x.domain,I=x.ref;Nt(s,{site:w.site}),s.site.page=_,s.site.domain=T,s.site.ref=I}if(w.user&&Nt(s,{user:w.user}),w.bcat&&(u=u.concat(w.bcat)),null!==(n=w.device)&&void 0!==n&&n.sua)s.device.sua=null===(h=w.device)||void 0===h?void 0:h.sua;if(null!==(r=w.ext)&&void 0!==r&&null!==(r=r.prebid)&&void 0!==r&&null!==(r=r.bidderparams)&&void 0!==r&&null!==(r=r[t.bidderCode])&&void 0!==r&&r.acat){var S=w.ext.prebid.bidderparams[t.bidderCode].acat;cu(s,S)}else l.length&&cu(s,l);if(function(e,t){(t=t.filter((function(e){return"string"==typeof e||(Ee("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;Ee("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(Ee("PubMatic: bcat: Selected: ",t),e.bcat=t)}(s,u),null!=t&&t.timeout)s.tmax=t.timeout;else s.tmax=null===(y=window)||void 0===y||null===(y=y.PWT)||void 0===y||null===(y=y.versionDetails)||void 0===y?void 0:y.timeout;return s.ext.epoch=(new Date).getTime(),"object"===g()(R.getConfig("app"))&&(s.app=R.getConfig("app"),s.app.publisher=s.site.publisher,s.app.ext=s.site.ext||void 0,"object"!==g()(s.app.content)&&(s.app.content=s.site.content||void 0),delete s.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(s),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],r="USD",i=JSON.parse(t.data),a=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&Pe(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((function(e){e.bid&&Pe(e.bid)&&e.bid.forEach((function(o){var s={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:r,netRevenue:!0,ttl:300,referrer:a,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((function(e){if(o.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=Wc[e.ext.bidtype];else{Ie("PubMatic: bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=jn;else if(i.test(n))t.mediaType=Rn;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=kn)}catch(e){Ee("PubMatic: Error: Cannot parse native reponse for ad response: "+n)}}}(o,s),s.mediaType){case jn:break;case Rn:s.width=o.hasOwnProperty("w")?o.w:e.video.w,s.height=o.hasOwnProperty("h")?o.h:e.video.h,s.vastXml=o.adm,function(e,t){var n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var a=0;a<t.bidderRequest.bids.length;a++)t.bidderRequest.bids[a].bidId===e.requestId&&(n=t.bidderRequest.bids[a].params,r=t.bidderRequest.bids[a].mediaTypes[Rn].context,i=t.bidderRequest.bids[a].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=Vc.newRenderer(e.rendererCode,i))}}(s,t),function(e,t,n){var r,i;if(null!=t&&null!==(r=t.ext)&&void 0!==r&&r.prebiddealpriority){var a=E(tt(e.requestId,[n.bidderRequest]),"mediaTypes.video");if("adpod"==(null==a?void 0:a.context)){var o=(null==t||null===(i=t.ext)||void 0===i||null===(i=i.video)||void 0===i?void 0:i.duration)||(null==a?void 0:a.maxduration);e.video={context:"adpod",durationSeconds:o,dealTier:t.ext.prebiddealpriority}}}}(s,o,t);break;case kn:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void Ee("PubMatic: Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:Bc({},n.native)},t.mediaType=kn,t.width||(t.width=0),t.height||(t.height=0)}}(o,s)}})),o.ext&&o.ext.deal_channel&&(s.dealChannel=Lc[o.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var r=n||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&uu(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&uu(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])}(s,o,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(s.bidderCode=o.ext.marketplace),n.push(s)}))})))}catch(e){Se(e)}return n},getUserSyncs:function(e,t,n,r){var i=""+Hc;return n&&(i+="&gdpr="+(n.gdprApplies?1:0),i+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(i+="&us_privacy="+encodeURIComponent(r)),!0===R.getConfig("coppa")&&(i+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+i}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+i}]},transformBidParams:function(e,t,n,r){return Ct({publisherId:"string",adSlot:"string"},e)}}),u("pubmaticBidAdapter");var lu=new WeakMap;function pu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!lu.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),lu.set(e,n.map((function(e){var t=i()(e,2);return[t[0],t[1].fn]})))}var r=lu.get(e).filter((function(e){var n=i()(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=i()(e,2),r=n[0],a=n[1];return t.hasOwnProperty(r)?t[r].bind(this,a):a}));return function(){var e=this,t=Array.from(arguments);r.forEach((function(n){n.apply(e,t)}))}}function fu(e){return(e=ve(e)).map((function(e){var t=e.split("x"),n=i()(t,2),r=n[0],a=n[1];return{w:parseInt(r,10),h:parseInt(a,10)}}))}var gu=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),mu={instream:1};var vu,bu={1:jn,2:Rn,4:kn};var hu=(vu={},o()(vu,es,{fpd:{priority:99,fn:function(e,t){Nt(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:Za("ORTB request")},props:{fn:function(e,t){var n;Object.assign(e,{id:e.id||t.auctionId,test:e.test||0});var r=parseInt(t.timeout,10);isNaN(r)||(e.tmax=r),Q(e,"source.tid",(null===(n=e.source)||void 0===n?void 0:n.tid)||t.auctionId)}}}),o()(vu,ts,{fpd:{priority:99,fn:function(e,t){Nt(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){if(!n.mediaType||n.mediaType===jn){var r=E(t,"mediaTypes.banner");if(r){var i={topframe:!0===lt()?0:1};r.sizes&&(i.format=fu(r.sizes)),r.hasOwnProperty("pos")&&(i.pos=r.pos),e.banner=Nt(i,e.banner)}}}},pbadslot:{fn:function(e){var t,n,r=null===(t=e.ext)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.pbadslot;r&&"string"==typeof r||(null===(n=e.ext)||void 0===n||null===(n=n.data)||void 0===n||delete n.pbadslot)}}}),o()(vu,ns,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var r=n.mediaType;if(!r&&!bu.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||bu[t.mtype]}}},banner:{fn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createPixel,n=void 0===t?function(e){return Qe(decodeURIComponent(e))}:t;return function(e,t){e.mediaType===jn&&(t.adm&&t.nurl?(e.ad=t.adm,e.ad+=n(t.nurl)):t.adm?e.ad=t.adm:t.nurl&&(e.adUrl=t.nurl))}}()},props:{fn:function(e,t,n){var r;Object.entries({requestId:null===(r=n.bidRequest)||void 0===r?void 0:r.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=i()(e,2);t[0];return void 0!==t[1]})).forEach((function(t){var n=i()(t,2),r=n[0],a=n[1];return e[r]=a})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}),vu);function yu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=t.length>1?yu.apply(void 0,t):t[0];return Object.fromEntries($o.map((function(e){return[e,Object.assign({},r[e],i[e])]})))}hu[ts].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===kn){var r,i=t.nativeOrtbRequest;if(i)null!==(r=(i=Object.assign({},n.nativeRequest,i)).assets)&&void 0!==r&&r.length?e.native=Nt({},{request:JSON.stringify(i),ver:i.ver},e.native):Ee("mediaTypes.native is set, but no assets were specified. Native request skipped.",t)}}},hu[ns].native={fn:function(e,t){if(e.mediaType===kn){var n;if(!Ne(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},hu[ts].video={fn:function(e,t,n){if(!n.mediaType||n.mediaType===Rn){var r=E(t,"mediaTypes.video");if(!Me(r)){var a=Object.fromEntries(Object.entries(r).filter((function(e){var t=i()(e,1)[0];return gu.has(t)})));if(r.playerSize){var o=fu(r.playerSize);o.length>1&&Ee("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(a,o[0])}var s=mu[r.context];null!=s&&(a.placement=s),e.video=Nt(a,e.video)}}}},hu[ns].video={fn:function(e,t,n){if(e.mediaType===Rn){if(E(n.imp,"video.w")&&E(n.imp,"video.h")){var r=[n.imp.video.w,n.imp.video.h];e.playerWidth=r[0],e.playerHeight=r[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var wu,xu,_u=qt((function(){return yu(hu,vs(is))})),Tu=(wu={},o()(wu,jn,"banner"),o()(wu,kn,"native"),o()(wu,Rn,"video"),wu);var Iu=(xu={},o()(xu,es,{extPrebid:{fn:function(e,t){var n;Q(e,"ext.prebid",Nt({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),R.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t;Q(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:c().version},null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.channel))}},extPrebidAliases:{fn:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.am,a=void 0===i?pi:i;if(a.aliasRegistry[t.bidderCode]){var o=a.bidderRegistry[t.bidderCode];o&&o.getSpec().skipPbsAliasing||Q(e,"ext.prebid.aliases.".concat(t.bidderCode),a.aliasRegistry[t.bidderCode])}}}}),o()(xu,ts,{params:{fn:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.adUnit,a=r.bidderRequests,o=r.index,s=void 0===o?Vi.index:o,d=r.bidderRegistry,c=void 0===d?pi.bidderRegistry:d,u=t.params,l=c[t.bidder];l&&l.getSpec().transformBidParams&&(i=i||s.getAdUnit(t),a=a||[n.bidderRequest],u=l.getSpec().transformBidParams(u,!0,i,a)),u&&Q(e,"ext.prebid.bidder.".concat(t.bidder),u)}},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&Q(e,"ext.prebid.adunitcode",n)}}}),o()(xu,ns,{mediaType:{fn:function(e,t,n){var r,i=n.mediaType;i||(i=bu.hasOwnProperty(t.mtype)?bu[t.mtype]:null===(r=t.ext)||void 0===r||null===(r=r.prebid)||void 0===r?void 0:r.type,Tu.hasOwnProperty(i)||(i=jn)),e.mediaType=i},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===Rn){var n=E(t,"ext.prebid.cache.vastXml")||{},r=n.cacheId,i=n.url;if(!r||!i){var a=E(t,"ext.prebid.targeting")||{},o=a.hb_uuid,s=a.hb_cache_host,d=a.hb_cache_path;o&&s&&d&&(r=o,i="https://".concat(s).concat(d,"?uuid=").concat(o))}r&&i&&Object.assign(e,{videoCacheKey:r,vastUrl:i})}},priority:-10},bidderCode:{fn:function(e,t,n){var r;e.bidderCode=n.seatbid.seat,e.adapterCode=E(t,"ext.prebid.meta.adaptercode")||(null===(r=n.bidRequest)||void 0===r?void 0:r.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=E(t,"ext.prebid.bidid");Ue(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=E(t,"ext.prebid.targeting");Ne(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=Nt({},E(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var n=E(t,"ext.prebid.events.win");Ue(n)&&(e.pbsWurl=n)}}}),o()(xu,rs,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var r=i()(e,2),a=r[0],o=r[1],s=E(t,"ext.".concat(a,".").concat(n.bidderRequest.bidderCode));s&&(n.bidderRequest[o]=s,n.bidRequests.forEach((function(e){return e[o]=s})))}))}}}),xu),Eu=qt((function(){return yu(_u(),Iu,vs(as))}));function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cu={};R.getConfig("rubicon",(function(e){Nt(Cu,e.rubicon)}));var Au={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160"};Fe(Au,(function(e,t){return Au[e]=t}));var ku=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,r=e.processors,i=void 0===r?_u:r,a=e.overrides,o=void 0===a?{}:a,s=e.imp,d=e.request,c=e.bidResponse,u=e.response,l=new WeakMap;function p(e,t,n,r){var a;return function(){return null==a&&(a=function(){var a=n.bind(this,pu(i()[e]||{},o[e]||{}));return t&&(a=t.bind(this,a)),function(){try{return a.apply(this,arguments)}catch(e){r.call.apply(r,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),a.apply(this,arguments)}}var f=p(ts,s,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){Se("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),g=p(es,d,(function(e,t,n,r){var i={imp:t};return e(i,n,r),i}),(function(e,t,n,r){throw Se("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),m=p(ns,c,(function(e,t,n){var r={};return e(r,t,n),r}),(function(e,t,n){Se("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),v=p(rs,u,(function(e,t,n,r){var i={bids:t};return e(i,n,r),i}),(function(e,t,n,r){throw Se("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:r}),e}));return{toORTB:function(e){var t=e.bidderRequest,r=e.bidRequests,i=e.context,a=void 0===i?{}:i;r=r||t.bids;var o={req:Object.assign({bidRequests:r},n,a),imp:{}};o.req.impContext=o.imp;var s=r.map((function(e){var r=Object.assign({bidderRequest:t,reqContext:o.req},n,a),i=f(e,r);if(null!=i){if(i.hasOwnProperty("id"))return Object.assign(r,{bidRequest:e,imp:i}),o.imp[i.id]=r,i;Se("Converted ORTB imp does not specify an id, ignoring bid request",e,i)}})).filter(Boolean),d=g(s,t,o.req);return o.req.bidderRequest=t,null!=d&&l.set(d,o),d},fromORTB:function(e){var t=e.request,n=e.response,r=l.get(t);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n,e)}var a=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),o=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(a.hasOwnProperty(t.impid)&&r.imp.hasOwnProperty(t.impid))return m(t,i(r.imp[t.impid],{imp:a[t.impid],seatbid:e,ortbResponse:n}));Se("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return v(o,n,i(r.req))}}}({request:function(e,t,n,r){var i,a,o=r.bidRequests,s=e(t,n,r);s.cur=["USD"],s.test=R.getConfig("debug")?1:0,Q(s,"ext.prebid.cache",{vastxml:{returnCreative:!0===Cu.returnVast}}),Q(s,"ext.prebid.bidders",{rubicon:{integration:Cu.int_type||"pbjs"}}),Q(s,"ext.prebid.targeting.pricegranularity",{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(a=R).getConfig("customPriceBucket")&&a.getConfig("customPriceBucket").buckets}[a.getConfig("priceGranularity")]});var d=c().installedModules;return!d||d.length&&-1===d.indexOf("rubiconAnalyticsAdapter")||Q(s,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t){var n,r={},i=new Set;t.forEach((function(t){var n,a={user:{ext:{data:Ou({},t.params.visitor)}},site:{ext:{data:Ou({},t.params.inventory)}}},o=e.imp.find((function(e){var t;return null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.bidder)||void 0===t||null===(t=t.rubicon)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.language}));o&&(a.site.content={language:null===(n=o.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.bidder)||void 0===n||null===(n=n.rubicon)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.language});t.params.keywords&&(Array.isArray(t.params.keywords)?t.params.keywords:t.params.keywords.split(",")).forEach((function(e){return i.add(e)}));r=Nt(r,t.ortb2||{},a);var s=R.getConfig("user.id");r.user.id=r.user.id||s})),Nt(e,r),i&&i.size&&Q(e,"site.keywords",Array.from(i.values()).join(","));null==e||null===(n=e.ext)||void 0===n||null===(n=n.prebid)||void 0===n||delete n.storedrequest}(s,o),null==s||null===(i=s.ext)||void 0===i||null===(i=i.prebid)||void 0===i||delete i.storedrequest,!0===Cu.disableFloors&&delete s.ext.prebid.floors,o.filter((function(e){return"object"===g()(e.floorData)})).length>0&&(s.ext.prebid.floors={enabled:!1}),s},imp:function(e,t,n){var r,i=Nu(t);if(!i.includes(jn)||1!=i.length){var a=e(t,n);return a.id=t.adUnitCode,delete a.banner,R.getConfig("s2sConfig.defaultTtl")&&(a.exp=R.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&(a.video.pos=1),"btf"===t.params.position&&(a.video.pos=3),null===(r=a.ext)||void 0===r||null===(r=r.prebid)||void 0===r||delete r.storedrequest,function(e,t){"USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur);if(!t.bidfloor){var n=parseFloat(E(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,a),a}},bidResponse:function(e,t,n){var r=e(t,n);r.meta.mediaType=E(t,"ext.prebid.type");var i=n.bidRequest;return r.mediaType===Rn&&"outstream"===i.mediaTypes.video.context&&(r.renderer=function(e){var t=sn.install({id:e.adId,url:Cu.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:Cu.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(Bu)}catch(e){Ee("Prebid Error calling setRender on renderer",e)}return t}(r)),r.width=t.w||E(i,"mediaTypes.video.w")||E(i,"params.video.playerWidth"),r.height=t.h||E(i,"mediaTypes.video.h")||E(i,"params.video.playerHeight"),E(t,"ext.bidder.rp.advid")&&Q(r,"meta.advertiserId",t.ext.bidder.rp.advid),r},context:{netRevenue:!1!==Cu.netRevenue,ttl:300},processors:Eu}),Ru={code:"rubicon",gvlid:52,supportedMediaTypes:[jn,Rn,kn],isBidRequestValid:function(e){var t=!0;if("object"!==g()(e.params))return!1;for(var n=0,r=["accountId","siteId","zoneId"];n<r.length;n++)if(e.params[r[n]]=parseInt(e.params[r[n]]),isNaN(e.params[r[n]]))return Se("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=Nu(e,!0);if(!i.length)return!1;i.includes(Rn)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),r=Object.prototype.toString.call(0),i={mimes:n,protocols:n,linearity:r,api:n};return Object.keys(i).forEach((function(n){Object.prototype.toString.call(E(e,"mediaTypes.video."+n))!==i[n]&&(t=!1,Se("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+i[n]))})),t}(e));var a=[jn,kn].filter((function(e){return i.includes(e)})).length>0;return a?t&&a:t},buildRequests:function(e,t){var n,r=[],i=[];if((n=e.filter((function(e){var t=Nu(e)||[],n=t.length,r=e.params||{},i=r.bidonmultiformat,a=r.video;return 1===n&&(t.includes(Rn)||t.includes(kn))||2===n&&!t.includes(jn)||a&&t.includes(Rn)||i&&(t.includes(Rn)||t.includes(kn))})))&&n.length){var a=ku.toORTB({bidRequests:n,bidderRequest:t});i.push({method:"POST",url:"https://".concat(Cu.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:a,bidRequest:n})}var o=e.filter((function(e){var t=Nu(e)||[],n=e.params||{},r=n.bidonmultiformat,i=n.video;return t.includes(jn)&&(1===t.length||r||!r&&!i||!r&&i&&!t.includes(Rn))}));if(!0!==R.getConfig("rubicon.singleRequest"))r=i.concat(o.map((function(e){var n=Ru.createSlotParams(e,t);return{method:"GET",url:"https://".concat(Cu.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:Ru.getOrderedParams(n).reduce((function(e,t){var r=n[t];return Ue(r)&&""!==r||De(r)?"".concat(e).concat(Mu(t,r),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var s=o.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});r=i.concat(Object.keys(s).reduce((function(e,n){var r,i;return(r=s[n],i=10,r.map((function(e,t){return t%i==0?r.slice(t,t+i):null})).filter((function(e){return e}))).forEach((function(n){var r=Ru.combineSlotUrlParams(n.map((function(e){return Ru.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(Cu.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:Ru.getOrderedParams(r).reduce((function(e,t){var n=r[t];return Ue(n)&&""!==n||De(n)?"".concat(e).concat(Mu(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return r},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,r){return Object.keys(n).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(r,1,n[i])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var r=t[e].join(";"),i=r.match(n);t[e]=i?i[1]:r})),t},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n=e.params,r=Uu(e,"banner"),a=n.latLong||[],o=i()(a,2),s=o[0],d=o[1],c={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:r[0],alt_size_ids:r.slice(1).join(",")||void 0,rp_floor:(n.floor=parseFloat(n.floor))>=.01?n.floor:void 0,rp_secure:"1",tk_flint:"".concat(Cu.int_type||"pbjs_lite","_v7.48.0"),"x_source.tid":e.transactionId,"x_imp.ext.tid":e.transactionId,l_pb_bid_id:e.bidId,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(s))?void 0:parseFloat(s).toFixed(4),"p_geo.longitude":isNaN(parseFloat(d))?void 0:parseFloat(d).toFixed(4),"tg_fl.eid":e.code,rf:ju(e,t)};if("function"==typeof e.getFloor&&!Cu.disableFloors){var u;try{u=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){Se("Rubicon: getFloor threw an error: ",e)}c.rp_hard_floor="object"!==g()(u)||"USD"!==u.currency||isNaN(parseInt(u.floor))?void 0:u.floor}var l={1:"atf",3:"btf"}[E(e,"mediaTypes.banner.pos")]||"";c.p_pos="atf"===n.position||"btf"===n.position?n.position:l;var p=R.getConfig("user.id");return p&&(c.ppuid=p),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source?(c.tpid_tdid=e.uids[0].id,c["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(c["tpid_liveintent.com"]=e.uids[0].id,c["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(c["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?c.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?c["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||""):c["eid_".concat(e.source)]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype||""),!c.ppuid){var t=v(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));t&&t.id&&(c.ppuid=t.id)}}catch(t){Ee("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(c.gdpr=Number(t.gdprConsent.gdprApplies)),c.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(c.us_privacy=encodeURIComponent(t.uspConsent)),c.rp_maxbids=t.bidLimit||1,function(e,t,n){var r={user:{ext:{data:Ou({},e.params.visitor)}},site:{ext:{data:Ou({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=Pe(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=Nt({},e.ortb2||{},r),a=E(e.ortb2Imp,"ext")||{},o=E(e.ortb2Imp,"ext.data")||{},s=E(e,"ortb2Imp.ext.gpid"),d={user:[4],site:[1,2,5,6]},c={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},u=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&E(e,"ext.segtax")&&d[n]&&-1!==d[n].indexOf(E(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():("object"!==g()(e)||Array.isArray(e))&&void 0!==e?Array.isArray(e)?e.filter((function(e){if("object"!==g()(e)&&void 0!==e)return e.toString();Ee("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString():void 0},l=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=u(e,r,t),o=c[r]&&i?"".concat(c[r]):"data"===r?"".concat(c[t],"iab"):"".concat(c[t]).concat(r);n[o]=n[o]?n[o].concat(",",a):a};t===jn?(["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?l(i[e][t].data,e,"data"):"ext"!==t?l(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){l(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(o).forEach((function(e){"adserver"!==e?l(o[e],"site",e):"gam"===o[e].name&&l(o[e].adslot,name,e)})),s&&(n.p_gpid=s),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"]):(Object.keys(a).length&&Nt(n.imp[0].ext,a),s&&(n.imp[0].ext.gpid=s),Nt(n,i))}(e,jn,c),!0===R.getConfig("coppa")&&(c.coppa=1),e.schain&&qu(e.schain)&&(c.rp_schain=Ru.serializeSupplyChain(e.schain)),c},serializeSupplyChain:function(e){if(!qu(e))return"";var t=e.ver,n=e.complete,r=e.nodes;return"".concat(t,",").concat(n,"!").concat(Ru.serializeSupplyChainNodes(r))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){e=e.body;var n=t.data;if(!e||"object"!==g()(e))return[];if(e.seatbid){var r=E(e,"ext.errors.rubicon");return Array.isArray(r)&&r.length>0&&Ee("Rubicon: Error in video response"),ku.fromORTB({request:n,response:e}).bids}var a,o=e.ads,s=0,d=t.bidRequest;return"object"===g()(d)&&!Array.isArray(d)&&Nu(d).includes(Rn)&&"object"===g()(o)&&(o=o[d.adUnitCode]),!Array.isArray(o)||o.length<1?[]:o.reduce((function(t,n,r){if(n.impression_id&&a===n.impression_id?s++:a=n.impression_id,"ok"!==n.status)return t;var o,c,u=Array.isArray(d)?d[r-s]:d;if(u&&"object"===g()(u)){var l={requestId:u.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:300,netRevenue:!1!==Cu.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:jn}};if(n.creative_type&&(l.mediaType=n.creative_type),n.adomain&&(l.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===Rn)l.width=u.params.video.playerWidth,l.height=u.params.video.playerHeight,l.vastUrl=n.creative_depot_url,l.impression_id=n.impression_id,l.videoCacheKey=n.impression_id;else{l.ad=(o=n.script,c=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(c,"'>\n<script type='text/javascript'>").concat(o,"<\/script>\n</div>\n</body>\n</html>"));var p=Au[n.size_id].split("x").map((function(e){return Number(e)})),f=i()(p,2);l.width=f[0],l.height=f[1]}l.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(l)}else Se("Rubicon: bidRequest undefined at index position:".concat(r),d,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,t,n,r){if(!zu&&e.iframeEnabled){var i={};return n&&("boolean"==typeof n.gdprApplies&&(i.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(i.gdpr_consent=n.consentString)),r&&(i.us_privacy=encodeURIComponent(r)),i=Object.keys(i).length?"?".concat(Bt(i)):"",zu=!0,{type:"iframe",url:"https://".concat(Cu.syncHost||"eus",".rubiconproject.com/usync.html")+i}}},transformBidParams:function(e,t){return Ct({accountId:"number",siteId:"number",zoneId:"number"},e)}};function ju(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function Bu(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var r=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:r.align||"center",position:r.position||"append"},closeButton:r.closeButton||!1,label:r.label||void 0,collapse:r.collapse||!0})}))}function Uu(e,t){var n=e.params;if(t===Rn){var r=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?r=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(E(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}var i=[];return Array.isArray(n.sizes)?i=n.sizes:void 0!==E(e,"mediaTypes.banner.sizes")?i=Pu(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=Pu(e.sizes):Ee("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var r=t.indexOf(e),i=t.indexOf(n);return r>-1||i>-1?-1===r?1:-1===i?-1:r-i:e-n}))}(i)}function Pu(e){return ve(e).reduce((function(e,t){var n=parseInt(Au[t],10);return n&&e.push(n),e}),[])}function Du(e){var t=void 0!==E(e,"mediaTypes.".concat(Rn)),n=void 0!==E(e,"mediaTypes.".concat(jn)),r=void 0!==E(e,"params.bidonmultiformat"),i="object"!==g()(E(e,"params.video"));return!(!t||!r)||(n&&i&&(t=!1),t&&i&&Q(e,"params.video",{}),t)}function Nu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(Du(e)){if(-1===["outstream","instream"].indexOf(E(e,"mediaTypes.".concat(Rn,".context"))))return t&&Se("Rubicon: mediaTypes.video.context must be outstream or instream"),n;if(Uu(e,Rn).length<2)return t&&Se("Rubicon: could not determine the playerSize of the video"),n;t&&Te("Rubicon: making video request for adUnit",e.adUnitCode),n.push(Rn)}if(void 0!==E(e,"mediaTypes.".concat(kn))&&n.push(kn),void 0!==E(e,"mediaTypes.".concat(jn))){if(0===Uu(e,jn).length)return t&&Se("Rubicon: could not determine the sizes for banner request"),n;t&&Te("Rubicon: making banner request for adUnit",e.adUnitCode),n.push(jn)}return n}function qu(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||Se("Rubicon: required schain params missing"),t):t}function Mu(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var zu=!1;rr(Ru),u("rubiconBidAdapter");var Fu=fe(),Gu={code:"sonobi",gvlid:104,supportedMediaTypes:[jn,Rn],isBidRequestValid:function(e){if(!e.params)return!1;if(!e.params.ad_unit&&!e.params.placement_id)return!1;if(!E(e,"mediaTypes.banner")&&!E(e,"mediaTypes.video"))return!1;if(E(e,"mediaTypes.banner")){if(!E(e,"mediaTypes.banner.sizes")&&!e.params.sizes)return!1}else if(E(e,"mediaTypes.video")){if("outstream"===E(e,"mediaTypes.video.context")&&!e.params.sizes)return!1;if("instream"===E(e,"mediaTypes.video.context")&&!E(e,"mediaTypes.video.playerSize"))return!1}return!0},buildRequests:function(e,t){var n=e.map((function(e){var t;E(e,"mediaTypes.video")?t="video":E(e,"mediaTypes.banner")&&(t="display");var n=function(e){if(e.params.ad_unit)return e.params.ad_unit;return e.params.placement_id}(e);return/^[\/]?[\d]+[[\/].+[\/]?]?$/.test(n)?(n="/"===n.charAt(0)?n:"/"+n,o()({},"".concat(n,"|").concat(e.bidId),"".concat(Lu(e),"|").concat(Vu(e)).concat(Wu(e)).concat(Hu(t)))):/^[0-9a-fA-F]{20}$/.test(n)&&20===n.length?o()({},e.bidId,"".concat(n,"|").concat(Lu(e),"|").concat(Vu(e)).concat(Wu(e)).concat(Hu(t))):void Se("The ad unit code or Sonobi Placement id for slot ".concat(e.bidId," is invalid"))})),r={};n.forEach((function(e){Object.assign(r,e)}));var i={key_maker:JSON.stringify(r),ref:t.refererInfo.page,s:fe(),pv:Fu,vp:Yu(),lib_name:"prebid",lib_v:"7.48.0",us:0,iqid:_n.get("sonobi","storageAllowed")?JSON.stringify(Xu()):null},a=t.ortb2;a&&(i.fpd=JSON.stringify(a)),R.getConfig("userSync")&&R.getConfig("userSync").syncsPerBidder&&(i.us=R.getConfig("userSync").syncsPerBidder),An.canBidderRegisterSync("iframe","sonobi")?i.ius=1:i.ius=0,E(e[0],"params.hfa")&&(i.hfa=E(e[0],"params.hfa")),e[0].params.referrer&&(i.ref=e[0].params.referrer),t&&t.gdprConsent&&(i.gdpr=t.gdprConsent.gdprApplies?"true":"false",t.gdprConsent.consentString&&(i.consent_string=t.gdprConsent.consentString)),e[0].schain&&(i.schain=JSON.stringify(e[0].schain));var s=E(e[0],"userIdAsEids");Array.isArray(s)&&s.length>0&&(i.eids=JSON.stringify(s));var d=e[0].params.keywords;if(d&&(i.kw=d),t&&t.uspConsent&&(i.us_privacy=t.uspConsent),!0===R.getConfig("coppa")?i.coppa=1:i.coppa=0,Me(r))return null;var c="https://apex.go.sonobi.com/trinity.json";return E(e[0],"params.bid_request_url")&&(c=E(e[0],"params.bid_request_url")),{method:"GET",url:c,withCredentials:!0,data:i,bidderRequests:e}},interpretResponse:function(e,t){var n=e.body,r=[],a=t.data.ref;return 0===Object.keys(n.slots).length||Object.keys(n.slots).forEach((function(e){var o=n.slots[e],s=e.split("|").slice(-1)[0],d=function(e,t){for(var n=0;n<e.length;n++)if(e[n].bidId===t)return e[n]}(t.bidderRequests,s),c=null;"video"===o.sbi_ct&&(c="video","outstream"===E(d,"mediaTypes.video.context")&&(c="outstream"));var u=Ku(c,a);if(o.sbi_aid&&o.sbi_mouse&&o.sbi_size){var l=o.sbi_size.split("x"),p=i()(l,2),f=p[0],g=void 0===f?1:f,m=p[1],v=void 0===m?1:m,b=[];o.sbi_adomain&&(b=[o.sbi_adomain]);var h={requestId:s,cpm:Number(o.sbi_mouse),width:Number(g),height:Number(v),ad:u(n.sbi_dc,o.sbi_aid),ttl:500,creativeId:o.sbi_crid||o.sbi_aid,aid:o.sbi_aid,netRevenue:!0,currency:"USD",meta:{advertiserDomains:b}};if(o.sbi_dozer&&(h.dealId=o.sbi_dozer),"video"===c)h.mediaType="video",h.vastUrl=u(n.sbi_dc,o.sbi_aid),delete h.ad,delete h.width,delete h.height;else if("outstream"===c&&d){delete h.ad,h.mediaType="video",h.vastUrl=u(n.sbi_dc,o.sbi_aid),h.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=sn.install({id:t.aid,url:"https://mtrx.go.sonobi.com/sbi_outstream_renderer.js",config:n,loaded:!1,adUnitCode:e});try{r.setRender(Qu)}catch(e){Ee("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return Te("Sonobi outstream video impression event")},loaded:function(){return Te("Sonobi outstream video loaded event")},ended:function(){Te("Sonobi outstream renderer video event")}}),r}(d.adUnitCode,h,E(d,"renderer.options"));var y=E(d,"params.sizes");Array.isArray(y)&&Array.isArray(y[0])&&(y=y[0]),y&&(h.width=y[0],h.height=y[1])}r.push(h)}})),r},getUserSyncs:function(e,t,n,r){var i=[];try{e.pixelEnabled&&t[0].body.sbi_px.forEach((function(e){i.push({type:e.type,url:e.url})}))}catch(e){}return i}};function Lu(e){var t=[];return E(e,"mediaTypes.video.playerSize")&&t.push(E(e,"mediaTypes.video.playerSize")),E(e,"mediaTypes.video.sizes")&&t.push(E(e,"mediaTypes.video.sizes")),E(e,"params.sizes")&&t.push(E(e,"params.sizes")),E(e,"mediaTypes.banner.sizes")&&t.push(E(e,"mediaTypes.banner.sizes")),E(e,"sizes")&&t.push(E(e,"sizes")),p()(new Set(ve.apply(void 0,t))).join(",")}function Vu(e){var t=function(e){if(!Be(e.getFloor))return e.params.floor?e.params.floor:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});if(Ne(t)&&!isNaN(t.floor)&&"USD"===t.currency)return t.floor;return""}(e);return t?"f=".concat(t,","):""}function Wu(e){var t=E(e,"ortb2Imp.ext.data.pbadslot")||E(_t(e.adUnitCode),"gptSlot")||e.params.ad_unit;return t?"gpid=".concat(t,","):""}function Hu(e){var t="";return"video"===e?t="c=v,":"display"===e&&(t="c=d,"),t}var Ku=function(e,t){return function(n,r){return"video"===e||"outstream"===e?function(e,t,n){return"https://".concat(e,"apex.go.sonobi.com/vast.xml?vid=").concat(t,"&ref=").concat(encodeURIComponent(n))}(n,r,t):'<script type="text/javascript" src="'+"https://".concat(n,"apex.go.sonobi.com/sbi.js?aid=").concat(r,"&as=null&ref=").concat(encodeURIComponent(t))+'"><\/script>'}};var Ju=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return e.innerWidth>=t&&e.innerWidth<n}};function Yu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=Ju(e),n={lt:768},r={lt:992,ge:768};return t(0,n.lt)?"mobile":t(r.ge,r.lt)?"tablet":"desktop"}function Xu(){var e,t,n,r=function(){if(void 0!==e)return e;try{return e=!!window.localStorage}catch(t){e=!1}return!1},i=function(e){try{return JSON.parse(e)}catch(e){return null}}((t="_iiq_fdata",r()?window.localStorage.getItem(t):null));i&&i.pcid?i&&!i.pcidDate&&(i.pcidDate=Date.now()):i={pcid:(n=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===e?t:3&t|8).toString(16)}))),pcidDate:Date.now()};return function(e,t){try{r()&&window.localStorage.setItem(e,t)}catch(e){return null}}("_iiq_fdata",JSON.stringify(i)),i}function Qu(e){e.renderer.push((function(){var t=e.getSize().split("x"),n=i()(t,2),r=n[0],a=n[1],o=new window.SbiOutstreamRenderer;o.init({vastUrl:e.vastUrl,height:a,width:r}),o.setRootElement(e.adUnitCode)}))}function $u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}rr(Gu),u("sonobiBidAdapter");var el=null,tl=null,nl=Sn({bidderCode:"triplelift"});function rl(e){return al(e)&&(il(e)||function(e){return al(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function il(e){return al(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function al(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function ol(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:rl(e)?"video":"banner",size:"*"});"object"!==g()(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){Se("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function sl(e,t){Me(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function dl(e,t,n,r){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(cl(t)).map(function(e,t){return function(n){return{source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]}}}(n,r))}var cl=function(e){return function(t,n,r){var i=!!t&&(Ue(t)?!!t:Ne(t)&&!Pe(t)&&!Me(t)&&t.id&&Ue(t.id)&&!!t.id);return i||void 0===r[0]||Ee("Triplelift: invalid ".concat(e," userId format")),i}};function ul(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}rr({gvlid:28,code:"triplelift",supportedMediaTypes:[jn,Rn],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n="https://tlx.3lift.com/header/auction?",r=function(e,t){var n,r={},i=e[0].schain,a=function(e){var t={},n={},r={},i=e.ortb2||{},a=function(){var e=nl.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return Se("Triplelift: error parsing JSON: ",e),null}}(),o=Object.assign({},i.site),s=Object.assign({},i.user);if(a){s.data=s.data||[];try{s.data.push({name:"www.1plusx.com",ext:a})}catch(e){Se("Triplelift: error adding 1plusX segments: ",e)}}sl(n,o),sl(r,s),Me(n)||(t.context=n);Me(r)||(t.user=r);return t}(t);r.imp=e.map((function(e,t){var n,r,i={id:t,tagid:e.params.inventoryCode,floor:ol(e)};return rl(e)&&(i.video=function(e){var t=Zu(Zu({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){Ee("Video size not defined",e)}"instream"===t.context&&(t.placement=1);"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&(Te("video.placement value of ".concat(t.placement," is invalid for outstream context. Setting placement to 3")),t.placement=3):t.placement=3);t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number));return delete t.playerSize,t}(e)),e.mediaTypes.banner&&!il(e)&&(i.banner={format:(n=e.sizes,r=n.filter(ul),r.map((function(e){return{w:e[0],h:e[1]}})))}),Me(e.ortb2Imp)||(i.fpd=function(e){var t={},n={};sl(n,e.ext),Me(n)||(t.context=n);return t}(e.ortb2Imp),Me(e.ortb2Imp.ext)||(i.ext=Zu({},e.ortb2Imp.ext))),i}));var o=[].concat(p()((s=[e[0]],dl(s,"tdid","adserver.org","TDID"))),p()(function(e){return dl(e,"idl_env","liveramp.com","idl")}([e[0]])),p()(function(e){return dl(e,"criteoId","criteo.com","criteoId")}([e[0]])),p()(function(e){return dl(e,"pubcid","pubcid.org","pubcid")}([e[0]])),p()(function(e){var t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if(-1===t.indexOf(e.source)){var r=e.uids.map((function(t){return{id:t.id,ext:{rtiPartner:e.source}}}));n.push({source:e.source,uids:r})}}catch(t){Ee("Triplelift: Error attempting to add ".concat(e," to bid request"),t)}}));return n}(e[0])));var s;o.length>0&&(r.user={ext:{eids:o}});var d=function(e,t){var n={};Me(e)||(n.schain=Zu({},e));Me(t)||(n.fpd=Zu({},t));return n}(i,a);Me(d)||(r.ext=d);null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&(r.regs=Object.assign({},t.ortb2.regs));return r}(e,t);(n=ge(n,"lib","prebid"),n=ge(n,"v","7.48.0"),t&&t.refererInfo)&&(n=ge(n,"referrer",t.refererInfo.page));return t&&t.timeout&&(n=ge(n,"tmax",t.timeout)),t&&t.gdprConsent&&(n=ge(n,"gdpr",(el=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies).toString()),void 0!==t.gdprConsent.consentString&&(n=ge(n,"cmp_cs",tl=t.gdprConsent.consentString))),t&&t.uspConsent&&(n=ge(n,"us_privacy",t.uspConsent)),!0===R.getConfig("coppa")&&(n=ge(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),Te("tlCall request built: "+n),{method:"POST",url:n,data:r,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest;return(e.body.bids||[]).map((function(e){return function(e,t){var n={},r=t.width||1,i=t.height||1,a=t.deal_id||"",o=t.crid||"",s=e.bids[t.imp_id];0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:r,height:i,netRevenue:!0,ad:t.ad,creativeId:o,dealId:a,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},rl(s)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(rl(s)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native"),o&&(n.meta.networkId=o.slice(0,o.indexOf("_"))));return n}(n,e)}))},getUserSyncs:function(e,t,n,r){var i=function(e){if(!e)return;if(e.iframeEnabled)return"iframe";if(e.pixelEnabled)return"image"}(e);if(i){var a="https://eb2.3lift.com/sync?";return"image"===i&&(a=ge(a,"px",1),a=ge(a,"src","prebid")),(null!==tl||el)&&(a=ge(a,"gdpr",el),a=ge(a,"cmp_cs",tl)),r&&(a=ge(a,"us_privacy",r)),[{type:i,url:a}]}}}),u("tripleliftBidAdapter"),Vo.processQueue()}]);